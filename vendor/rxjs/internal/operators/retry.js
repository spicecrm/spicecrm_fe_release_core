"use strict";var __extends=this&&this.__extends||function(){var n=function(r,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)};return function(r,t){function e(){this.constructor=r}n(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function retry(t){return void 0===t&&(t=-1),function(r){return r.lift(new RetryOperator(t,r))}}exports.retry=retry;var RetryOperator=function(){function r(r,t){this.count=r,this.source=t}return r.prototype.call=function(r,t){return t.subscribe(new RetrySubscriber(r,this.count,this.source))},r}(),RetrySubscriber=function(o){function r(r,t,e){var n=o.call(this,r)||this;return n.count=t,n.source=e,n}return __extends(r,o),r.prototype.error=function(r){if(!this.isStopped){var t=this.source,e=this.count;if(0===e)return o.prototype.error.call(this,r);-1<e&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}},r}(Subscriber_1.Subscriber);