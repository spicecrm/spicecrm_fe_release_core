"use strict";var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function bufferCount(e,r){return void 0===r&&(r=null),function(t){return t.lift(new BufferCountOperator(e,r))}}exports.bufferCount=bufferCount;var BufferCountOperator=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?BufferSkipCountSubscriber:BufferCountSubscriber}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),BufferCountSubscriber=function(n){function t(t,e){var r=n.call(this,t)||this;return r.bufferSize=e,r.buffer=[],r}return __extends(t,n),t.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),n.prototype._complete.call(this)},t}(Subscriber_1.Subscriber),BufferSkipCountSubscriber=function(u){function t(t,e,r){var n=u.call(this,t)||this;return n.bufferSize=e,n.startBufferEvery=r,n.buffers=[],n.count=0,n}return __extends(t,u),t.prototype._next=function(t){var e=this,r=e.bufferSize,n=e.startBufferEvery,u=e.buffers,i=e.count;this.count++,i%n==0&&u.push([]);for(var f=u.length;f--;){var o=u[f];o.push(t),o.length===r&&(u.splice(f,1),this.destination.next(o))}},t.prototype._complete=function(){for(var t=this.buffers,e=this.destination;0<t.length;){var r=t.shift();0<r.length&&e.next(r)}u.prototype._complete.call(this)},t}(Subscriber_1.Subscriber);