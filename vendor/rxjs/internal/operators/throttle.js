"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");function throttle(e,r){return void 0===r&&(r=exports.defaultThrottleConfig),function(t){return t.lift(new ThrottleOperator(e,r.leading,r.trailing))}}exports.defaultThrottleConfig={leading:!0,trailing:!1},exports.throttle=throttle;var ThrottleOperator=function(){function t(t,e,r){this.durationSelector=t,this.leading=e,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new ThrottleSubscriber(t,this.durationSelector,this.leading,this.trailing))},t}(),ThrottleSubscriber=function(o){function t(t,e,r,i){var n=o.call(this,t)||this;return n.destination=t,n.durationSelector=e,n._leading=r,n._trailing=i,n._hasValue=!1,n}return __extends(t,o),t.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},t.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},t.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=subscribeToResult_1.subscribeToResult(this,e))},t.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},t.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},t.prototype.notifyNext=function(t,e,r,i,n){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(OuterSubscriber_1.OuterSubscriber);