"use strict";var __extends=this&&this.__extends||function(){var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};return function(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),empty_1=require("../observable/empty");function takeLast(r){return function(t){return 0===r?empty_1.empty():t.lift(new TakeLastOperator(r))}}exports.takeLast=takeLast;var TakeLastOperator=function(){function t(t){if(this.total=t,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return t.prototype.call=function(t,r){return r.subscribe(new TakeLastSubscriber(t,this.total))},t}(),TakeLastSubscriber=function(n){function t(t,r){var e=n.call(this,t)||this;return e.total=r,e.ring=new Array,e.count=0,e}return __extends(t,n),t.prototype._next=function(t){var r=this.ring,e=this.total,n=this.count++;r.length<e?r.push(t):r[n%e]=t},t.prototype._complete=function(){var t=this.destination,r=this.count;if(0<r)for(var e=this.count>=this.total?this.total:this.count,n=this.ring,o=0;o<e;o++){var i=r++%e;t.next(n[i])}t.complete()},t}(Subscriber_1.Subscriber);