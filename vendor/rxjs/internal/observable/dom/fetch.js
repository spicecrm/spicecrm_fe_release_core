"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../../Observable"),Subscription_1=require("../../Subscription");function fromFetch(b,u){return new Observable_1.Observable(function(r){var e,t=new AbortController,n=t.signal,i=!0,o=!1,s=new Subscription_1.Subscription;if(s.add(function(){o=!0,i&&t.abort()}),u){if(u.signal)if(u.signal.aborted)t.abort();else{var a=u.signal,c=function(){n.aborted||t.abort()};a.addEventListener("abort",c),s.add(function(){return a.removeEventListener("abort",c)})}e=__assign({},u,{signal:n})}else e={signal:n};return fetch(b,e).then(function(e){i=!1,r.next(e),r.complete()}).catch(function(e){i=!1,o||r.error(e)}),s})}exports.fromFetch=fromFetch;