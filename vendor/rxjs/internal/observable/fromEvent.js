"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),isArray_1=require("../util/isArray"),isFunction_1=require("../util/isFunction"),map_1=require("../operators/map"),toString=Object.prototype.toString;function fromEvent(e,n,r,t){return isFunction_1.isFunction(r)&&(t=r,r=void 0),t?fromEvent(e,n,r).pipe(map_1.map(function(e){return isArray_1.isArray(e)?t.apply(void 0,e):t(e)})):new Observable_1.Observable(function(t){setupSubscription(e,n,function(e){1<arguments.length?t.next(Array.prototype.slice.call(arguments)):t.next(e)},t,r)})}function setupSubscription(e,t,n,r,i){var o;if(isEventTarget(e)){var u=e;e.addEventListener(t,n,i),o=function(){return u.removeEventListener(t,n,i)}}else if(isJQueryStyleEventEmitter(e)){var s=e;e.on(t,n),o=function(){return s.off(t,n)}}else if(isNodeStyleEventEmitter(e)){var f=e;e.addListener(t,n),o=function(){return f.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var v=0,a=e.length;v<a;v++)setupSubscription(e[v],t,n,r,i)}r.add(o)}function isNodeStyleEventEmitter(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function isJQueryStyleEventEmitter(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function isEventTarget(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}exports.fromEvent=fromEvent;