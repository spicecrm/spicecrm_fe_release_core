"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var canReportError_1=require("./util/canReportError"),toSubscriber_1=require("./util/toSubscriber"),observable_1=require("./symbol/observable"),pipe_1=require("./util/pipe"),config_1=require("./config"),Observable=function(){function o(r){this._isScalar=!1,r&&(this._subscribe=r)}return o.prototype.lift=function(r){var e=new o;return e.source=this,e.operator=r,e},o.prototype.subscribe=function(r,e,o){var t=this.operator,n=toSubscriber_1.toSubscriber(r,e,o);if(t?n.add(t.call(n,this.source)):n.add(this.source||config_1.config.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),config_1.config.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},o.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){config_1.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),canReportError_1.canReportError(e)?e.error(r):console.warn(r)}},o.prototype.forEach=function(t,r){var n=this;return new(r=getPromiseCtor(r))(function(r,e){var o;o=n.subscribe(function(r){try{t(r)}catch(r){e(r),o&&o.unsubscribe()}},e,r)})},o.prototype._subscribe=function(r){var e=this.source;return e&&e.subscribe(r)},o.prototype[observable_1.observable]=function(){return this},o.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return 0===r.length?this:pipe_1.pipeFromArray(r)(this)},o.prototype.toPromise=function(r){var t=this;return new(r=getPromiseCtor(r))(function(r,e){var o;t.subscribe(function(r){return o=r},function(r){return e(r)},function(){return r(o)})})},o.create=function(r){return new o(r)},o}();function getPromiseCtor(r){if(!(r=r||(config_1.config.Promise||Promise)))throw new Error("no Promise impl found");return r}exports.Observable=Observable;