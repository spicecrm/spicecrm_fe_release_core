"use strict";var __extends=this&&this.__extends||function(){var s=function(r,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)};return function(r,t){function e(){this.constructor=r}s(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("./Observable"),Subscriber_1=require("./Subscriber"),Subscription_1=require("./Subscription"),ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError"),SubjectSubscription_1=require("./SubjectSubscription"),rxSubscriber_1=require("../internal/symbol/rxSubscriber"),SubjectSubscriber=function(e){function r(r){var t=e.call(this,r)||this;return t.destination=r,t}return __extends(r,e),r}(Subscriber_1.Subscriber);exports.SubjectSubscriber=SubjectSubscriber;var Subject=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return __extends(r,t),r.prototype[rxSubscriber_1.rxSubscriber]=function(){return new SubjectSubscriber(this)},r.prototype.lift=function(r){var t=new AnonymousSubject(this,this);return t.operator=r,t},r.prototype.next=function(r){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,e=t.length,s=t.slice(),o=0;o<e;o++)s[o].next(r)},r.prototype.error=function(r){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var t=this.observers,e=t.length,s=t.slice(),o=0;o<e;o++)s[o].error(r);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.isStopped=!0;for(var r=this.observers,t=r.length,e=r.slice(),s=0;s<t;s++)e[s].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(r){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this.hasError?(r.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.isStopped?(r.complete(),Subscription_1.Subscription.EMPTY):(this.observers.push(r),new SubjectSubscription_1.SubjectSubscription(this,r))},r.prototype.asObservable=function(){var r=new Observable_1.Observable;return r.source=this,r},r.create=function(r,t){return new AnonymousSubject(r,t)},r}(Observable_1.Observable),AnonymousSubject=function(s){function r(r,t){var e=s.call(this)||this;return e.destination=r,e.source=t,e}return __extends(r,s),r.prototype.next=function(r){var t=this.destination;t&&t.next&&t.next(r)},r.prototype.error=function(r){var t=this.destination;t&&t.error&&this.destination.error(r)},r.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},r.prototype._subscribe=function(r){return this.source?this.source.subscribe(r):Subscription_1.Subscription.EMPTY},r}(exports.Subject=Subject);exports.AnonymousSubject=AnonymousSubject;