/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/** 
 * Â© 2015 - 2020 aac services k.s. All rights reserved.
 * release: 2020.02.001
 * date: 2020-07-17 14:17:31
 * build: 2020.02.001.1594988251916
 **/
"use strict";var __decorate=this&&this.__decorate||function(e,t,s,i){var a,l=arguments.length,n=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;0<=o;o--)(a=e[o])&&(n=(l<3?a(n):3<l?a(t,s,n):a(t,s))||n);return 3<l&&n&&Object.defineProperty(t,s,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<s;t++)for(var l=arguments[t],n=0,o=l.length;n<o;n++,a++)i[a]=l[n];return i};Object.defineProperty(exports,"__esModule",{value:!0});var common_1=require("@angular/common"),forms_1=require("@angular/forms"),core_1=require("@angular/core"),drag_drop_1=require("@angular/cdk/drag-drop"),services_1=require("../services/services"),router_1=require("@angular/router"),directives_1=require("../directives/directives"),systemcomponents_1=require("../systemcomponents/systemcomponents"),rxjs_1=require("rxjs"),http_1=require("@angular/common/http"),administrationconfigurator=function(){function e(e,t){this.backend=e,this.modelutilities=t,this.dictionary="",this.entries=[],this.sorting={field:"",direction:""},this.fielddefobj={}}return e.prototype.loadEntries=function(o){var d=this;void 0===o&&(o=[]),this.backend.getRequest("configurator/entries/"+this.dictionary).subscribe(function(e){d.fielddefobj={};for(var t=0,s=o;t<s.length;t++){var i=s[t];d.fielddefobj[i.name]=i.type?i.type:""}for(var a=0,l=e;a<l.length;a++){var n=l[a];d.entries.push({id:n.id,mode:"",data:d.mapData(n)})}})},e.prototype.mapData=function(e){for(var t in this.fielddefobj)switch(this.fielddefobj[t]){case"bool":case"boolean":e[t]="1"==e[t]}return e},e.prototype.remapData=function(e){var t={};for(var s in this.fielddefobj)switch(this.fielddefobj[s]){case"bool":case"boolean":t[s]=1==e[s]?"1":"0";break;default:t[s]=e[s]}return t},e.prototype.addEntry=function(){var e=this.modelutilities.generateGuid();this.entries.unshift({id:e,mode:"new",data:{id:e}})},e.prototype.saveEntry=function(e){var s=this;this.entries.some(function(t){if(t.id===e)return delete t.backup,s.backend.postRequest("configurator/"+s.dictionary+"/"+e,{},s.remapData(t.data)).subscribe(function(e){t.mode=""}),!0})},e.prototype.deleteEntry=function(s){var i=this;this.entries.some(function(e,t){if(e.id===s)return delete e.backup,i.backend.deleteRequest("configurator/"+i.dictionary+"/"+s).subscribe(function(e){i.entries.splice(t,1)}),!0})},e.prototype.setEditMode=function(t){this.entries.some(function(e){if(e.id===t)return e.mode="edit",e.backup=JSON.parse(JSON.stringify(e.data)),!0})},e.prototype.cancelEditMode=function(s){var i=this;this.entries.some(function(e,t){if(e.id===s)return"new"===e.mode?i.entries.splice(t,1):(e.data=JSON.parse(JSON.stringify(e.backup)),delete e.backup,e.mode=""),!0})},e.prototype.isEditMode=function(t){var s=!1;return this.entries.some(function(e){if(e.id===t)return s="edit"===e.mode||"new"===e.mode,!0}),s},e.prototype.copy=function(s){var i=this;this.entries.some(function(e){if(e.id===s){var t={};return t.data=JSON.parse(JSON.stringify(e.data)),t.mode="new",t.id=i.modelutilities.generateGuid(),t.data.id=t.id,i.entries.unshift(t),!0}})},e.prototype.sort=function(e){var s=this;this.sorting.field===e?this.sorting.direction="asc"==this.sorting.direction?"dsc":"asc":(this.sorting.field=e,this.sorting.direction="asc"),this.entries.sort(function(e,t){return e.data[s.sorting.field]==t.data[s.sorting.field]?0:"asc"==s.sorting.direction?e.data[s.sorting.field]<t.data[s.sorting.field]?-1:1:e.data[s.sorting.field]<t.data[s.sorting.field]?1:-1})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.modelutilities])],e)}();exports.administrationconfigurator=administrationconfigurator;var ftsconfiguration=function(){function e(e,t,s,i,a){var l=this;this.backend=e,this.metadata=t,this.language=s,this.modal=i,this.toast=a,this.module="",this.module$=new core_1.EventEmitter,this.moduleFtsFields=[],this.moduleFtsSettings={},this.indexing=!1,this.modules=[],this.analyzers=[],this.backend.getRequest("ftsmanager/core/modules").subscribe(function(e){return l.modules=e}),this.backend.getRequest("ftsmanager/core/analyzers").subscribe(function(e){return l.analyzers=e.sort(function(e,t){return e.value>t.value?1:-1})})}return e.prototype.setModule=function(e){this.module=e,0<=this.modules.indexOf(e)?(this.getModuleFtsFields(),this.getModuleSettings()):(this.module&&this.modules.push(e),this.moduleFtsFields=[],this.moduleFtsSettings=[]),this.module$.emit(e)},e.prototype.getModuleFtsFields=function(){var t=this;this.moduleFtsFields=[],this.backend.getRequest("ftsmanager/"+this.module+"/fields").subscribe(function(e){t.moduleFtsFields=e})},e.prototype.getModuleSettings=function(){var t=this;this.moduleFtsSettings=[],this.backend.getRequest("ftsmanager/"+this.module+"/settings").subscribe(function(e){t.moduleFtsSettings=e})},e.prototype.getFieldDetails=function(t){var s={};return this.moduleFtsFields.some(function(e){if(e.id===t)return s=e,!0}),s},e.prototype.deleteModule=function(t){var s=this;this.backend.deleteRequest("ftsmanager/"+this.module).subscribe(function(e){s.modules.splice(s.modules.indexOf(t),1),s.module=""})},e.prototype.save=function(t){var s=this;void 0===t&&(t=!0);var i=new rxjs_1.Subject,e={fields:this.moduleFtsFields,settings:this.moduleFtsSettings};return this.backend.postRequest("ftsmanager/"+this.module,{},e).subscribe(function(e){i.next(e),t&&(e?s.toast.sendToast(s.language.getLabel("LBL_DATA_SAVED"),"success"):s.toast.sendToast(s.language.getLabel("ERR_NETWORK"),"error"))},function(e){return i.error(e)}),i},e.prototype.searchPath=function(t){var s=!1;return this.moduleFtsFields.some(function(e){if(e.path===t)return s=!0}),s},e.prototype.executeAction=function(e,t){var i=this,a="",l="";switch(e){case"bulk":a="ftsmanager/"+this.module+"/index",l="LBL_INDEX";break;case"init":a="ftsmanager/core/initialize",l="LBL_INITIALIZE";break;case"reset":a="ftsmanager/"+this.module+"/index/reset",l="LBL_RESET"}this.modal.openModal("SystemLoadingModal").subscribe(function(s){s.instance.messagelabel=i.language.getLabel("LBL_EXECUTING")+": "+i.language.getLabel(l),"reset"==e?i.save(!1).subscribe(function(e){i.backend.postRequest(a,t).subscribe(function(e){if(e&&e.message&&"string"==typeof e.message&&0<e.message.length){var t=e.type&&0<e.type.length?e.type:i.language.getLabel("LBL_INFO");i.modal.info(e.message,t,e.status)}else"error"!=e.status&&i.toast.sendToast(i.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");s.instance.self.destroy()},function(e){return s.instance.self.destroy()})},function(e){return s.instance.self.destroy()}):i.backend.postRequest(a,t).subscribe(function(e){if(e&&e.message&&"string"==typeof e.message&&0<e.message.length){var t=e.type&&0<e.type.length?e.type:i.language.getLabel("LBL_INFO");i.modal.info(e.message,t,e.status)}else"error"!=e.status&&i.toast.sendToast(i.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");s.instance.self.destroy()},function(e){return s.instance.self.destroy()})})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.metadata,services_1.language,services_1.modal,services_1.toast])],e)}();exports.ftsconfiguration=ftsconfiguration;var dictionary=function(){function e(e,t,s,i){this.http=e,this.configurationService=t,this.session=s,this.metadata=i,this.data=[],this.dictionaryitem="",this.dictionaryfields=[]}return e.prototype.load=function(e){var t=this,s=new rxjs_1.Subject;return this.dictionaryitem=e,this.http.get(this.configurationService.getBackendUrl()+"/dictionary/list/"+e+"?sessionid="+this.session.authData.sessionId).subscribe(function(e){t.data=e.items,t.dictionaryfields=e.fields,s.next(e),s.complete()}),s.asObservable()},e.prototype.getFields=function(){for(var e=[],t=0,s=this.dictionaryfields;t<s.length;t++){var i=s[t];"id"!==i&&e.push(i)}return e},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.HttpClient,services_1.configurationService,services_1.session,services_1.metadata])],e)}();exports.dictionary=dictionary;var administration=function(){function e(e,t,s){var i=this;this.backend=e,this.broadcast=t,this.language=s,this.loading=!1,this.adminNavigation=[],this.opened_itemid={},this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.itemfilter="",this.admincomponent$=new rxjs_1.BehaviorSubject(this.admincomponent),this.loadNavigation(),this.broadcastsubscription=this.broadcast.message$.subscribe(function(e){i.handleMessage(e)})}return e.prototype.ngOnDestroy=function(){this.broadcastsubscription.unsubscribe()},e.prototype.handleMessage=function(e){switch(e.messagetype){case"loader.reloaded":this.loadNavigation()}},e.prototype.loadNavigation=function(){var t=this;this.loading=!0,this.backend.getRequest("spiceui/admin/navigation").subscribe(function(e){t.adminNavigation=e,t.loading=!1})},e.prototype.navigateHome=function(){this.opened_itemid=null,this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.admincomponent$.next(this.admincomponent)},e.prototype.getItemLabel=function(t){var s;return this.adminNavigation.some(function(e){if(s=e.groupcomponents.find(function(e){return e.id==t}))return!0}),s.admin_label},e.prototype.navigateto=function(t){var s;this.adminNavigation.some(function(e){if(s=e.groupcomponents.find(function(e){return e.id==t}))return!0}),s.component&&(this.admincomponent=s,this.admincomponent$.next(this.admincomponent),this.opened_itemid=t)},Object.defineProperty(e.prototype,"navigationGroups",{get:function(){if(""==this.itemfilter)return this.adminNavigation;for(var e=[],t=0,s=this.adminNavigation;t<s.length;t++){var i=s[t];if(i.label&&0<=this.language.getLabel(i.label).toLowerCase().indexOf(this.itemfilter.toLowerCase())||i.label&&0<=this.language.getLabel(i.label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase()))e.push(i);else{for(var a=[],l=0,n=i.groupcomponents;l<n.length;l++){var o=n[l];(0<=o.adminaction.toLowerCase().indexOf(this.itemfilter.toLowerCase())||o.admin_label&&0<=this.language.getLabel(o.admin_label).toLowerCase().indexOf(this.itemfilter.toLowerCase())||o.admin_label&&0<=this.language.getLabel(o.admin_label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase()))&&a.push(o)}0<a.length&&e.push({id:i.id,name:i.name,label:i.label,groupcomponents:a})}}return e},enumerable:!0,configurable:!0}),e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.broadcast,services_1.language])],e)}();exports.administration=administration;var AdministrationMain=function(){function AdministrationMain(e,t,s,i,a){this.administration=e,this.metadata=t,this.language=s,this.navigation=i,this.navigationtab=a,this.admincontentObject=null,this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_ADMINISTRATION"),displayicon:"settings"})}return AdministrationMain.prototype.ngAfterViewInit=function(){var t=this;this.administration.admincomponent$.subscribe(function(e){t.openContent(e)})},AdministrationMain.prototype.openContent=function(t){var s=this;this.admincontentObject&&this.admincontentObject.destroy(),this.metadata.addComponent(t.component,this.admincontentcontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,s.admincontentObject=e})},__decorate([core_1.ViewChild("admincontentcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],AdministrationMain.prototype,"admincontentcontainer",void 0),AdministrationMain=__decorate([core_1.Component({template:'<div system-to-bottom-noscroll class="slds-grid" [system-overlay-loading-spinner]="administration.loading"><div class="slds-large-size--1-of-8 slds-medium-size--1-of-6" style="min-width: 220px;"><administration-menu></administration-menu></div><div class="slds-grow" system-to-bottom><div #admincontentcontainer></div></div></div>',providers:[administration]}),__metadata("design:paramtypes",[administration,services_1.metadata,services_1.language,services_1.navigation,services_1.navigationtab])],AdministrationMain)}();exports.AdministrationMain=AdministrationMain;var AdministrationMenu=function(){function e(e,t,s){this.language=e,this.navigationtab=t,this.administration=s}return e.prototype.trackbyfn=function(e,t){return t.id},e.prototype.openContent=function(e){if(this.administration.opened_itemid==e)return!0;var t=this.administration.getItemLabel(e);this.navigationtab.setTabInfo({displayname:this.language.getLabel(t||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(e)},e=__decorate([core_1.Component({selector:"administration-menu",template:'<div class="slds-grid slds-grid--vertical slds-navigation-list--vertical slds-navigation-list--vertical-inverse slds-border--right"><div class="slds-p-horizontal--xx-small slds-p-vertical--small slds-border--bottom slds-grid slds-grid--vertical-align-center"><div class="slds-p-horizontal--x-small"><button class="slds-button slds-button_icon" (click)="administration.navigateHome()" tabindex="-1"><system-button-icon icon="home"></system-button-icon></button></div><div class="slds-grow slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-input-has-icon_group-right slds-m-vertical--xx-small"><input type="text" class="slds-input" [placeholder]="language.getLabel(\'LBL_SEARCH\')" [(ngModel)]="administration.itemfilter"><system-utility-icon *ngIf="administration.itemfilter == \'\'" [icon]="\'search\'" [addclasses]="\'slds-input__icon slds-input__icon--left\'"></system-utility-icon><div *ngIf="administration.itemfilter != \'\'" class="slds-input__icon-group slds-input__icon-group_right" style="margin-top: initial;"><button class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" (click)="administration.itemfilter = \'\'" tabindex="-1"><system-button-icon [icon]="\'clear\'"></system-button-icon></button></div></div></div><div system-to-bottom><div class="slds-p-bottom--medium"><ng-container *ngFor="let adminNavigationBlock of administration.navigationGroups; trackBy: trackbyfn"><h2 class="slds-text-title--caps slds-p-around--medium"><system-label [label]="adminNavigationBlock.label"></system-label></h2><ul><li *ngFor="let item of adminNavigationBlock.groupcomponents; trackBy: trackbyfn" [title]="language.getLabel(item.admin_label, \'\', \'long\')"><a href="javascript:void(0);" class="slds-navigation-list--vertical__action slds-p-vertical--xxx-small slds-text-link--reset" (click)="openContent(item.id)" [ngClass]="{\'slds-theme_inverse\': item.id == administration.opened_itemid}"><div class="slds-grid slds-grid--vertical-align-center slds-truncate"><system-icon [icon]="item.icon?item.icon:\'empty\'" size="x-small"></system-icon>{{item.admin_label ? language.getLabel(item.admin_label) : item.name}}</div></a></li></ul></ng-container></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.navigationtab,administration])],e)}();exports.AdministrationMenu=AdministrationMenu;var AdministrationMenuRouteItem=function(){function AdministrationMenuRouteItem(e){this.router=e,this.componentconfig={},this.self={}}return AdministrationMenuRouteItem.prototype.ngOnInit=function(){this.componentconfig.route&&this.router.navigate([this.componentconfig.route])},AdministrationMenuRouteItem=__decorate([core_1.Component({template:""}),__metadata("design:paramtypes",[router_1.Router])],AdministrationMenuRouteItem)}();exports.AdministrationMenuRouteItem=AdministrationMenuRouteItem;var AdministrationConfigurator=function(){function AdministrationConfigurator(e,t,s){this.metadata=e,this.administrationconfigurator=t,this.language=s,this.componentconfig={},this.displayFilters=!1,this.filters={}}return AdministrationConfigurator.prototype.ngOnInit=function(){this.administrationconfigurator.dictionary=this.componentconfig.dictionary,this.administrationconfigurator.loadEntries(this.componentconfig.fields)},Object.defineProperty(AdministrationConfigurator.prototype,"count",{get:function(){return this.administrationconfigurator.entries.length},enumerable:!0,configurable:!0}),AdministrationConfigurator.prototype.trackByFn=function(e,t){return t.id},AdministrationConfigurator.prototype.getEntries=function(){for(var e=[],t=0,s=this.administrationconfigurator.entries;t<s.length;t++){var i=s[t],a=!1;if(this.displayFilters)for(var l in this.filters)!this.administrationconfigurator.isEditMode(i.id)&&this.filters[l]&&i.data[l]&&-1==i.data[l].toUpperCase().indexOf(this.filters[l].toUpperCase())&&(a=!0);a||e.push(i)}return e},AdministrationConfigurator.prototype.getFields=function(){for(var e=[],t=0,s=this.componentconfig.fields;t<s.length;t++){var i=s[t];!0!==i.hidden&&e.push(i)}return e},AdministrationConfigurator.prototype.addEntry=function(){this.administrationconfigurator.addEntry()},AdministrationConfigurator.prototype.sort=function(e){this.administrationconfigurator.sort(e)},AdministrationConfigurator.prototype.toggleFilter=function(){this.displayFilters=!this.displayFilters},AdministrationConfigurator.prototype.clearFilter=function(){this.filters={}},AdministrationConfigurator=__decorate([core_1.Component({selector:"administration-configurator",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium"><system-label label="LBL_DICTIONARY_ITEM"></system-label>: {{componentconfig.dictionary}} ({{count}} <system-label label="LBL_RECORDS"></system-label>)</h2><button class="slds-button slds-button--neutral" (click)="addEntry()"><system-label label="LBL_ADD"></system-label></button></div><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th *ngFor="let field of getFields()" scope="col" (click)="sort(field.name)"><div class="slds-truncate slds-p-horizontal--small">{{field.name}}<ng-container *ngIf="administrationconfigurator.sorting.field == field.name"><system-utility-icon *ngIf="administrationconfigurator.sorting.direction == \'asc\'" [icon]="\'arrowup\'" [size]="\'x-small\'"></system-utility-icon><system-utility-icon *ngIf="administrationconfigurator.sorting.direction == \'dsc\'" [icon]="\'arrowdown\'" [size]="\'x-small\'"></system-utility-icon></ng-container></div></th><th scope="col" style="width:2rem;"><div class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="toggleFilter()"><system-button-icon [icon]="\'filterList\'" [size]="\'small\'"></system-button-icon></button></div></th></tr><tr *ngIf="displayFilters" class="slds-theme--shade"><td *ngFor="let field of getFields()"><div class="slds-form-element"><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="filters[field.name]"></div></div></td><td><div class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="clearFilter()"><system-button-icon [icon]="\'clear\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="toggleFilter()"><system-button-icon [icon]="\'chevronup\'" [size]="\'small\'"></system-button-icon></button></div></td></tr></thead><tbody><tr style="vertical-align: middle" class="slds-align-top" administration-configurator-item *ngFor="let entry of getEntries(); trackBy: trackByFn" [entry]="entry" [fields]="getFields()"></tr></tbody></table>',providers:[administrationconfigurator]}),__metadata("design:paramtypes",[services_1.metadata,administrationconfigurator,services_1.language])],AdministrationConfigurator)}();exports.AdministrationConfigurator=AdministrationConfigurator;var AdministrationConfiguratorItem=function(){function e(e){this.administrationconfigurator=e,this.fields=[],this.entry={}}return e.prototype.ngOnInit=function(){},e.prototype.setEditMode=function(){this.administrationconfigurator.setEditMode(this.entry.id)},e.prototype.isEditMode=function(e){return void 0===e&&(e=null),e?!e.readonly&&this.administrationconfigurator.isEditMode(this.entry.id):this.administrationconfigurator.isEditMode(this.entry.id)},e.prototype.setViewMode=function(){this.administrationconfigurator.cancelEditMode(this.entry.id)},e.prototype.save=function(){this.administrationconfigurator.saveEntry(this.entry.id)},e.prototype.delete=function(){this.administrationconfigurator.deleteEntry(this.entry.id)},e.prototype.copy=function(e){this.administrationconfigurator.copy(e)},e.prototype.getJSON=function(t){try{var e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(e){return t}},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"fields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"entry",void 0),e=__decorate([core_1.Component({selector:"[administration-configurator-item]",template:'<td *ngFor="let field of fields"><div *ngIf="!isEditMode(field);else editfield" class="slds-truncate slds-p-horizontal--small" style="max-width: 200px;" [ngSwitch]="field.type"><span *ngSwitchCase="\'json\'"><pre class="slds-m-vertical--none">{{getJSON(entry.data[field.name])}}</pre></span> <span *ngSwitchCase="\'text\'" class="slds-truncate_container_25" style="max-width: 200px;">{{entry.data[field.name]}}</span><system-checkbox *ngSwitchCase="\'bool\'" [disabled]="true" [(ngModel)]="entry.data[field.name]"></system-checkbox><system-checkbox *ngSwitchCase="\'boolean\'" [disabled]="true" [(ngModel)]="entry.data[field.name]"></system-checkbox><administration-configurator-item-role *ngSwitchCase="\'role\'" [editmode]="false" [fieldvalue]="entry.data[field.name]"></administration-configurator-item-role><span *ngSwitchDefault>{{entry.data[field.name]}}</span></div><ng-template #editfield><div class="slds-form-element"><div class="slds-form-element__control" [ngSwitch]="field.type"><textarea *ngSwitchCase="\'json\'" class="slds-textarea slds-scrollable--y slds-m-vertical--xx-small" [(ngModel)]="entry.data[field.name]"></textarea> <textarea *ngSwitchCase="\'text\'" class="slds-textarea slds-scrollable--y slds-m-vertical--xx-small" [(ngModel)]="entry.data[field.name]"></textarea><system-input-label *ngSwitchCase="\'label\'" [(ngModel)]="entry.data[field.name]"></system-input-label><system-checkbox *ngSwitchCase="\'bool\'" class="slds-m-horizontal--small" style="display: block" [(ngModel)]="entry.data[field.name]"></system-checkbox><system-checkbox *ngSwitchCase="\'boolean\'" class="slds-m-horizontal--small" style="display: block" [(ngModel)]="entry.data[field.name]"></system-checkbox><administration-configurator-item-role *ngSwitchCase="\'role\'" [editmode]="true" [(fieldvalue)]="entry.data[field.name]"></administration-configurator-item-role><input *ngSwitchDefault type="text" class="slds-input" [(ngModel)]="entry.data[field.name]"></div></div></ng-template></td><td><div *ngIf="!isEditMode()" class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="setEditMode()"><system-button-icon [icon]="\'edit\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="copy(entry.id)"><system-button-icon [icon]="\'copy\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="delete()"><system-button-icon [icon]="\'delete\'" [size]="\'small\'"></system-button-icon></button></div><div *ngIf="isEditMode()" class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="setViewMode()"><system-button-icon [icon]="\'close\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="save()"><system-button-icon [icon]="\'check\'" [size]="\'small\'"></system-button-icon></button></div></td>'}),__metadata("design:paramtypes",[administrationconfigurator])],e)}();exports.AdministrationConfiguratorItem=AdministrationConfiguratorItem;var AdministrationConfiguratorItemRole=function(){function e(e){this.metadata=e,this.editmode=!1,this.fieldvalue={},this.fieldvalueChange=new core_1.EventEmitter,this.roles=[]}return e.prototype.loadRoles=function(){var e=this.metadata.getRoles();e.sort(function(e,t){return e.name>t.name?1:-1});for(var t=0,s=e;t<s.length;t++){var i=s[t];this.roles.push(i)}},e.prototype.ngOnInit=function(){!this.editmode&&"*"==this.fieldvalue||this.loadRoles()},Object.defineProperty(e.prototype,"roleValue",{get:function(){return this.fieldvalue},set:function(e){this.fieldvalue=e,this.fieldvalueChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rolename",{get:function(){for(var e=0,t=this.roles;e<t.length;e++){var s=t[e];if(s.id==this.fieldvalue)return s.name}return this.fieldvalue},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editmode",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fieldvalue",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"fieldvalueChange",void 0),e=__decorate([core_1.Component({selector:"administration-configurator-item-role",template:'<div *ngIf="!editmode"><div class="slds-truncate">{{rolename}}</div></div><div *ngIf="editmode" class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container slds-m-vertical--xx-small"><select class="slds-select" [(ngModel)]="roleValue"><option value="*">*</option><option *ngFor="let role of roles" [value]="role.id">{{role.name}}</option></select></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.AdministrationConfiguratorItemRole=AdministrationConfiguratorItemRole;var AdministrationQuotaManager=function(){function AdministrationQuotaManager(e){this.backend=e,this.users=[],this.monthlyQuotas={},this.quotas=[],this.yearlyQuotas={},this.year=(new Date).getFullYear(),this.monthNamesList=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.yearsList=[]}return AdministrationQuotaManager.prototype.ngOnInit=function(){this.getYears(),this.getQuotaUsers()},AdministrationQuotaManager.prototype.getYears=function(){for(var e=(new Date).getFullYear(),t=e-2;t<e+7;t++)this.yearsList.push(t)},AdministrationQuotaManager.prototype.getQuotaUsers=function(){var a=this;this.backend.getRequest("quotamanager/users").subscribe(function(e){for(var t=0,s=e;t<s.length;t++){var i=s[t];a.users.push({id:i.id,mode:"",data:i}),0}a.getQuotas().subscribe()})},AdministrationQuotaManager.prototype.getQuotas=function(){var r=this,c=new rxjs_1.Subject;return this.backend.getRequest("quotamanager/quotas/"+this.year).subscribe(function(e){r.quotas=e,r.monthlyQuotas={},r.yearlyQuotas={};for(var t=0,s=e;t<s.length;t++){var i=s[t],a=i.assigned_user_id,l=Math.round(i.sales_quota),n=i.period-1;r.monthlyQuotas[a]||(r.monthlyQuotas[a]=new Array(12)),r.monthlyQuotas[a][n]=l,r.yearlyQuotas[a]||(r.yearlyQuotas[a]=0),r.yearlyQuotas[a]+=l}c.next(r.users),c.complete();for(var o=0,d=r.users;o<d.length;o++){a=d[o].data.id;r.monthlyQuotas[a]||(r.monthlyQuotas[a]=new Array(12)),r.yearlyQuotas[a]||(r.yearlyQuotas[a]=0)}}),c.asObservable()},AdministrationQuotaManager.prototype.updateQuota=function(e,t,s){var i=e.target.value?+e.target.value:0,a=this.monthlyQuotas[t][s];a=a||0,this.yearlyQuotas[t]-=a-i,0<i?(this.monthlyQuotas[t][s]=i,this.backend.postRequest("quotamanager/quota/"+t+"/"+this.year+"/"+(s+1)+"/"+i)):(delete this.monthlyQuotas[t][s],this.backend.deleteRequest("quotamanager/quota/"+t+"/"+this.year+"/"+(s+1)))},AdministrationQuotaManager=__decorate([core_1.Component({selector:"administration-quotamanager",template:'<div class="slds-page-header"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread"><div class="slds-media"><div class="slds-media__body"><h1 class="slds-page-header__title slds-truncate slds-align-middle">Quota Manager</h1></div></div><div class="slds-p-top--small"><label for="year-select">Year</label><select id="year-select" [(ngModel)]="year" (change)="getQuotas()"><option *ngFor="let aYear of yearsList">{{aYear}}</option></select></div></div></div><div class="slds-scrollable--x"><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col">Name</th><th scope="col">Total</th><th scope="col" *ngFor="let monthName of monthNamesList">{{monthName}}</th></tr></thead><tbody><tr *ngFor="let quotaUser of users" class="slds-text-title_caps"><td>{{quotaUser.data.last_name}} {{quotaUser.data.first_name}} ({{quotaUser.data.user_name}})</td><td>{{yearlyQuotas[quotaUser.data.id]}}</td><td *ngFor="let quota of monthlyQuotas[quotaUser.data.id]; let monthIndex = index"><administration-quotamanager-field [userid]="quotaUser.data.id" [data]="quotas" [monthindex]="monthIndex" [year]="year"></administration-quotamanager-field></td></tr></tbody></table></div>'}),__metadata("design:paramtypes",[services_1.backend])],AdministrationQuotaManager)}();exports.AdministrationQuotaManager=AdministrationQuotaManager;var AdministrationQuotaManagerField=function(){function e(e){this.backend=e,this.userid="",this.monthindex=0,this.year=0,this.data=[]}return Object.defineProperty(e.prototype,"value",{get:function(){for(var e=0,t=this.data;e<t.length;e++){var s=t[e];if(s&&s.assigned_user_id===this.userid&&s.period===""+(this.monthindex+1))return""+Math.round(s.sales_quota)}return""},set:function(e){for(var t=0,s=+e,i=0,a=this.data;i<a.length;i++){var l=a[i];l&&l.assigned_user_id===this.userid&&l.period===""+(this.monthindex+1)&&(0<s?this.data[t].sales_quota=e:delete this.data[t]),t++}0<s?this.backend.postRequest("quotamanager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1)+"/"+e).subscribe(function(e){}):this.backend.deleteRequest("quotamanager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1))},enumerable:!0,configurable:!0}),e.prototype.changeValue=function(e){},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"userid",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"monthindex",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"year",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"data",void 0),e=__decorate([core_1.Component({selector:"administration-quotamanager-field",template:'<input style="width:80px;" [(ngModel)]="value" (ngModelChange)="changeValue($event)">'}),__metadata("design:paramtypes",[services_1.backend])],e)}();exports.AdministrationQuotaManagerField=AdministrationQuotaManagerField;var AdministrationFTSStatus=function(){function AdministrationFTSStatus(e,t,s,i,a,l,n){this.metadata=e,this.language=t,this.modal=s,this.backend=i,this.helper=a,this.toast=l,this.injector=n,this.version={},this.stats={docs:0,size:0},this.loading=!1,this.indices=[],this.loadstatus()}return AdministrationFTSStatus.prototype.loadstatus=function(){var s=this;this.loading=!0,this.indices=[],this.backend.getRequest("fts/status").subscribe(function(e){for(var t in s.version=e.version,s.stats.docs=e.stats._all.total.docs.count,s.stats.size=s.helper.humanFileSize(e.stats._all.total.store.size_in_bytes),e.stats.indices)s.indices.push({name:t,docs:e.stats.indices[t].total.docs.count,size:s.helper.humanFileSize(e.stats.indices[t].total.store.size_in_bytes)});s.indices.sort(function(e,t){return e.name>t.name?1:-1}),s.loading=!1},function(e){s.loading=!1,s.toast.sendToast("Error loading Status","error")})},AdministrationFTSStatus=__decorate([core_1.Component({selector:"[administration-ftsstatus]",template:'<div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-p-around--small"><h2 class="slds-text-heading_medium"><system-label label="LBL_FTS_STATUS"></system-label></h2><button class="slds-button slds-button_icon slds-button_icon-border-filled" [disabled]="loading" (click)="loadstatus()"><system-button-icon icon="refresh"></system-button-icon></button></div><div [system-overlay-loading-spinner]="loading" system-to-bottom-noscroll><div *ngIf="!loading"><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-bottom--medium"><thead><tr class="slds-text-title_caps"><th scope="col"><system-label label="LBL_ATTRIBUTE"></system-label></th><th scope="col"><system-label label="LBL_VALUE"></system-label></th></tr></thead><tbody><tr><td><system-label label="LBL_VERSION"></system-label></td><td><div class="slds-truncate">{{version.version.number}}</div></td></tr><tr><td><system-label label="LBL_DOCS"></system-label></td><td><div class="slds-truncate">{{stats.docs}}</div></td></tr><tr><td><system-label label="LBL_SIZE"></system-label></td><td><div class="slds-truncate">{{stats.size}}</div></td></tr></tbody></table><h2 class="slds-p-around--small">Index Details</h2><div class="slds-border--top" system-to-bottom><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table--header-fixed"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_INDEX"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DOCS"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_SIZE"></system-label></div></th></tr></thead><tbody><tr *ngFor="let index of indices"><td><div class="slds-truncate">{{index.name}}</div></td><td><div class="slds-truncate">{{index.docs}}</div></td><td><div class="slds-truncate">{{index.size}}</div></td></tr></tbody></table></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,services_1.backend,services_1.helper,services_1.toast,core_1.Injector])],AdministrationFTSStatus)}();exports.AdministrationFTSStatus=AdministrationFTSStatus;var AdministrationFTSManager=function(){function AdministrationFTSManager(e,t,s,i,a){this.metadata=e,this.language=t,this.modal=s,this.ftsconfiguration=i,this.injector=a,this.activeTab="fields"}return Object.defineProperty(AdministrationFTSManager.prototype,"modules",{get:function(){return this.ftsconfiguration.modules.sort()},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationFTSManager.prototype,"module",{get:function(){return this.ftsconfiguration.module},set:function(e){this.ftsconfiguration.setModule(e)},enumerable:!0,configurable:!0}),AdministrationFTSManager.prototype.add=function(){var t=this;this.modal.openModal("AdministrationFTSManagerModuleAdd",!0,this.injector).subscribe(function(e){e.instance.module$.subscribe(function(e){e&&(t.module=e)})})},AdministrationFTSManager.prototype.delete=function(){var t=this;this.modal.confirmDeleteRecord().subscribe(function(e){e&&(t.ftsconfiguration.deleteModule(t.module),t.module="")})},AdministrationFTSManager.prototype.setActiveTab=function(e){this.activeTab=e},AdministrationFTSManager.prototype.save=function(){this.ftsconfiguration.save()},AdministrationFTSManager.prototype.indexModule=function(){var t=this;this.modal.openModal("AdministrationFtsManagerIndexModal").subscribe(function(e){e.instance.response.subscribe(function(e){e&&t.ftsconfiguration.executeAction("bulk",e)})})},AdministrationFTSManager.prototype.resetModule=function(){this.ftsconfiguration.executeAction("reset")},AdministrationFTSManager.prototype.initialize=function(){var t=this;this.modal.confirm("Are you sure you want to initialize your FTS? It recreates new indices, so indexed data will be lost and have to be rebuild!","Initialize").subscribe(function(e){e&&t.ftsconfiguration.executeAction("init")})},AdministrationFTSManager=__decorate([core_1.Component({selector:"[administration-ftsmanager]",template:'<div class="slds-grid slds-form--inline slds-p-around--small slds-border--bottom"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_MODULE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="module" [disabled]="modules.length == 0"><option></option><option *ngFor="let module of modules" [value]="module">{{module}}</option></select></div></div></div><div class="slds-button-group" role="group"><button type="button" class="slds-button slds-button--neutral" (click)="add()"><system-label label="LBL_ADD"></system-label></button> <button type="button" [disabled]="!module" class="slds-button slds-button--neutral" (click)="delete()"><system-label label="LBL_DELETE"></system-label></button></div><div class="slds-form-element slds-col--bump-left"><button type="button" class="slds-button slds-button--neutral" (click)="initialize()"><system-label label="LBL_INITIALIZE"></system-label></button><div class="slds-button-group" role="group" *ngIf="!ftsconfiguration.indexing"><button type="button" class="slds-button slds-button--neutral" [disabled]="!module" (click)="save()"><system-label label="LBL_SAVE"></system-label></button> <button type="button" class="slds-button slds-button--neutral" [disabled]="!module" (click)="resetModule()"><system-label label="LBL_RESET"></system-label></button> <button type="button" class="slds-button slds-button--neutral" [disabled]="!module" (click)="indexModule()"><system-label label="LBL_INDEX"></system-label></button></div></div></div><div class="slds-tabs--default slds-p-top--xx-small"><div *ngIf="module; else selectmodule"><ul class="slds-tabs--default__nav" role="tablist"><li class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': activeTab === \'fields\'}" role="presentation" (click)="setActiveTab(\'fields\')"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><system-label label="LBL_FIELDS"></system-label></a></li><li class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': activeTab === \'details\'}" role="presentation" (click)="setActiveTab(\'details\')"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><system-label label="LBL_INDEX_PARAMETERS"></system-label></a></li></ul><administration-ftsmanager-fields *ngIf="activeTab===\'fields\'"></administration-ftsmanager-fields><administration-ftsmanager-details *ngIf="activeTab===\'details\'"></administration-ftsmanager-details></div><ng-template #selectmodule><div class="slds-p-around--small slds-align--absolute-center" system-to-bottom><system-label label="LBL_SELECT_A_MODULE"></system-label></div></ng-template></div>',providers:[ftsconfiguration]}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,ftsconfiguration,core_1.Injector])],AdministrationFTSManager)}();exports.AdministrationFTSManager=AdministrationFTSManager;var AdministrationFTSManagerFields=function(){function e(e,t,s,i,a){var l=this;this.metadata=e,this.language=t,this.modal=s,this.injector=i,this.ftsconfiguration=a,this.currentfield="",this.fieldDetails={},this.displayAddFieldModal=!1,this.ftsconfiguration.module$.subscribe(function(e){l.currentfield=""})}return Object.defineProperty(e.prototype,"moduleFtsFields",{get:function(){return this.ftsconfiguration.moduleFtsFields},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aggregateaddparams",{get:function(){return this.fieldDetails.aggregateaddparams?atob(this.fieldDetails.aggregateaddparams):""},set:function(e){this.fieldDetails.aggregateaddparams=e?btoa(e):""},enumerable:!0,configurable:!0}),e.prototype.selectField=function(e){this.currentfield=e,this.fieldDetails=this.ftsconfiguration.getFieldDetails(e)},e.prototype.showAddFields=function(){this.modal.openModal("AdministrationFTSManagerFieldsAdd",!0,this.injector)},e.prototype.closeAddFields=function(e){this.displayAddFieldModal=!1},e=__decorate([core_1.Component({selector:"administration-ftsmanager-fields",template:'<div class="slds-grid"><div class="slds-size--1-of-2 slds-grid slds-grid--vertical" system-to-bottom><div class="slds-grow slds-scrollable--y" style="height: 100%"><administration-ftsmanager-fields-list style="display: block; height: 100%" (selectListField)="selectField($event)" [selectedField]="currentfield"></administration-ftsmanager-fields-list></div><div class="slds-p-around--small slds-text-align--center"><button class="slds-button slds-button--neutral" (click)="showAddFields()"><system-label label="LBL_ADD_FIELD"></system-label></button></div></div><div class="slds-size--1-of-2 slds-border--left slds-p-left--x-small" system-to-bottom><div *ngIf="currentfield; else selectfield"><h2 class="slds-text-heading--small slds-p-vertical--x-small"><system-label label="LBL_FIELD_DETAILS"></system-label>: {{fieldDetails.displaypath}}->{{fieldDetails.fieldname}}</h2><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_INDEX_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_INDEX_FIELD_NAME"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.indexfieldname"></div></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_NAME"></system-label></label><system-input-label [(ngModel)]="fieldDetails.name"></system-input-label></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_TYPE"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DATATYPE\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.indextype"><option [ngValue]="null"></option><option value="text">text</option><option value="keyword">keyword</option><option value="date">date</option><option value="double">double</option></select></div></div></div></div><div class="slds-grid slds-grid_vertical-align-center slds-m-top--x-small"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_BOOST"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_BOOST\')"></system-icon-help-text><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.boost"></div></div><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="fieldDetails.enablesort"><system-label label="LBL_SORTABLE"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_SORT\')"></system-icon-help-text></system-checkbox></div></div><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="fieldDetails.search"><system-label label="LBL_SEARCH"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_SEARCH\')"></system-icon-help-text></system-checkbox></div></div></div><div class="slds-grid slds-grid_vertical-align-center slds-m-top--x-small"><div class="slds-form-element slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_FUNCTION"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_FIELD_FUNCTION\')"></system-icon-help-text><div class="slds-form-element__control"><system-input-backend-method [(ngModel)]="fieldDetails.function"></system-input-backend-method></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small slds-p-right--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_AGGREGATE"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.aggregate"><option [ngValue]="null"></option><option value="term">Term</option><option value="range">Range</option><option value="datew">Date Week</option><option value="datem">Date Month</option><option value="dateq">Date Quarter</option><option value="datey">Date Year</option></select></div></div></div><div class="slds-form-element slds-p-vertical--x-small slds-grid"><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [disabled]="!fieldDetails.aggregate" [(ngModel)]="fieldDetails.aggregatecollapsed"><system-label label="LBL_COLLAPSED"></system-label></system-checkbox></div><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [disabled]="fieldDetails.aggregate != \'term\'" [(ngModel)]="fieldDetails.aggregateempty"><system-label label="LBL_AGGREGATEEMPTYVALUES"></system-label></system-checkbox></div></div><div class="slds-form-element" *ngIf="fieldDetails.aggregate"><label class="slds-form-element__label"><system-label label="LBL_PARAMETERS"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_PARAMS\')"></system-icon-help-text><div class="slds-form-element__control"><textarea class="slds-textarea" [(ngModel)]="aggregateaddparams"></textarea></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_SIZE"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_SIZE\')"></system-icon-help-text><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.aggregatesize"></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_PRIORITY"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.aggregatepriority"></div></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_SORTBY"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_SORTBY\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.aggregatesortby"><option [ngValue]="null"></option><option value="_count">Count (default)</option><option value="_key">Key</option></select></div></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_SORT"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_SORT\')"></system-icon-help-text><div class="slds-form-element__control"><select class="slds-select" [(ngModel)]="fieldDetails.aggregatesort"><option [ngValue]="null"></option><option value="asc">asc</option><option value="desc">desc (default)</option></select></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_ANALYZER"></system-label></legend><div class="slds-form-element__control"><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_ANALYZER"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ANALYZER\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_STANDARD\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_NGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_HTML\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EDGENGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EMAIL\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.analyzer"><option>standard</option><option *ngFor="let analyzer of ftsconfiguration.analyzers" [value]="analyzer.value">{{analyzer.text}}</option></select></div></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_SEARCH_ANALYZER"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_SEARCHANALYZER\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_STANDARD\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_NGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_HTML\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EDGENGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EMAIL\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.search_analyzer"><option>standard</option><option *ngFor="let analyzer of ftsconfiguration.analyzers" [value]="analyzer.value">{{analyzer.text}}</option></select></div></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_DUPLICATECHECK_SETTINGS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="fieldDetails.duplicatecheck"><system-label label="LBL_DUPLICATE_CHECK"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DUPLICATE_CHECK\')"></system-icon-help-text></system-checkbox></div></div><div class="slds-grid slds-grid_vertical-align-center"><div class="slds-col slds-size--1-of-2 slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_QUERY"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DUPLICATE_QUERY\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select [disabled]="!fieldDetails.duplicatecheck" class="slds-select" [(ngModel)]="fieldDetails.duplicatequery"><option>match (or)</option><option value="match_and">match (and)</option><option value="term">term</option></select></div></div></div><div class="slds-col slds-size--1-of-2 slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_FUZZINESS"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DUPLICATE_FUZZINESS\')"></system-icon-help-text><div class="slds-form-element__control"><input type="text" [disabled]="!fieldDetails.duplicatecheck" class="slds-input" [(ngModel)]="fieldDetails.duplicatefuzz"></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_EMAIL_PHONE_SETTINGS"></system-label></legend><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [(ngModel)]="fieldDetails.email"><system-label label="LBL_EMAIL_SEARCH"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_EMAIL\')"></system-icon-help-text></system-checkbox></div><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [(ngModel)]="fieldDetails.phonesearch"><system-label label="LBL_PHONE_SEARCH"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_PHONE\')"></system-icon-help-text></system-checkbox></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_FTS_ACTIVITY_PARAMS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_TYPE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.activitytype"><option>---</option><option value="activityparentid">activityparentid</option><option value="activitydate">activitydate</option><option value="activityenddate">activityenddate</option><option value="activityparticipant">activityparticipant</option><option value="activitystatus">activitystatus</option></select></div></div></div></div></fieldset></div><ng-template #selectfield><div class="slds-p-around--small slds-align--absolute-center slds-height_full">select a field</div></ng-template></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,core_1.Injector,ftsconfiguration])],e)}();exports.AdministrationFTSManagerFields=AdministrationFTSManagerFields;var AdministrationFTSManagerFieldsList=function(){function e(e,t,s,i,a,l){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.modal=a,this.modelutilities=l,this.links=[],this.self={},this.fields=[],this.nodePath="",this.selectedField="",this.selectListField=new core_1.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;window.setTimeout(function(){return e.ftsconfiguration.fieldsDropList=e.dropList},100)},e.prototype.rightDrop=function(e){if(this.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container)drag_drop_1.moveItemInArray(e.container.data,e.previousIndex,e.currentIndex);else{var t=e.item.data,s=this.modelutilities.generateGuid(),i={id:s,fieldid:s,fieldname:t.name,indexfieldname:t.name,name:t.label,path:this.nodePath+"::"+t.id};this.ftsconfiguration.moduleFtsFields.splice(e.currentIndex,0,i)}},e.prototype.removePlaceHolderElement=function(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)},e.prototype.trackByFn=function(e,t){return t.id},e.prototype.deleteField=function(t){var s=this;this.modal.confirmDeleteRecord().subscribe(function(e){e&&s.ftsconfiguration.moduleFtsFields.splice(t,1)})},e.prototype.handleSelection=function(e){this.selectListField.emit(e)},e.prototype.isSelected=function(e){return this.selectedField==e},__decorate([core_1.Input(),__metadata("design:type",drag_drop_1.CdkDropList)],e.prototype,"dragList",void 0),__decorate([core_1.Input(),__metadata("design:type",Node)],e.prototype,"dragPlaceHolderNode",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"nodePath",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"selectedField",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selectListField",void 0),__decorate([core_1.ViewChild("dropList",{static:!1}),__metadata("design:type",Object)],e.prototype,"dropList",void 0),e=__decorate([core_1.Component({selector:"administration-ftsmanager-fields-list",template:'<div cdkDropList #dropList="cdkDropList" [cdkDropListData]="ftsconfiguration.moduleFtsFields" [cdkDropListConnectedTo]="[dragList]" (cdkDropListDropped)="rightDrop($event)" class="slds-size--1-of-1 slds-border--left" style="height: 100%"><table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout"><thead><tr class="slds-text-title--caps slds-theme--shade"><th class="slds-cell-shrink"></th><th><div class="slds-truncate"><system-label label="LBL_PATH"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th class="slds-cell-shrink"></th></tr></thead><tbody><tr cdkDrag [cdkDragData]="field" *ngFor="let field of ftsconfiguration.moduleFtsFields; let i = index; trackBy: trackByFn" (click)="handleSelection(field.id)" [class.slds-theme--shade]="isSelected(field.id)" cdkDragBoundary="#administration-fts-manager-field-add-drop-table" class="slds-border--bottom slds-drag--preview"><td class="slds-p-around--none"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td><div class="slds-truncate">{{field.path}}</div></td><td data-label="Account Name"><div class="slds-truncate">{{field.fieldname}}</div></td><td data-label="Account Name"><div class="slds-truncate"><system-label [label]="field.name"></system-label></div></td><td class="slds-cell-shrink"><button class="slds-button slds-button--icon" (click)="deleteField(i)"><system-button-icon icon="close"></system-button-icon></button></td></tr></tbody></table></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration,services_1.backend,services_1.modal,services_1.modelutilities])],e)}();exports.AdministrationFTSManagerFieldsList=AdministrationFTSManagerFieldsList;var AdministrationFTSManagerDetails=function(){function e(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s}return e=__decorate([core_1.Component({selector:"administration-ftsmanager-details",template:'<div class="slds-p-top--x-small slds-p-horizontal--x-small" system-to-bottom><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_INDEX_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_INDEX_PRIORITY"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="ftsconfiguration.moduleFtsSettings.index_priority"></div></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_FTS_MULTIMATCH_TYPE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="ftsconfiguration.moduleFtsSettings.multimatch_type"><option>default</option><option value="best_fields">Best Fields</option><option value="most_fields">Most Fields</option><option value="phrase">Phrase</option><option value="phrase_prefix">Phrase Prefix</option><option value="cross_fields">Cross Fields</option></select></div></div></div><div class="slds-form-element slds-p-vertical--x-small"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.waitfor"><system-label label="LBL_SYNCRONOUS"></system-label></system-checkbox></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_SEARCH_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_OPERATOR"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="ftsconfiguration.moduleFtsSettings.operator"><option value="and"><system-label label="LBL_AND"></system-label></option><option value="or"><system-label label="LBL_OR"></system-label></option></select></div></div></div><div class="slds-grid slds-p-vertical--x-small"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.globalsearch"><system-label label="LBL_GLOBAL_SEARCH"></system-label></system-checkbox><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.emailsearch"><system-label label="LBL_EMAIL_SEARCH"></system-label></system-checkbox><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.phonesearch"><system-label label="LBL_PHONE_SEARCH"></system-label></system-checkbox></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_GEO_SEARCH_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.geosearch"><system-label label="LBL_GEO_SEARCH"></system-label></system-checkbox></div><div class="slds-form-element__control slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_LATITUDE"></system-label></label><system-input-module-field [disabled]="!ftsconfiguration.moduleFtsSettings.geosearch" [(ngModel)]="ftsconfiguration.moduleFtsSettings.geolat" [module]="ftsconfiguration.module"></system-input-module-field></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_LONGITUDE"></system-label></label><system-input-module-field [disabled]="!ftsconfiguration.moduleFtsSettings.geosearch" [(ngModel)]="ftsconfiguration.moduleFtsSettings.geolng" [module]="ftsconfiguration.module"></system-input-module-field></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_FTS_ACTIVITY_PARAMS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.activitiessearch"><system-label label="LBL_FTS_IN_ACTIVITIES"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.activitiesfilter"></system-input-module-filter></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.historysearch"><system-label label="LBL_FTS_IN_HISTORY"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.historyfilter"></system-input-module-filter></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.calendarsearch"><system-label label="LBL_FTS_IN_CALENDAR"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.calendarfilter"></system-input-module-filter></div></div></div></fieldset></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration])],e)}();exports.AdministrationFTSManagerDetails=AdministrationFTSManagerDetails;var AdministrationFTSManagerModuleAdd=function(){function AdministrationFTSManagerModuleAdd(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.modules=[],this.module="",this.module$=new core_1.EventEmitter}return AdministrationFTSManagerModuleAdd.prototype.ngOnInit=function(){for(var e=this.ftsconfiguration.modules,t=0,s=this.metadata.getModules();t<s.length;t++){var i=s[t];-1==e.indexOf(i)&&this.modules.push(i)}this.modules.sort()},AdministrationFTSManagerModuleAdd.prototype.add=function(){this.module$.emit(this.module),this.self.destroy()},AdministrationFTSManagerModuleAdd.prototype.close=function(){this.module$.emit(!1),this.self.destroy()},AdministrationFTSManagerModuleAdd=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_ADD_MODULE"></system-label></system-modal-header><system-modal-content><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_MODULE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="module"><option *ngFor="let newmodule of modules" [value]="newmodule">{{newmodule}} ({{language.getModuleName(newmodule)}})</option></select></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="add()"><system-label label="LBL_ADD"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration])],AdministrationFTSManagerModuleAdd)}();exports.AdministrationFTSManagerModuleAdd=AdministrationFTSManagerModuleAdd;var AdministrationFTSManagerFieldsAdd=function(){function AdministrationFTSManagerFieldsAdd(e,t,s,i){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.links=[],this.self={},this.fields=[],this.nodefields=[],this.path=[],this.nodePath=""}return Object.defineProperty(AdministrationFTSManagerFieldsAdd.prototype,"filteredNodeFields",{get:function(){var t=this;return this.filterKey?this.nodefields.filter(function(e){return e.name.toLowerCase().includes(t.filterKey.toLowerCase())||e.label&&e.label.toLowerCase().includes(t.filterKey.toLowerCase())}):this.nodefields},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationFTSManagerFieldsAdd.prototype,"fieldsDropList",{get:function(){return this.ftsconfiguration.fieldsDropList||""},enumerable:!0,configurable:!0}),AdministrationFTSManagerFieldsAdd.prototype.close=function(){this.self.destroy()},AdministrationFTSManagerFieldsAdd.prototype.itemSelected=function(e){var t=this;window.setTimeout(function(){return t.nodePath=e.path}),this.getModuleFields(e.module)},AdministrationFTSManagerFieldsAdd.prototype.getModuleFields=function(e){var t=this;this.nodefields=[],this.backend.getRequest("fts/fields/"+e).subscribe(function(e){t.nodefields=e})},AdministrationFTSManagerFieldsAdd.prototype.dropExited=function(t){var e=document.createElement("tr"),s=document.createElement("td");s.colSpan=10,s.innerHTML="&nbsp;",s.style.background="#fff",e.appendChild(s),this.dragPlaceHolderNode=e;var i=t.container.data.findIndex(function(e){return e.id==t.item.data.id});-1<i&&t.container.element.nativeElement.insertBefore(e,t.container.element.nativeElement.children[i])},AdministrationFTSManagerFieldsAdd.prototype.dropEntered=function(e){this.removePlaceHolderElement(e.container.element.nativeElement)},AdministrationFTSManagerFieldsAdd.prototype.removePlaceHolderElement=function(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)},AdministrationFTSManagerFieldsAdd.prototype.trackByFn=function(e,t){return t.id},AdministrationFTSManagerFieldsAdd=__decorate([core_1.Component({selector:"administration-ftsmanager-fields-add",template:'<system-modal size="large"><system-modal-header (close)="close()">Add Field</system-modal-header><system-modal-content margin="none" [grow]="true"><div class="slds-grid administration-fts-manager-field-add-modal" style="height: 100%"><div class="slds-size--1-of-3 slds-grid--vertical" style="height: 100%;"><div class="slds-scrollable--y slds-border--bottom" style="height: 50%;"><system-module-tree [module]="ftsconfiguration.module" (itemSelected)="itemSelected($event)"></system-module-tree></div><div class="slds-scrollable" style="height: 50%;"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left" role="none"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--left"></system-utility-icon><input class="slds-input slds-combobox__input" type="search" [placeholder]="language.getLabel(\'LBL_SEARCH\')" [(ngModel)]="filterKey"></div><table class="slds-table slds-table_cell-buffer slds-table_bordered"><thead><tr class="slds-line-height_reset"><th class="slds-cell-shrink"></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th></tr></thead><tbody cdkDropList #dragList="cdkDropList" (cdkDropListExited)="dropExited($event)" (cdkDropListEntered)="dropEntered($event)" cdkDropListSortingDisabled [cdkDropListData]="nodefields" [cdkDropListConnectedTo]="[fieldsDropList]"><tr cdkDrag [cdkDragData]="nodefield" *ngFor="let nodefield of filteredNodeFields; trackBy: trackByFn" cdkDragBoundary=".administration-fts-manager-field-add-modal" class="slds-hint-parent slds-drag--preview"><td class="slds-p-around--none slds-cell-shrink"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td data-label="Account Name"><div class="slds-truncate">{{nodefield.name}}</div></td><td><div class="slds-truncate"><system-label [label]="nodefield.label"></system-label></div></td></tr></tbody></table></div></div><div class="slds-size--2-of-3" style="height: 100%"><administration-ftsmanager-fields-list style="display: block; height: 100%" class="slds-scrollable--y" [dragPlaceHolderNode]="dragPlaceHolderNode" [nodePath]="nodePath" [dragList]="dragList"></administration-ftsmanager-fields-list></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--brand" (click)="close()"><system-label label="LBL_OK"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration,services_1.backend])],AdministrationFTSManagerFieldsAdd)}();exports.AdministrationFTSManagerFieldsAdd=AdministrationFTSManagerFieldsAdd;var AdministrationFTSStats=function(){function AdministrationFTSStats(e,t,s){var i=this;this.metadata=e,this.language=t,this.backend=s,this.stats={},this.indices=[],this.backend.getRequest("fts/stats").subscribe(function(e){for(var t in(i.stats=e).indices)i.indices.push({name:t,size:e.indices[t].total.store.size_in_bytes,documents:e.indices[t].total.docs.count});i.indices.sort(function(e,t){return e.name>t.name?1:-1})})}return AdministrationFTSStats=__decorate([core_1.Component({template:'<h2 class="slds-text-heading_medium slds-p-around--small">FTS Stats</h2><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate">Name</div></th><th scope="col"><div class="slds-truncate">Size</div></th><th scope="col"><div class="slds-truncate">Documents</div></th></tr></thead><tbody><tr *ngFor="let index of indices"><td><div class="slds-truncate">{{index.name}}</div></td><td><div class="slds-truncate">{{index.size}}</div></td><td><div class="slds-truncate">{{index.documents}}</div></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend])],AdministrationFTSStats)}();exports.AdministrationFTSStats=AdministrationFTSStats;var AdministrationFtsManagerIndexModal=function(){function AdministrationFtsManagerIndexModal(e){this.language=e,this.settings={},this.self={},this.responseSubject=new rxjs_1.Subject,this.response=this.responseSubject.asObservable(),this.settings.bulkAmount=-1}return AdministrationFtsManagerIndexModal.prototype.cancel=function(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()},AdministrationFtsManagerIndexModal.prototype.start=function(){this.responseSubject.next(this.settings),this.responseSubject.complete(),this.self.destroy()},AdministrationFtsManagerIndexModal=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="cancel()"><system-label label="LBL_INDEX"></system-label></system-modal-header><system-modal-content><div class="slds-p-bottom--xx-small"><system-label label="LBL_RESET_INDEX_DATE" length="long"></system-label></div><div class="slds-m-bottom--medium"><system-checkbox [(ngModel)]="settings.resetIndexDates"><system-label label="LBL_RESET_INDEX_DATE"></system-label></system-checkbox></div><div class="slds-p-bottom--xx-small"><system-label label="LBL_BULK_INDEX"></system-label></div><div><system-input-radio style="display: block" name="ftsmanagerbulk" value="0" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = 0"><system-label label="LBL_NONE"></system-label></system-input-radio><system-input-radio style="display: block" name="ftsmanagerbulk" value="100" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = 100">100 <system-label label="LBL_RECORDS"></system-label></system-input-radio><system-input-radio style="display: block" name="ftsmanagerbulk" value="1000" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = 1000">1000 <system-label label="LBL_RECORDS"></system-label></system-input-radio><system-input-radio style="display: block" name="ftsmanagerbulk" value="-1" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = -1"><system-label label="LBL_SYSTEM_DEFAULT"></system-label></system-input-radio></div></system-modal-content><system-modal-footer><button type="button" class="slds-button slds-button--neutral" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button> <button type="button" class="slds-button slds-button--brand" (click)="start()"><system-label label="LBL_START"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language])],AdministrationFtsManagerIndexModal)}();exports.AdministrationFtsManagerIndexModal=AdministrationFtsManagerIndexModal;var AdministrationHomeScreen=function(){function AdministrationHomeScreen(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}return AdministrationHomeScreen.prototype.trackbyfn=function(e,t){return t.id},AdministrationHomeScreen=__decorate([core_1.Component({template:'<administration-card *ngFor="let adminNavigationBlock of administration.navigationGroups; trackBy: trackbyfn" [adminNavigationBlock]="adminNavigationBlock"></administration-card>'}),__metadata("design:paramtypes",[router_1.Router,services_1.metadata,services_1.language,administration])],AdministrationHomeScreen)}();exports.AdministrationHomeScreen=AdministrationHomeScreen;var AdministrationHomeScreenCard=function(){function e(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}return e.prototype.trackbyfn=function(e,t){return t.id},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"adminNavigationBlock",void 0),e=__decorate([core_1.Component({selector:"administration-card",template:'<div class="slds-p-around--medium"><article class="slds-card slds-p-around--small"><div class="slds-card__header slds-grid"><header class="slds-media slds-media_center slds-has-flexi-truncate"><div class="slds-media__body"><h2 class="slds-card__header-title slds-text-heading_medium"><p class="slds-card__header-link slds-truncate"><system-label [label]="adminNavigationBlock.label"></system-label></p><p class="slds-text-body_small slds-p-top_small"><system-label [label]="adminNavigationBlock.label" length="long"></system-label></p></h2></div></header></div><div class="slds-card__body slds-card__body_inner"><ul class="slds-grid slds-wrap slds-grid_pull-padded"><li class="slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-3" administration-card-item *ngFor="let item of adminNavigationBlock.groupcomponents; trackBy: trackbyfn" [adminNavigationItem]="item"></li></ul></div></article></div>'}),__metadata("design:paramtypes",[router_1.Router,services_1.metadata,services_1.language,administration])],e)}();exports.AdministrationHomeScreenCard=AdministrationHomeScreenCard;var AdministrationHomeScreenCardItem=function(){function e(e,t,s,i,a){this.router=e,this.metadata=t,this.language=s,this.administration=i,this.navigationtab=a,this.adminNavigationItem={},this.adminNavigationBlock=""}return e.prototype.openContent=function(){var e=this.administration.getItemLabel(this.adminNavigationItem.id);this.navigationtab.setTabInfo({displayname:this.language.getLabel(e||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(this.adminNavigationItem.id)},Object.defineProperty(e.prototype,"icon",{get:function(){return this.adminNavigationItem.icon?this.adminNavigationItem.icon:"empty"},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"adminNavigationItem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"adminNavigationBlock",void 0),e=__decorate([core_1.Component({selector:"[administration-card-item]",template:'<a class="slds-text-link_reset" href="javascript:void(0);" (click)="openContent()"><article class="slds-tile slds-media slds-card__tile slds-hint-parent"><div class="slds-media__figure"><system-icon [icon]="icon" size="large"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread"><h3 class="slds-tile__title slds-text-heading_small"><p>{{language.getLabel(adminNavigationItem.admin_label)}}</p><p class="slds-text-body_small">{{language.getLabel(adminNavigationItem.admin_label, \'\', \'long\')}}</p></h3></div></div></article></a>'}),__metadata("design:paramtypes",[router_1.Router,services_1.metadata,services_1.language,administration,services_1.navigationtab])],e)}();exports.AdministrationHomeScreenCardItem=AdministrationHomeScreenCardItem;var AdministrationSystemStats=function(){function AdministrationSystemStats(e,t,s,i){this.metadata=e,this.language=t,this.backend=s,this.helper=i,this.loaded=!1,this.stats={},this.totaldbrecords=0,this.totaldbsize=0,this.loadStats()}return AdministrationSystemStats.prototype.loadStats=function(){var t=this;this.loaded=!1,this.backend.getRequest("admin/systemstats").subscribe(function(e){t.stats=e,t.calculateTotalsDB(),t.loaded=!0})},AdministrationSystemStats.prototype.refresh=function(){this.loadStats()},Object.defineProperty(AdministrationSystemStats.prototype,"totalelasticrecords",{get:function(){try{return this.stats.elastic._all.total.docs.count}catch(e){return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"totalelasticsize",{get:function(){try{return this.stats.elastic._all.total.store.size_in_bytes}catch(e){return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"uploadcount",{get:function(){try{return this.stats.uploadfiles.count}catch(e){return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"uploadsize",{get:function(){try{return this.stats.uploadfiles.size}catch(e){return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"totalsize",{get:function(){return this.totaldbsize+this.totalelasticsize+this.uploadsize},enumerable:!0,configurable:!0}),AdministrationSystemStats.prototype.sortby=function(s,i){void 0===i&&(i=!0),this.stats.database.sort(function(e,t){return e[s]>t[s]?i?-1:1:i?1:-1})},AdministrationSystemStats.prototype.calculateTotalsDB=function(){this.totaldbrecords=0;for(var e=this.totaldbsize=0,t=this.stats.database;e<t.length;e++){var s=t[e];this.totaldbrecords+=parseInt(s.records,10),this.totaldbsize+=parseInt(s.size,10)}},AdministrationSystemStats.prototype.humanReadableSize=function(e){return this.helper.humanFileSize(e)},AdministrationSystemStats.prototype.ftsDocumentCount=function(e){try{return this.stats.elastic.indices[this.stats.elastic._prefix+e].total.docs.count}catch(e){return""}},AdministrationSystemStats.prototype.ftsIndexSize=function(e){try{return this.humanReadableSize(this.stats.elastic.indices[this.stats.elastic._prefix+e].total.store.size_in_bytes)}catch(e){return""}},AdministrationSystemStats=__decorate([core_1.Component({template:'<ng-container *ngIf="loaded; else loading"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-p-around--small"><h2 class="slds-text-heading_medium">System and Storage Statistics Summary</h2><button class="slds-button slds-button_icon slds-button_icon-border-filled" (click)="refresh()"><system-button-icon icon="refresh"></system-button-icon></button></div><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-bottom--medium"><thead><tr class="slds-text-title_caps"><th scope="col">Object</th><th scope="col">Records</th><th scope="col">Size</th></tr></thead><tbody><tr><td><div class="slds-truncate">Database</div></td><td><div class="slds-truncate">{{totaldbrecords}}</div></td><td><div class="slds-truncate">{{humanReadableSize(totaldbsize)}}</div></td></tr><tr><td><div class="slds-truncate">Elasticsearch</div></td><td><div class="slds-truncate">{{totalelasticrecords}}</div></td><td><div class="slds-truncate">{{humanReadableSize(totalelasticsize)}}</div></td></tr><tr><td><div class="slds-truncate">Uploadfiles</div></td><td><div class="slds-truncate">{{uploadcount}}</div></td><td><div class="slds-truncate">{{humanReadableSize(uploadsize)}}</div></td></tr></tbody><tfoot><tr class="slds-theme--shade slds-text-title_caps"><th><div class="slds-truncate">total</div></th><th><div class="slds-truncate"></div></th><th><div class="slds-truncate">{{humanReadableSize(totalsize)}}</div></th></tr></tfoot></table><h2 class="slds-p-around--small">System and Storage Statistics Details</h2><div class="slds-border--top" system-to-bottom><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table--header-fixed"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate" (click)="sortby(\'name\', false)">Table</div></th><th scope="col"><div class="slds-truncate" (click)="sortby(\'records\')">Records</div></th><th scope="col"><div class="slds-truncate" (click)="sortby(\'size\')">Size</div></th><th scope="col"><div class="slds-truncate">indexed Records</div></th><th scope="col"><div class="slds-truncate">Index Size</div></th></tr></thead><tbody><tr *ngFor="let table of stats.database"><td><div class="slds-truncate">{{table.name}}</div></td><td><div class="slds-truncate">{{table.records}}</div></td><td><div class="slds-truncate">{{humanReadableSize(table.size)}}</div></td><td><div class="slds-truncate">{{ftsDocumentCount(table.name)}}</div></td><td><div class="slds-truncate">{{ftsIndexSize(table.name)}}</div></td></tr></tbody></table></div></ng-container><ng-template #loading><div class="slds-align--absolute-center slds-height_full slds-size--1-of-1"><system-spinner></system-spinner></div></ng-template>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.helper])],AdministrationSystemStats)}();exports.AdministrationSystemStats=AdministrationSystemStats;var AdministrationSysTrashcanManager=function(){function AdministrationSysTrashcanManager(e,t,s,i,a,l){this.metadata=e,this.modal=t,this.backend=s,this.language=i,this.userpreferences=a,this.footer=l,this.records=[],this.loaddate={},this.loading=!0}return AdministrationSysTrashcanManager.prototype.ngOnInit=function(){this.getEntries()},AdministrationSysTrashcanManager.prototype.getEntries=function(){var t=this;this.backend.getRequest("systrashcan").subscribe(function(e){t.records=e,t.loaddate=new moment,t.loading=!1})},AdministrationSysTrashcanManager.prototype.reload=function(){this.loading=!0,this.records=[],this.getEntries()},AdministrationSysTrashcanManager.prototype.getUserDate=function(e){return this.userpreferences.formatDateTime(e)},AdministrationSysTrashcanManager.prototype.recoverRecord=function(s){var i=this;this.modal.openModal("AdministrationSysTrashcanRecover").subscribe(function(e){e.instance.record=s,e.instance.recovered.subscribe(function(e){e&&i.records.some(function(e,t){if(e.id==s.id)return i.records.splice(t,1),!0})})})},AdministrationSysTrashcanManager.prototype.getModule=function(e){return this.metadata.getModuleFromSingular(e)},Object.defineProperty(AdministrationSysTrashcanManager.prototype,"loadDate",{get:function(){return this.loaddate?this.getUserDate(this.loaddate):"---"},enumerable:!0,configurable:!0}),AdministrationSysTrashcanManager=__decorate([core_1.Component({selector:"administration-systrashcan-manager",template:'<div class="slds-page-header"><div class="slds-media"><div class="slds-p-horizontal--x-small"><system-action-icon icon="recall"></system-action-icon></div><div class="slds-media__body"><h1 class="slds-page-header__title slds-truncate slds-align-middle">Record Recovery</h1><div class="slds-text-body_small slds-line-height_reset slds-p-vertical--xx-small" (click)="reload()">{{loadDate}}</div></div></div></div><div system-to-bottom><table class="slds-table slds-table_bordered slds-table--header-fixed slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" colspan="2"><div class="slds-truncate"><system-label label="LBL_OBJECT"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DATE_DELETED"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DELETED_BY"></system-label></div></th><th scope="col" class="slds-cell-shrink"></th></tr></thead><tbody><tr *ngFor="let record of records"><td role="gridcell" class="slds-cell-shrink"><system-icon [module]="getModule(record.recordmodule)" size="small"></system-icon></td><td scope="row"><div class="slds-truncate">{{record.recordmodule}}</div></td><td><div class="slds-truncate">{{record.recordname}}</div></td><td><div class="slds-truncate">{{getUserDate(record.date_deleted)}}</div></td><td><div class="slds-truncate">{{record.user_name}}</div></td><td role="gridcell"><button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small" (click)="recoverRecord(record)"><system-button-icon [icon]="\'undelete\'"></system-button-icon></button></td></tr></tbody><tbody system-table-stencils [columns]="5" [select]="false" [tools]="true" [rows]="5" *ngIf="loading"></tbody></table><div *ngIf="!loading && records.length == 0" class="slds-p-around--medium slds-align--absolute-center"><h2 class="slds-text-heading--small"><system-label label="LBL_NO_RECORDS_FOUND"></system-label></h2></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.modal,services_1.backend,services_1.language,services_1.userpreferences,services_1.footer])],AdministrationSysTrashcanManager)}();exports.AdministrationSysTrashcanManager=AdministrationSysTrashcanManager;var AdministrationSysTrashcanRecover=function(){function AdministrationSysTrashcanRecover(e,t,s,i){this.metadata=e,this.backend=t,this.language=s,this.toast=i,this.record={},this.self={},this.relatedRecords=[],this.loading=!0,this.recoverrelated=!1,this.recovering=!1,this.recovered=new core_1.EventEmitter}return AdministrationSysTrashcanRecover.prototype.ngOnInit=function(){var t=this;this.backend.getRequest("systrashcan/related/"+this.record.transactionid+"/"+this.record.recordid).subscribe(function(e){t.relatedRecords=e,0<t.relatedRecords.length&&(t.recoverrelated=!0),t.loading=!1},function(e){t.loading=!1})},AdministrationSysTrashcanRecover.prototype.close=function(){this.recovered.emit(!1),this.self.destroy()},AdministrationSysTrashcanRecover.prototype.getModule=function(e){return this.metadata.getModuleFromSingular(e)},Object.defineProperty(AdministrationSysTrashcanRecover.prototype,"recorverDisabled",{get:function(){return 0==this.relatedRecords.length},enumerable:!0,configurable:!0}),AdministrationSysTrashcanRecover.prototype.doRecover=function(){var t=this;this.recovering=!0,this.backend.postRequest("systrashcan/recover/"+this.record.id,{recoverrelated:this.recoverrelated}).subscribe(function(e){t.toast.sendToast("record "+t.record.recordname+" recovered"),t.recovered.emit(!0),t.self.destroy()})},__decorate([core_1.Input(),__metadata("design:type",Object)],AdministrationSysTrashcanRecover.prototype,"record",void 0),AdministrationSysTrashcanRecover=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()">Recover {{record.recordmodule}} {{record.recordname}}</system-modal-header><system-modal-content margin="none"><table *ngIf="relatedRecords.length > 0; else norelatedrecords" class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" colspan="2"><div class="slds-truncate">Object</div></th><th scope="col"><div class="slds-truncate">Name</div></th><th scope="col"><div class="slds-truncate">link</div></th></tr></thead><tbody><tr *ngFor="let relatedRecord of relatedRecords"><td role="gridcell" class="slds-cell-shrink"><system-icon [module]="getModule(relatedRecord.linkmodule)" size="small"></system-icon></td><td scope="row"><div class="slds-truncate">{{relatedRecord.linkmodule}}</div></td><td><div class="slds-truncate">{{relatedRecord.recordname}}</div></td><td><div class="slds-truncate">{{relatedRecord.linkname}}</div></td></tr></tbody></table><ng-template #norelatedrecords><div style="height: 100%;" class="slds-p-around--medium slds-align--absolute-center"><h2 class="slds-text-heading--small">no related records found</h2></div></ng-template></system-modal-content><system-modal-footer><div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread"><div><div [ngClass]="{\'slds-hide\': recorverDisabled}" class="slds-form-element__control"><span class="slds-checkbox"><input type="checkbox" [(ngModel)]="recoverrelated" id="recoverrelated"> <label class="slds-checkbox__label" for="recoverrelated"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">recover Related</span></label></span></div></div><div><button class="slds-button slds-button--neutral" (click)="close()">Cancel</button> <button class="slds-button slds-button--brand" [disabled]="loading" (click)="doRecover()">Recover</button></div></div></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.backend,services_1.language,services_1.toast])],AdministrationSysTrashcanRecover)}();exports.AdministrationSysTrashcanRecover=AdministrationSysTrashcanRecover;var AdministrationDictRepair=function(){function AdministrationDictRepair(e,t,s){this.backend=e,this.toast=t,this.language=s,this.loading=!1,this.sqlresult="",this.dbErrors=[]}return AdministrationDictRepair.prototype.doRepair=function(){var t=this;this.loading=!0,this.backend.postRequest("dictionary/repair").subscribe(function(e){e.response?e.synced?t.toast.sendToast(t.language.getLabel("LBL_REPAIR_DATABASE_ALREADY_SYNCED"),"success"):(t.sqlresult=e.sql,t.toast.sendToast(t.language.getLabel("LBL_REPAIR_DATABASE_SYNCED"),"success")):t.dbErrors=e.errors,t.loading=!1})},AdministrationDictRepair=__decorate([core_1.Component({selector:"administration-dict-repair",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium"><system-label label="LBL_REPAIR_DICTIONARY"></system-label></h2></div><div *ngIf="!loading" class="slds-p-around--small"><div class="slds-text-align_center slds-p-vertical--x-small"><button class="slds-button slds-button--brand" (click)="doRepair()"><system-label label="LBL_EXECUTE"></system-label></button></div><div *ngIf="sqlresult !=\'\'"><div class="slds-form-element"><system-label label="LBL_EXECUTED_SQL"></system-label><div class="slds-form-element__control"><textarea class="slds-textarea" style="min-height: 400px;" [ngModel]="sqlresult"></textarea></div></div></div><div *ngIf="dbErrors.length > 0" class="slds-form-element"><system-label label="LBL_LAST_DB_ERROR"></system-label><div class="slds-form-element__control"><textarea *ngFor="let error of dbErrors" disabled class="slds-textarea" style="min-height: 400px;" [value]="error"></textarea></div></div></div><div *ngIf="loading" class="slds-p-around--medium"><system-spinner></system-spinner></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language])],AdministrationDictRepair)}();exports.AdministrationDictRepair=AdministrationDictRepair;var AdministrationConfigEditor=function(){function AdministrationConfigEditor(e,t,s,i){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.componentconfig={},this.configvalues={},this.loading=!0}return AdministrationConfigEditor.prototype.ngOnInit=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){s.backend.getRequest("configurator/editor/"+s.componentconfig.category).subscribe(function(e){s.configvalues=e,s.loading=!1,t.instance.self.destroy()})})},Object.defineProperty(AdministrationConfigEditor.prototype,"items",{get:function(){for(var e=[],t=0,s=this.componentconfig.items;t<s.length;t++){var i=s[t];!0!==i.hidden&&e.push(i)}return e},enumerable:!0,configurable:!0}),AdministrationConfigEditor.prototype.save=function(){var s=this;this.loading=!0,this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_SAVING_DATA",s.backend.postRequest("configurator/editor/"+s.componentconfig.category,[],s.configvalues).subscribe(function(e){s.loading=!1,t.instance.self.destroy()})})},AdministrationConfigEditor=__decorate([core_1.Component({selector:"administration-configeditor",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium">editor</h2><button class="slds-button slds-button--neutral" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col">name</th><th scope="col">value</th></tr></thead><tbody><tr style="vertical-align: middle" class="slds-align-top" *ngFor="let item of items"><td>{{item.name}}</td><td><div class="slds-form-element__control"><input type="text" class="slds-input" [disabled]="loading" [(ngModel)]="configvalues[item.name]"></div></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.modal])],AdministrationConfigEditor)}();exports.AdministrationConfigEditor=AdministrationConfigEditor;var AdministrationSchedulerJobsEnum=function(){function AdministrationSchedulerJobsEnum(e,t,s,i,a,l){var n=this;this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=a,this.backend=l,this.jobsList=[],this.backend.getRequest("module/Schedulers/jobslist").subscribe(function(e){for(var t in e)n.jobsList.push({key:t,name:e[t]});n.language.sortObjects(n.jobsList,"name")})}return AdministrationSchedulerJobsEnum.prototype.ngOnInit=function(){var t=this;this.model.data$.subscribe(function(e){return t.splitJob()}),this.model.isLoading||this.splitJob()},AdministrationSchedulerJobsEnum.prototype.splitJob=function(){var e=this.model.getField("job");e&&0===e.indexOf("url::",0)?(this._job="url::",this._url=e.slice(5)):(this._job=e,this._url="")},AdministrationSchedulerJobsEnum.prototype.trackByFn=function(e,t){return e},Object.defineProperty(AdministrationSchedulerJobsEnum.prototype,"job",{get:function(){return this._job},set:function(e){this.model.setField("job",e+("url::"===e?this._url:""))},enumerable:!0,configurable:!0}),Object.defineProperty(AdministrationSchedulerJobsEnum.prototype,"url",{get:function(){return this._url},set:function(e){"url::"===this._job&&this.model.setField("job","url::"+e)},enumerable:!0,configurable:!0}),AdministrationSchedulerJobsEnum=__decorate([core_1.Component({selector:"administration-scheduler-jobs-enum",template:'<system-section [titlelabel]="language.getLabel(\'LBL_JOB_TASK\')"><div *ngIf="!view.isEditMode()" class="slds-p-around--xx-small"><system-stencil *ngIf="model.isLoading"></system-stencil><div *ngIf="!model.isLoading" class="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"><div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread" style="min-height:19px;"><div class="slds-truncate" style="width:100%">{{job}}<ng-container *ngIf="job===\'url::\'">{{url}}</ng-container></div><button style="float: right" class="slds-button slds-button--icon slds-m-left--xx-small" (click)="view.setEditMode()"><system-button-icon [icon]="\'edit\'"></system-button-icon></button></div></div></div><div *ngIf="view.isEditMode()"><div class="slds-grid slds-grid--align-spread slds-p-around--xx-small"><div class="slds-form-element slds-p-horizontal--xx-small slds-size--1-of-2"><label class="slds-form-element__label"><abbr class="slds-required ng-star-inserted">*</abbr> <system-label label="LBL_JOB_TASK"></system-label></label><div class="slds-form-element__control slds-m-vertical--xx-small"><div class="slds-select_container"><select id="moduleselect1" class="slds-select" [(ngModel)]="job"><option *ngIf="!job"><system-label label="LBL_SELECT"></system-label> &hellip;</option><option *ngFor="let job of jobsList; trackBy: trackByFn" [value]="job.key">{{job.name}}</option></select></div></div></div><div class="slds-form-element slds-p-horizontal--xx-small slds-size--1-of-2"><label class="slds-form-element__label" for="text-input-id-1"><abbr *ngIf="job===\'url::\'" class="slds-required ng-star-inserted">*</abbr> <system-label label="LBL_URL"></system-label></label><div class="slds-form-element__control slds-m-vertical--xx-small"><input type="text" id="text-input-id-1" class="slds-input" [(ngModel)]="url" [disabled]="job!==\'url::\'"></div></div></div></div></system-section>'}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.language,services_1.metadata,router_1.Router,services_1.backend])],AdministrationSchedulerJobsEnum)}();exports.AdministrationSchedulerJobsEnum=AdministrationSchedulerJobsEnum;var AdministrationSchedulerJobLog=function(){function AdministrationSchedulerJobLog(e,t,s,i,a,l,n){var o=this;this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.elementRef=a,this.userpreferences=l,this.backend=n,this.schedulerLogs=[],this.isLoading=!1,this.isReLoading=!1,this.subscription=new rxjs_1.Subscription,this.subscription=this.broadcast.message$.subscribe(function(e){"scheduler.run"==e.messagetype&&o.reloadData()})}return AdministrationSchedulerJobLog.prototype.ngOnInit=function(){this.getData()},AdministrationSchedulerJobLog.prototype.getData=function(){var t=this;this.totalLimit=10,this.isLoading=!0,this.backend.getRequest("module/Schedulers/"+this.model.id+"/related/schedulers_times",{sort:{sortfield:"execute_time",sortdirection:"DESC"},offset:0,limit:10,getcount:!0}).subscribe(function(e){t.schedulerLogs=_.values(e.list),t.sortList(),t.totalLines=e.count,t.isLoading=!1},function(e){return t.isLoading=!1})},AdministrationSchedulerJobLog.prototype.getMoreData=function(){var t=this,e={sort:{sortfield:"execute_time",sortdirection:"DESC"},offset:this.schedulerLogs.length,limit:10,getcount:!0};this.totalLimit+=10,this.isLoading=!0,this.backend.getRequest("module/Schedulers/"+this.model.id+"/related/schedulers_times",e).subscribe(function(e){t.schedulerLogs=__spreadArrays(t.schedulerLogs,_.values(e.list)),t.sortList(),t.totalLines=e.count,t.isLoading=!1},function(e){return t.isLoading=!1})},AdministrationSchedulerJobLog.prototype.reloadData=function(){var t=this,e={sort:{sortfield:"execute_time",sortdirection:"DESC"},offset:0,limit:this.totalLimit,getcount:!0};this.isLoading=this.isReLoading=!0,this.backend.getRequest("module/Schedulers/"+this.model.id+"/related/schedulers_times",e).subscribe(function(e){t.schedulerLogs=_.values(e.list),t.sortList(),t.totalLines=e.count,t.isLoading=t.isReLoading=!1},function(e){return t.isLoading=t.isReLoading=!1})},AdministrationSchedulerJobLog.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},AdministrationSchedulerJobLog.prototype.getResolutionClass=function(e){switch(e){case"failure":return"slds-text-color_error";case"success":return"slds-text-color_success";default:return"slds-text-color--default"}},AdministrationSchedulerJobLog.prototype.displayDateValue=function(e){return e?((e=moment(e).tz(this.userpreferences.toUse.timezone)).add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())):""},AdministrationSchedulerJobLog.prototype.trackByFn=function(e,t){return t.id},AdministrationSchedulerJobLog.prototype.sortList=function(){this.schedulerLogs.sort(function(e,t){return e.execute_time<t.execute_time?1:e.execute_time>t.execute_time?-1:0})},AdministrationSchedulerJobLog=__decorate([core_1.Component({selector:"administration-scheduler-jobs-enum",template:'<div *ngIf="schedulerLogs.length" class="slds-grid slds-grid_align-spread slds-m-bottom--medium"><div>{{language.ucFirst(language.getLabel(\'LBL_RECENT_ENTRIES\'))}} ({{schedulerLogs.length}} <system-label label="LBL_FROM"></system-label> {{totalLines}} <system-label label="LBL_TOTAL"></system-label>):</div><system-button-icon class="slds-p-horizontal--xxx-small" [icon]="\'refresh\'" (click)="!isLoading && reloadData()"></system-button-icon></div><table class="slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout" role="grid"><thead><tr class="slds-line-height_reset"><th scope="col"><div class="slds-truncate"><system-label label="LBL_EXECUTE_TIME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_STATUS"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_RESOLUTION"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_MESSAGE"></system-label></div></th></tr></thead><tbody><tr *ngFor="let scheduler of schedulerLogs; trackBy: trackByFn" class="slds-hint-parent" [ngStyle]="{\'opacity\':isReLoading?0.33:1}"><td scope="row"><div class="slds-truncate">{{displayDateValue(scheduler.execute_time)}}</div></td><td scope="row"><div class="slds-truncate">{{scheduler.status}}</div></td><td scope="row"><div class="slds-truncate" [ngClass]="getResolutionClass(scheduler.resolution)">{{scheduler.resolution}}</div></td><td scope="row" class="slds-grid"><div class="slds-truncate" aria-describedby="more" [title]="scheduler.message">{{scheduler.message}}&nbsp;</div></td></tr><tr *ngIf="schedulerLogs.length == 0"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table><div class="slds-grid slds-grid--align-spread slds-grid--vertical-align-center slds-m-top--medium"><div class="slds-text-align--center" style="width:100%"><system-spinner *ngIf="isLoading"></system-spinner></div><button class="slds-button slds-button_neutral" [disabled]="isLoading" (click)="getMoreData()"><system-label label="LBL_MORE"></system-label></button></div>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.broadcast,core_1.ElementRef,services_1.userpreferences,services_1.backend])],AdministrationSchedulerJobLog)}();exports.AdministrationSchedulerJobLog=AdministrationSchedulerJobLog;var AdministrationSchedulerRunButton=function(){function AdministrationSchedulerRunButton(e,t,s,i,a,l,n){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=a,this.modal=l,this.backend=n}return AdministrationSchedulerRunButton.prototype.execute=function(){var s=this;this.modal.openModal("SystemLoadingModal",!1).subscribe(function(t){s.backend.postRequest("module/Schedulers/"+s.model.id+"/runjob").subscribe(function(e){t.instance.self.destroy(),e?s.toast.sendToast(s.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")},function(e){t.instance.self.destroy(),s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")})})},AdministrationSchedulerRunButton=__decorate([core_1.Component({selector:"administration-scheduler-run-button",template:'<span><system-label label="LBL_RUN_NOW"></system-label></span>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.broadcast,services_1.toast,services_1.modal,services_1.backend])],AdministrationSchedulerRunButton)}();exports.AdministrationSchedulerRunButton=AdministrationSchedulerRunButton;var AdministrationSchedulerScheduleButton=function(){function AdministrationSchedulerScheduleButton(e,t,s,i,a,l,n){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=a,this.modal=l,this.backend=n}return AdministrationSchedulerScheduleButton.prototype.execute=function(){var s=this;this.modal.openModal("SystemLoadingModal",!1).subscribe(function(t){s.backend.postRequest("module/Schedulers/"+s.model.id+"/schedulejob").subscribe(function(e){t.instance.self.destroy(),e?s.toast.sendToast(s.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")},function(e){t.instance.self.destroy(),s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")})})},AdministrationSchedulerScheduleButton=__decorate([core_1.Component({selector:"administration-scheduler-schedule-button",template:'<span><system-label label="LBL_SCHEDULE_NOW"></system-label></span>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.broadcast,services_1.toast,services_1.modal,services_1.backend])],AdministrationSchedulerScheduleButton)}();exports.AdministrationSchedulerScheduleButton=AdministrationSchedulerScheduleButton;var AdministrationDictionaryManagerItemField=function(){function e(e){this.dictionary=e,this.field="",this.id="",this.inputvalue="",this.editMode=!1}return Object.defineProperty(e.prototype,"fieldvalue",{get:function(){return this.inputvalue},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.isEditMode=function(){return this.editMode},e.prototype.setEditMode=function(){this.editMode=!0},e.prototype.closeEdit=function(){this.editMode=!1},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnInit=function(){},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"field",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"id",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"inputvalue",void 0),e=__decorate([core_1.Component({selector:"[administration-dictionarymanager-item-field]",template:'<p *ngIf="!isEditMode()" class="slds-text-body--regular slds-truncate spice-fieldbody"><span>{{fieldvalue}}</span> <button style="float: right" class="slds-button slds-button--icon" (click)="setEditMode()"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#edit"></use></svg></button></p><div *ngIf="isEditMode()" class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="fieldvalue"></div>'}),__metadata("design:paramtypes",[dictionary])],e)}();exports.AdministrationDictionaryManagerItemField=AdministrationDictionaryManagerItemField;var AdministrationDictionaryManager=function(){function e(e){this.dictionary=e,this.dictionaryitem=""}return e.prototype.ngAfterViewInit=function(){this.dictionary.load(this.dictionaryitem).subscribe(function(e){})},e.prototype.isEditMode=function(){},e.prototype.closeEditMode=function(){},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"dictionaryitem",void 0),e=__decorate([core_1.Component({selector:"administration-dictionarymanager",template:'<div class="slds-page-header" role="banner"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><div class="slds-media__body"><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">Dictionary {{dictionaryitem}}</h1><p class="slds-text-title--caps slds-line-height--reset">{{dictionary.data.length}} Items</p></div></div></div></div></div><table class="slds-table slds-table--bordered slds-table--fixed-layout" role="grid"><thead><tr class="slds-text-title--caps"><th *ngFor="let field of dictionary.getFields()" class="slds-is-sortable slds-is-resizable" scope="col"><a href="javascript:void(0);" class="slds-th__action slds-text-link--reset"><span class="slds-truncate">{{field}}</span></a></th></tr></thead><tbody><tr administration-dictionarymanager-item class="slds-hint-parent" *ngFor="let item of dictionary.data" [item]="item"></tr></tbody></table><footer class="slds-utility-bar_container" role="footer" *ngIf="isEditMode()"><ul class="slds-utility-bar"><li class="slds-utility-bar__item"><button class="slds-button slds-utility-bar__action slds-button--brand">Save</button></li><li class="slds-utility-bar__item"><button class="slds-button slds-utility-bar__action slds-button--brand" (click)="closeEditMode()">Cancel</button></li></ul></footer>',providers:[dictionary]}),__metadata("design:paramtypes",[dictionary])],e)}();exports.AdministrationDictionaryManager=AdministrationDictionaryManager;var AdministrationDictionaryManagerItem=function(){function e(e){this.dictionary=e,this.item={},this.editMode=!1}return e.prototype.isEditMode=function(){return this.editMode},e.prototype.setEditMode=function(){this.editMode=!0},e.prototype.closeEdit=function(){this.editMode=!1},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnInit=function(){},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),e=__decorate([core_1.Component({selector:"[administration-dictionarymanager-item]",template:'<td scope="row" *ngFor="let field of dictionary.getFields()"><div administration-dictionarymanager-item-field [field]="field" [id]="item.id" [inputvalue]="item[field]" class="slds-truncate"></div></td>'}),__metadata("design:paramtypes",[dictionary])],e)}();exports.AdministrationDictionaryManagerItem=AdministrationDictionaryManagerItem;var AdministrationGeneralSettings=function(){function AdministrationGeneralSettings(e,t,s,i,a,l){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=a,this.currency=l,this.settings=[],this.options=[],this.currencies=[],this.loading=!0}return AdministrationGeneralSettings.prototype.ngOnInit=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){s.backend.getRequest("admin/generalsettings").subscribe(function(e){e.status?(s.settings=e.settings,s.options=e.defaults):s.toast.sendToast(s.language.getLabel("LBL_ERROR"),"error"),s.currencies=s.currency.getCurrencies(),s.loading=!1,t.instance.self.destroy()})})},AdministrationGeneralSettings.prototype.save=function(){var t=this;this.modal.openModal("SystemLoadingModal").subscribe(function(e){t.backend.postRequest("admin/writesettings",{},t.settings).subscribe(function(e){e.status?t.toast.sendToast(t.language.getLabel("LBL_SUCCESS"),"success"):t.toast.sendToast(t.language.getLabel("LBL_ERROR"),"error")}),e.instance.self.destroy()})},AdministrationGeneralSettings=__decorate([core_1.Component({selector:"administration-general-setting",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium">General Settings</h2><button class="slds-button slds-button--neutral" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><system-label label="LBL_NAME"></system-label></th><th scope="col"><system-label label="LBL_VALUE"></system-label></th></tr></thead><tbody><tr style="vertical-align: middle" class="slds-align-top" *ngFor="let setting of settings"><td>{{setting.name}}</td><td><div *ngIf="setting.name == \'system_name\'" class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="setting.value"></div><div *ngIf="setting.name == \'export_delimiter\'" class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="setting.value"><option *ngFor="let exp of options.export_delimiter | keyvalue" value="{{exp.key}}">{{exp.value}}</option></select></div></div><div *ngIf="setting.name == \'default_date_format\'" class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="setting.value"><option *ngFor="let date of options.date_formats | keyvalue" value="{{date.key}}">{{date.value}}</option></select></div></div><div *ngIf="setting.name == \'default_time_format\'" class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="setting.value"><option *ngFor="let time of options.time_formats | keyvalue" value="{{time.key}}">{{time.value}}</option></select></div></div><div *ngIf="setting.name == \'default_charset\'" class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="setting.value"><option *ngFor="let char of options.charsets | keyvalue" value="{{char.key}}">{{char.value}}</option></select></div></div></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.modal,services_1.toast,services_1.currency])],AdministrationGeneralSettings)}();exports.AdministrationGeneralSettings=AdministrationGeneralSettings;var AdministrationLanguages=function(){function e(e,t,s,i,a){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=a,this.languages=[],this.loading=!0}return e.prototype.ngOnInit=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){s.backend.getRequest("packages").subscribe(function(e){e.versions?s.languages=e.languages:s.toast.sendToast(s.language.getLabel("LBL_ERROR"),"error"),s.loading=!1,t.instance.self.destroy()})})},e=__decorate([core_1.Component({selector:"administration-languages",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium">Languages</h2></div><div class="slds-grid slds-wrap"><div *ngFor="let language of languages" class="slds-size--1-of-2 slds-p-around--xx-small"><div class="slds-card"><div class="slds-card__header slds-grid"><header class="slds-media slds-media_center slds-has-flexi-truncate"><system-icon size="small" icon="custom68" sprite="custom" class="slds-p-right--xx-small"></system-icon><div class="slds-media__body"><h2 class="slds-card__header-title"><div class="slds-card__header-link slds-truncate" [title]="language.language_name">{{language.language_name}}</div></h2></div><div class="slds-no-flex"><system-spinner size="12" *ngIf="loading"></system-spinner><div *ngIf="!loading" class="slds-grid slds-grid_vertical-align-center"></div></div></header></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.modal,services_1.toast])],e)}();exports.AdministrationLanguages=AdministrationLanguages;var AdminComponentsModule=function(){function AdminComponentsModule(e){this.vms=e,this.version="1.0",this.build_date="2020-07-17 14:16:33",e.registerModule(this)}return AdminComponentsModule=__decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,systemcomponents_1.SystemComponents,directives_1.DirectivesModule,drag_drop_1.DragDropModule],declarations:[AdministrationMain,AdministrationMenu,AdministrationMenuRouteItem,AdministrationConfigurator,AdministrationConfiguratorItem,AdministrationConfiguratorItemRole,AdministrationQuotaManager,AdministrationQuotaManagerField,AdministrationFTSStatus,AdministrationFTSManager,AdministrationFTSManagerModuleAdd,AdministrationFTSManagerFields,AdministrationFTSManagerFieldsList,AdministrationFTSManagerDetails,AdministrationFTSManagerFieldsAdd,AdministrationFTSStats,AdministrationDictionaryManager,AdministrationDictionaryManagerItem,AdministrationDictionaryManagerItemField,AdministrationSysTrashcanManager,AdministrationSysTrashcanRecover,AdministrationDictRepair,AdministrationConfigEditor,AdministrationSchedulerJobsEnum,AdministrationSchedulerJobLog,AdministrationSchedulerRunButton,AdministrationSchedulerScheduleButton,AdministrationSystemStats,AdministrationFtsManagerIndexModal,AdministrationHomeScreen,AdministrationHomeScreenCard,AdministrationHomeScreenCardItem,AdministrationGeneralSettings,AdministrationLanguages],entryComponents:[AdministrationMain,AdministrationMenu,AdministrationConfigurator,AdministrationQuotaManager,AdministrationQuotaManagerField,AdministrationFTSManager,AdministrationDictionaryManager,AdministrationDictionaryManagerItem,AdministrationDictionaryManagerItemField],exports:[]}),__metadata("design:paramtypes",[services_1.VersionManagerService])],AdminComponentsModule)}();exports.AdminComponentsModule=AdminComponentsModule;