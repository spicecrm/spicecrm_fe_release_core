/** 
 * Â© 2015 - 2021 aac services k.s. All rights reserved.
 * release: 2021.01.001
 * date: 2021-04-05 21:06:57
 * build: 2021.01.001.1617649617177
 **/
"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,e)};return function(t,e){function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),__decorate=this&&this.__decorate||function(t,e,s,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var n=t.length-1;0<=n;n--)(r=t[n])&&(a=(o<3?r(a):3<o?r(e,s,a):r(e,s))||a);return 3<o&&a&&Object.defineProperty(e,s,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<s;e++)for(var o=arguments[e],a=0,n=o.length;a<n;a++,r++)i[r]=o[a];return i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleProducts=exports.ProductUOMConversions=exports.ProductGroupManagerDetailsAttributes=exports.ProductGroupManagerDetailsAttributesAddButton=exports.ProductGroupManagerDetailsAttributesItem=exports.ProductGroupManagerDetailsAttributesValidation=exports.ProductGroupManagerDetailsAttributesValidationItem=exports.ProductGroupsLongtextCodeAssignments=exports.ProductGroupsContentCodeAssignments=exports.ProductTextGenerator=exports.ProductVariantsAttributeSS=exports.ProductVariantsAttributeF=exports.ProductVariantsAttributeN=exports.ProductVariantsAttributeDI=exports.ProductVariantsAttributeVC=exports.ProductVariantsAttributes=exports.ProductBrowserAttributeSSearch=exports.ProductBrowserAttributeFSearch=exports.ProductBrowserAttributeNSearch=exports.ProductBrowserAttributeDISearch=exports.ProductBrowserAttributeVCSearch=exports.ProductVariantsAttributesTable=exports.ProductBrowserAttributes=exports.ProductBrowserVariant=exports.ProductBrowserVariants=exports.ProductGroupManagerTree=exports.ProductBrowserTree=exports.ProductGroupManagerDetails=exports.ProductGroupManager=exports.ProductBrowser=exports.ProductManager=exports.productfinder=void 0;var common_1=require("@angular/common"),core_1=require("@angular/core"),forms_1=require("@angular/forms"),router_1=require("@angular/router"),directives_1=require("../../directives/directives"),rxjs_1=require("rxjs"),services_1=require("../../services/services"),objectfields_1=require("../../objectfields/objectfields"),globalcomponents_1=require("../../globalcomponents/globalcomponents"),objectcomponents_1=require("../../objectcomponents/objectcomponents"),systemcomponents_1=require("../../systemcomponents/systemcomponents"),productfinder=function(){function t(t,e,s){this.backend=t,this.session=e,this.modelutilities=s,this.groupAttributes=[],this.productVariants=[],this.productVariantAggregates={},this.loading=!1,this.loadingAttributes=!1,this.searchterm="",this.searchfilters={},this.searchtotal=0,this.searchfocus={type:"",object:{}}}return Object.defineProperty(t.prototype,"hasSearchFilters",{get:function(){return JSON.stringify({})!==JSON.stringify(this.searchfilters)},enumerable:!1,configurable:!0}),t.prototype.setSearchFocus=function(t){var e="Product"==(this.searchfocus=t).type?"products":"productgroups";this.getAttributes(e,t.object.id)},t.prototype.getAttributes=function(t,e){var r=this;this.loadingAttributes=!0,this.groupAttributes=[];this.backend.getRequest(t+"/"+e+"/productattributes/direct",{searchparams:!0}).subscribe(function(t){for(var e=0,s=t;e<s.length;e++){var i=s[e];r.groupAttributes.push(r.modelutilities.backendModel2spice("ProductAtrtibutes",i))}r.groupAttributes.sort(function(t,e){return t.name>e.name?1:-1}),r.getProductVariants(),r.loadingAttributes=!1})},t.prototype.getProductVariants=function(){var t,r=this;this.loading||(this.productVariants=[],this.loading=!0,t={searchterm:this.searchterm,searchfilters:JSON.stringify(this.buildSearchFilters()),start:0,size:25},this.backend.getRequest("productvariants/"+this.searchfocus.type.toLowerCase()+"/"+this.searchfocus.object.id,t).subscribe(function(t){for(var e=0,s=t.variants;e<s.length;e++){var i=s[e];r.productVariants.push(r.modelutilities.backendModel2spice("ProductVariants",i))}r.productVariantAggregates=t.aggregates,r.loading=!1,r.searchtotal=parseInt(t.total,10)}))},t.prototype.getMoreProductVariants=function(){var t,r=this;!this.loading&&this.searchtotal>this.productVariants.length&&(this.loading=!0,t={searchterm:this.searchterm,searchfilters:JSON.stringify(this.buildSearchFilters()),start:this.productVariants.length,size:25},this.backend.getRequest("productvariants/"+this.searchfocus.type.toLowerCase()+"/"+this.searchfocus.object.id,t).subscribe(function(t){for(var e=0,s=t.variants;e<s.length;e++){var i=s[e];r.productVariants.push(r.modelutilities.backendModel2spice("ProductVariants",i))}r.loading=!1,r.searchtotal=parseInt(t.total,10)}))},t.prototype.resetSearchFilters=function(){this.hasSearchFilters&&(this.searchfilters={},this.getProductVariants())},t.prototype.getAggregateCount=function(t,e){var s=this.productVariantAggregates;return s&&s[t]&&s[t][e]?s[t][e]:"-"},t.prototype.buildSearchFilters=function(){var e=this,s={};return this.groupAttributes.forEach(function(t){e.searchfilters[t.id]&&(s[t.id]={datatype:t.prat_datatype,value:e.searchfilters[t.id].value,valuefrom:e.searchfilters[t.id].valuefrom,valueto:e.searchfilters[t.id].valueto})}),s},__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.session,services_1.modelutilities])],t)}();exports.productfinder=productfinder;var ProductManager=function(){function ProductManager(t,e,s,i){this.language=t,this.model=e,this.navigationtab=s,this.router=i,this.selectedItem={},this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_PRODUCT_MANAGER"),displaymodule:"Products"})}return Object.defineProperty(ProductManager.prototype,"canAddVariant",{get:function(){return"Product"===this.selectedItem.type},enumerable:!1,configurable:!0}),ProductManager.prototype.addVariant=function(){var t={module:"Products",id:this.selectedItem.object.id,data:this.selectedItem.object};this.model.module="ProductVariants",this.model.addModel("",t)},ProductManager.prototype.selectionChanged=function(t){t.object&&(this.selectedItem=t).object.goDetail&&t.object.goDetail()},__decorate([core_1.Component({template:'<div class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><system-icon [module]="\'Products\'"></system-icon><div class="slds-media__body"><p class="slds-text-title--caps slds-line-height--reset"><system-label-modulename module="Products"></system-label-modulename></p><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate"><system-label label="LBL_PRODUCT_MANAGER"></system-label></h1></div></div></div><div class="slds-col slds-no-flex slds-grid slds-align-top"><button class="slds-button slds-button_neutral" [disabled]="!canAddVariant" (click)="addVariant()"><system-label label="LBL_NEW_FORM_TITLE"></system-label></button></div></div></div><div system-to-bottom><product-browser (selectionchanged)="selectionChanged($event)"></product-browser></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.navigationtab,router_1.Router])],ProductManager)}();exports.ProductManager=ProductManager;var ProductBrowser=function(){function ProductBrowser(t){this.language=t,this.selectionchanged=new core_1.EventEmitter}return ProductBrowser.prototype.selectionChanged=function(t){this.selectionchanged.emit(t)},__decorate([core_1.ViewChild("productbrowsercontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductBrowser.prototype,"productbrowsercontent",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ProductBrowser.prototype,"selectionchanged",void 0),__decorate([core_1.Component({selector:"product-browser",template:'<div class="slds-grid" style="height: 100%"><div class="slds-size--1-of-3 slds-border--right slds-scrollable--y spice-scrollbar" style="height: 100%;"><product-brwoser-tree style="height: 50%;" (selectionchanged)="selectionChanged($event)"></product-brwoser-tree><product-browser-attributes style="height: 50%;"></product-browser-attributes></div><div class="slds-size--2-of-3" style="height: 100%"><product-brwoser-variants (selectionchanged)="selectionChanged($event)"></product-brwoser-variants></div></div>',providers:[productfinder,services_1.model]}),__metadata("design:paramtypes",[services_1.language])],ProductBrowser)}();exports.ProductBrowser=ProductBrowser;var ProductGroupManager=function(){function ProductGroupManager(t,e,s,i){this.language=t,this.navigationtab=e,this.metadata=s,this.model=i,this.actionSet="",this.model.module="ProductGroups",this.navigationtab.setTabInfo({displaymodule:"ProductGroups",displayname:this.language.getLabel("LBL_PRODUCT_GROUP_MANAGER")}),this.getActionSet()}return ProductGroupManager.prototype.getActionSet=function(){var t=this.metadata.getComponentConfig("ProductGroupManager","ProductGroups");this.actionSet=t&&t.actionset?t.actionset:""},ProductGroupManager.prototype.selectionChanged=function(t){this.selectedGroupId=t.object.id},__decorate([core_1.Component({template:'<div class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><system-icon [module]="\'ProductGroups\'"></system-icon><div class="slds-media__body"><p class="slds-text-title--caps slds-line-height--reset"><system-label-modulename module="ProductGroups"></system-label-modulename></p><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate"><system-label label="LBL_PRODUCT_GROUP_MANAGER"></system-label></h1></div></div></div><object-action-container [actionset]="actionSet"></object-action-container></div></div><div class="slds-grid"><div system-to-bottom class="slds-size--1-of-4 slds-border--right spice-scrollbar"><product-group-manager-tree (selectionchanged)="selectionChanged($event)"></product-group-manager-tree></div><div system-to-bottom class="slds-size--3-of-4 spice-scrollbar"><product-group-manager-details [groupid]="selectedGroupId"></product-group-manager-details></div></div>',providers:[productfinder,services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.navigationtab,services_1.metadata,services_1.model])],ProductGroupManager)}();exports.ProductGroupManager=ProductGroupManager;var ProductGroupManagerDetails=function(){function ProductGroupManagerDetails(t,e,s){this.language=t,this.model=e,this.metadata=s,this.renderedComponents=[],this.model.module="ProductGroups"}return ProductGroupManagerDetails.prototype.ngOnChanges=function(){var t=this;this.groupId&&(this.model.id=this.groupId,this.model.getData(!0,"",!0).subscribe(function(){return t.buildContainer()}))},ProductGroupManagerDetails.prototype.ngOnDestroy=function(){this.renderedComponents.forEach(function(t){return t.destroy()})},ProductGroupManagerDetails.prototype.buildContainer=function(){var s=this;this.renderedComponents.forEach(function(t){return t.destroy()});var t=this.metadata.getComponentConfig("ProductGroupManagerDetails",this.model.module).componentset;if(t)for(var t=this.metadata.getComponentSetObjects(t),i=this,e=0,r=t;e<r.length;e++)!function(e){i.metadata.addComponent(e.component,i.detailsContainer).subscribe(function(t){s.renderedComponents.push(t),t.instance.componentconfig=e.componentconfig})}(r[e])},__decorate([core_1.ViewChild("detailscontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductGroupManagerDetails.prototype,"detailsContainer",void 0),__decorate([core_1.Input("groupid"),__metadata("design:type",String)],ProductGroupManagerDetails.prototype,"groupId",void 0),__decorate([core_1.Component({selector:"product-group-manager-details",template:'<div class="slds-theme_default slds-p-around--xx-small" style="height: 100%;"><div *ngIf="!groupId" class="slds-align_absolute-center" style="height: 100%;"><system-label label="LBL_MAKE_SELECTION"></system-label></div><div #detailscontainer [class.slds-hidden]="!groupId"></div></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata])],ProductGroupManagerDetails)}();exports.ProductGroupManagerDetails=ProductGroupManagerDetails;var ProductBrowserTree=function(){function ProductBrowserTree(t,e,s,i,r){this.language=t,this.backend=e,this.elementRef=s,this.metadata=i,this.productfinder=r,this.selectionchanged=new core_1.EventEmitter,this.productGroups=[],this.productGroupTree=[],this.productGroupTreeResultsOnly=!1,this.selectedId="",this.getProductGroups()}return Object.defineProperty(ProductBrowserTree.prototype,"treeStyle",{get:function(){return{height:"calc(100% - "+this.treeheader.element.nativeElement.getBoundingClientRect().height+"px)"}},enumerable:!1,configurable:!0}),ProductBrowserTree.prototype.ngOnInit=function(){var t=this.metadata.getComponentConfig("ProductBrowserTree","Products");this.fieldset=t&&t.fieldset?t.fieldset:void 0},ProductBrowserTree.prototype.trackByFn=function(t,e){return e.id},ProductBrowserTree.prototype.getLinkTitle=function(t){return t.summary_text+"("+this.getAggregateCount(t)+")"},ProductBrowserTree.prototype.getProductGroups=function(t){var r=this;this.backend.getRequest("productgroups/tree"+((t=void 0===t?"":t)?"/"+t:"")).subscribe(function(t){t.sort(function(t,e){return parseInt(t.sortseq,10)>parseInt(e.sortseq,10)?1:-1});for(var e=0,s=t;e<s.length;e++){var i=s[e];i.expanded=!1,i.loaded=!1,i.type="ProductGroup",i.member_count=parseInt(i.member_count,10),i.product_count=parseInt(i.product_count,10),r.productGroups.push(i)}r.buildTree(),0==r.productfinder.searchfocus.type.length&&r.selectGroup(r.productGroupTree[0])})},ProductBrowserTree.prototype.getProducts=function(r){var o=this;this.backend.getRequest("module/ProductGroups/"+(r=void 0===r?"":r)+"/Products").subscribe(function(t){for(var e=0,s=t.list;e<s.length;e++){var i=s[e];i.expanded=!1,i.loaded=!1,i.type="Product",i.parent_productgroup_id=r,o.productGroups.push(i)}o.buildTree()})},ProductBrowserTree.prototype.canExpand=function(t){return 0<t.member_count||0<t.product_count},ProductBrowserTree.prototype.toggle=function(e){var s=this;this.productGroups.some(function(t){if(t.id==e.id)return t.expanded=!t.expanded,!t.expanded||t.loaded?s.buildTree():(t.loaded=!0,0<t.member_count?s.getProductGroups(e.id):s.getProducts(e.id)),!0})},ProductBrowserTree.prototype.buildTree=function(){this.productGroupTree=[],this.addTreeNode()},ProductBrowserTree.prototype.addTreeNode=function(t,e){void 0===t&&(t=""),void 0===e&&(e=1);for(var s=0,i=this.productGroups;s<i.length;s++){var r=i[s];r.parent_productgroup_id==t&&(r.level=e,this.productGroupTree.push(r),"ProductGroup"==r.type&&r.expanded&&this.addTreeNode(r.id,e+1))}},ProductBrowserTree.prototype.selectGroup=function(t){var e={type:"ProductGroup",object:t};this.productfinder.setSearchFocus(e),this.selectedId=t.id,this.selectionchanged.emit(e)},ProductBrowserTree.prototype.selectProduct=function(t){var e={type:"Product",object:t};this.productfinder.setSearchFocus(e),this.selectedId=t.id,this.selectionchanged.emit(e)},ProductBrowserTree.prototype.isSelected=function(t){return this.selectedId==t},ProductBrowserTree.prototype.getAggregateCount=function(t){var e="Product"===t.type?"productid":"productgroups";return this.productfinder.getAggregateCount(e,t.id)},ProductBrowserTree.prototype.displayTreeNode=function(t){return!this.productGroupTreeResultsOnly||"-"!==this.getAggregateCount(t)},__decorate([core_1.ViewChild("treeheader",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductBrowserTree.prototype,"treeheader",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ProductBrowserTree.prototype,"selectionchanged",void 0),__decorate([core_1.Component({selector:"product-brwoser-tree",template:'<div class="slds-tree_container" role="application" style="max-width: none; height: inherit;"><div #treeheader><div class="slds-border--bottom slds-grid slds-p-around--x-small slds-grid--vertical-align-center slds-grid--align-spread"><h4 class="slds-text-title_caps slds-text-heading--small slds-p-vertical--small"><system-label-modulename module="ProductGroups"></system-label-modulename></h4><system-checkbox [(ngModel)]="productGroupTreeResultsOnly"><system-label label="LBL_RESULTS_ONLY"></system-label></system-checkbox></div></div><div class="slds-scrollable--y spice-scrollbar" [ngStyle]="treeStyle"><ul class="slds-tree" role="tree" aria-labelledby="treeheading"><li *ngFor="let productgroup of productGroupTree; trackBy: trackByFn" role="treeitem" [attr.aria-level]="productgroup.level" [class.slds-theme--shade]="isSelected(productgroup.id)"><div *ngIf="productgroup.type==\'ProductGroup\' && displayTreeNode(productgroup)" class="slds-tree__item"><button class="slds-button slds-button_icon slds-button_icon slds-m-right_x-small" [disabled]="!canExpand(productgroup)" (click)="toggle(productgroup)"><system-button-icon [icon]="\'chevronright\'"></system-button-icon></button> <a href="javascript:void(0);" tabindex="-1" class="slds-truncate" (click)="selectGroup(productgroup)" [title]="getLinkTitle(productgroup)">{{productgroup.summary_text}} ( {{getAggregateCount(productgroup)}} )</a></div><div *ngIf="productgroup.type==\'Product\' && displayTreeNode(productgroup)" class="slds-tree__item slds grid slds-grid--vertical-align-center" (click)="selectProduct(productgroup)"><system-icon [module]="\'Products\'" [size]="\'small\'"></system-icon><a *ngIf="!fieldset; else fieldsetContainer" href="javascript:void(0);" tabindex="-1" class="slds-truncate">{{productgroup.summary_text}}</a><ng-template #fieldsetContainer><div [system-view-provider]="{editable: false, displayLabels: false}" [system-model-provider]="{id: productgroup.id, module: \'Products\', data: productgroup}" class="slds-truncate"><object-record-fieldset-horizontal-list [fieldset]="fieldset"></object-record-fieldset-horizontal-list></div></ng-template><span class="slds-p-horizontal--xx-small">( {{getAggregateCount(productgroup)}} )</span></div></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.metadata,productfinder])],ProductBrowserTree)}();exports.ProductBrowserTree=ProductBrowserTree;var ProductGroupManagerTree=function(){function t(t,e,s,i,r){this.language=t,this.backend=e,this.elementRef=s,this.broadcast=i,this.productfinder=r,this.selectionchanged=new core_1.EventEmitter,this.productGroups=[],this.productGroupTree=[],this.selectedId="",this.subscription=new rxjs_1.Subscription,this.isLoading="",this.data={},this.subscribeModelChanges(),this.getProductGroups()}return t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.trackByFn=function(t,e){return e.id},t.prototype.subscribeModelChanges=function(){var s=this;this.subscription=this.broadcast.message$.subscribe(function(t){var e;"model.save"==t.messagetype&&"ProductGroups"==t.messagedata.module&&(s.productGroups.some(function(e){if(e.id==t.messagedata.id)return e.summary_text=t.messagedata.data.summary_text,e.sortseq=t.messagedata.data.sortseq,e.parent_productgroup_id=t.messagedata.data.parent_productgroup_id,s.productGroups.some(function(t){if(t.id==e.parent_productgroup_id)return t.expanded=!0,t.member_count++,!0}),!0})||((e=_.clone(t.messagedata.data)).expanded=!1,e.loaded=!1,e.type="ProductGroup",s.productGroups.some(function(t){if(t.id==e.parent_productgroup_id)return t.expanded=!0,t.member_count++,!0}),s.productGroups.push(e)),s.buildTree())})},t.prototype.getProductGroups=function(t){var r=this;this.isLoading=t=void 0===t?"":t,this.backend.getRequest("productgroups/tree"+(t?"/"+t:"")).subscribe(function(t){for(var e=0,s=t;e<s.length;e++){var i=s[e];i.expanded=!1,i.loaded=!1,i.type="ProductGroup",i.member_count=parseInt(i.member_count,10),i.product_count=parseInt(i.product_count,10),r.productGroups.push(i)}r.buildTree(),0==r.productfinder.searchfocus.type.length&&0<r.productGroupTree.length&&r.selectGroup(r.productGroupTree[0]),r.isLoading=""})},t.prototype.sortProductGroups=function(){this.productGroups.sort(function(t,e){return isNaN(t.sortseq)||isNaN(e.sortseq)||t.sortseq==e.sortseq?t.name>e.name?1:-1:+t.sortseq>+e.sortseq?1:-1})},t.prototype.toggle=function(e,t){var s=this;this.productGroups.some(function(t){if(t.id==e.id)return t.expanded=!t.expanded,!t.expanded||t.loaded?s.buildTree():(t.loaded=!0,0<t.member_count&&s.getProductGroups(e.id)),!0}),t.stopPropagation&&t.stopPropagation()},t.prototype.buildTree=function(){this.productGroupTree=[],this.sortProductGroups(),this.addTreeNode()},t.prototype.addTreeNode=function(t,e){void 0===t&&(t=""),void 0===e&&(e=1);for(var s=0,i=this.productGroups;s<i.length;s++){var r=i[s];r.parent_productgroup_id==t&&(r.level=e,this.productGroupTree.push(r),"ProductGroup"==r.type&&r.expanded&&this.addTreeNode(r.id,e+1))}},t.prototype.selectGroup=function(t){var e={type:"ProductGroup",object:t};this.productfinder.setSearchFocus(e),this.selectedId=t.id,this.selectionchanged.emit(e)},t.prototype.isSelected=function(t){return this.selectedId==t},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"selectionchanged",void 0),__decorate([core_1.Component({selector:"product-group-manager-tree",template:'<div class="slds-tree_container slds-p-around--x-small" style="max-width: 100%" role="application"><ul class="slds-tree" role="tree" aria-labelledby="treeheading"><li *ngFor="let productgroup of productGroupTree; trackBy: trackByFn" (click)="selectGroup(productgroup)" role="treeitem" [attr.aria-level]="productgroup.level" [class.slds-theme--shade]="isSelected(productgroup.id)"><div class="slds-tree__item"><button [class.slds-hidden]="productgroup.member_count == 0" class="slds-button slds-button_icon slds-button_icon slds-m-right_x-small" (click)="toggle(productgroup, $event)"><system-button-icon [icon]="\'chevronright\'"></system-button-icon></button> <a href="javascript:void(0);" tabindex="-1" class="slds-truncate" [title]="productgroup.summary_text">{{productgroup.summary_text}}</a><system-spinner *ngIf="isLoading == productgroup.id" size="16" class="slds-col_bump-left slds-m-right--x-small"></system-spinner></div></li></ul></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.broadcast,productfinder])],t)}();exports.ProductGroupManagerTree=ProductGroupManagerTree;var ProductBrowserVariants=function(){function t(t,e,s,i,r){this.metadata=t,this.language=e,this.backend=s,this.elementRef=i,this.productfinder=r,this.fieldset="",this.selectionchanged=new core_1.EventEmitter,this.fieldset=this.metadata.getComponentConfig("ProductBrowserVariants").fieldset}return Object.defineProperty(t.prototype,"productVariants",{get:function(){return this.productfinder.productVariants},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){return this.productfinder.loading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchTerm",{get:function(){return this.productfinder.searchterm},set:function(t){this.productfinder.searchterm=t},enumerable:!1,configurable:!0}),t.prototype.keyUp=function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.productfinder.getProductVariants()},500)},t.prototype.onScroll=function(t){var e=this.variantsContent.element.nativeElement;e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.productfinder.getMoreProductVariants()},t.prototype.handleSelection=function(t){this.selectionchanged.emit(t)},__decorate([core_1.ViewChild("variantscontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],t.prototype,"variantsContent",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"selectionchanged",void 0),__decorate([core_1.Component({selector:"product-brwoser-variants",template:'<div class="slds-border--bottom slds-grid slds-grid--vertical-align-center slds-p-horizontal--small slds-p-vertical--x-small"><h4 class="slds-text-title_caps slds-text-heading--small slds-p-vertical--small"><system-label-modulename module="ProductVariants"></system-label-modulename></h4><div class="slds-col slds-form-element slds-m-left--x-small"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--right"></system-utility-icon><input type="text" class="slds-input" placeholder="search by" [(ngModel)]="searchTerm" (keyup)="keyUp()"></div></div></div><div system-to-bottom #variantscontent class="spice-scrollbar" (scroll)="onScroll($event)"><product-brwoser-variant *ngFor="let productvariant of productVariants" [productvariant]="productvariant" (selectionchanged)="handleSelection($event)"></product-brwoser-variant><div *ngIf="loading" class="slds-size--1-of-1 slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,core_1.ElementRef,productfinder])],t)}();exports.ProductBrowserVariants=ProductBrowserVariants;var ProductBrowserVariant=function(){function ProductBrowserVariant(t,e,s,i,r){this.model=t,this.modelutilities=e,this.language=s,this.metadata=i,this.productfinder=r,this.productvariant={},this.selectionchanged=new core_1.EventEmitter,this.opened=!1}return Object.defineProperty(ProductBrowserVariant.prototype,"buttonIcon",{get:function(){return this.opened?"chevronup":"chevrondown"},enumerable:!1,configurable:!0}),Object.defineProperty(ProductBrowserVariant.prototype,"groupAttributes",{get:function(){return this.productfinder.groupAttributes},enumerable:!1,configurable:!0}),ProductBrowserVariant.prototype.ngOnInit=function(){this.model.id=this.productvariant.id,this.model.module="ProductVariants",this.model.data=this.modelutilities.backendModel2spice("ProductVariants",this.productvariant);var t=this.metadata.getComponentConfig("ProductBrowserVariant","ProductVariants");this.fieldset=t&&t.fieldset?t.fieldset:void 0,this.detailsFieldset=t&&t.detailsFieldset?t.detailsFieldset:void 0},ProductBrowserVariant.prototype.toggleOpen=function(){this.opened=!this.opened},ProductBrowserVariant.prototype.godetail=function(){this.selectionchanged.emit({type:"ProductVariant",object:this.model})},ProductBrowserVariant.prototype.edit=function(){this.model.edit(!0)},__decorate([core_1.Input(),__metadata("design:type",Object)],ProductBrowserVariant.prototype,"productvariant",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ProductBrowserVariant.prototype,"selectionchanged",void 0),__decorate([core_1.Component({selector:"product-brwoser-variant",template:'<div class="slds-m-around--x-small slds-box slds-box_x-small slds-theme--shade"><div class="slds-grid"><header class="slds-grid slds-grid--vertical-align-end slds-has-flexi-truncate"><system-icon [module]="\'ProductVariants\'" size="x-small"></system-icon><h2 class="slds-truncate" [system-view-provider]="{editable: false, displayLabels: false}"><a *ngIf="!fieldset; else fieldsetContainer" href="javascript:void(0);" class="slds-card__header-link slds-truncate" [title]="model.data.summary_text" (click)="godetail()"><span class="slds-text-heading_x-small">{{model.data.summary_text}}</span></a><ng-template #fieldsetContainer><object-record-fieldset-horizontal-list [fieldset]="fieldset"></object-record-fieldset-horizontal-list></ng-template></h2></header><div class="slds-no-flex"><button class="slds-button slds-button_icon" (click)="toggleOpen()"><system-button-icon [icon]="buttonIcon"></system-button-icon></button></div></div><div *ngIf="opened" class="slds-p-top--xx-small" [system-view-provider]="{editable: false, displayLabels: true}"><object-record-fieldset *ngIf="!!detailsFieldset" [fieldset]="detailsFieldset"></object-record-fieldset><product-variants-attributes-table [attributes]="groupAttributes"></product-variants-attributes-table></div></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.model,services_1.modelutilities,services_1.language,services_1.metadata,productfinder])],ProductBrowserVariant)}();exports.ProductBrowserVariant=ProductBrowserVariant;var ProductBrowserAttributes=function(){function t(t,e,s,i){this.language=t,this.backend=e,this.elementRef=s,this.productfinder=i,this.attributeFilter=""}return Object.defineProperty(t.prototype,"hasSearchFilters",{get:function(){return this.productfinder.hasSearchFilters},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributesStyle",{get:function(){return{height:"calc(100% - "+this.attributesheader.element.nativeElement.getBoundingClientRect().height+"px)"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){return this.productfinder.loadingAttributes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){for(var t=[],e=0,s=this.productfinder.groupAttributes;e<s.length;e++){var i=s[e];0<=i.name.toLowerCase().indexOf(this.attributeFilter.toLowerCase())&&t.push(i)}return t.sort(function(t,e){return+t.sort_sequence>+e.sort_sequence?1:-1})},enumerable:!1,configurable:!0}),t.prototype.clearFilters=function(){this.productfinder.resetSearchFilters()},__decorate([core_1.ViewChild("attributesheader",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],t.prototype,"attributesheader",void 0),__decorate([core_1.Component({selector:"product-browser-attributes",template:'<div class="slds-border--top" style="height: inherit;"><div #attributesheader><div class="slds-grid slds-p-around--x-small slds-grid--vertical-align-center slds-grid--align-spread slds-border--bottom"><h4 class="slds-text-title_caps slds-text-heading--small slds-p-vertical--small" id="treeheading"><system-label-modulename module="ProductAttributes"></system-label-modulename></h4><div class="slds-grid slds-grid--vertical-align-center"><input type="text" class="slds-input slds-m-right--xx-small" placeholder="Filter" [(ngModel)]="attributeFilter"> <button [disabled]="!hasSearchFilters" class="slds-button slds-button_icon slds-button_icon slds-button_icon-border" (click)="clearFilters()"><system-button-icon [icon]="\'clear\'"></system-button-icon></button></div></div></div><div class="slds-p-around--x-small slds-scrollable--y spice-scrollbar" [ngStyle]="attributesStyle"><div *ngIf="loading" class="slds-size--1-of-1 slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-container *ngFor="let attribute of attributes" [ngSwitch]="attribute.prat_datatype?.toLowerCase()"><product-browser-attribute-di-search *ngSwitchCase="\'di\'" [attribute]="attribute"></product-browser-attribute-di-search><product-browser-attribute-s-search *ngSwitchCase="\'s\'" [attribute]="attribute"></product-browser-attribute-s-search><product-browser-attribute-n-search *ngSwitchCase="\'n\'" [attribute]="attribute"></product-browser-attribute-n-search><product-browser-attribute-f-search *ngSwitchCase="\'f\'" [attribute]="attribute"></product-browser-attribute-f-search><product-browser-attribute-vc-search *ngSwitchDefault [attribute]="attribute"></product-browser-attribute-vc-search></ng-container></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,productfinder])],t)}();exports.ProductBrowserAttributes=ProductBrowserAttributes;var ProductVariantsAttributesTable=function(){function t(t,e,s){this.language=t,this.elementRef=e,this.view=s,this.attributes=[],this.displaygroups=[],this.displaygroup="all",this.showrequired=!0,this.showoptional=!0,this.showreadonly=!0}return Object.defineProperty(t.prototype,"displayAttributes",{get:function(){var e=this;return this.attributes.filter(function(t){return e.displayAttribute(t)&&("all"==e.displaygroup||"all"!=e.displaygroup&&t.attr_usagegrp==e.displaygroup)}).sort(function(t,e){return+t.sort_sequence>+e.sort_sequence?1:-1})},enumerable:!1,configurable:!0}),t.prototype.ngOnChanges=function(){this.setDisplayGroups()},t.prototype.setDisplayGroups=function(){var e=this;this.displaygroups=[],this.attributes&&this.attributes.forEach(function(t){t.attr_usagegrp&&""!=t.attr_usagegrp&&-1==e.displaygroups.indexOf(t.attr_usagegrp)&&e.displaygroups.push(t.attr_usagegrp)})},t.prototype.required=function(t){return this.view.isEditMode()&&"required"==t.attr_usage},t.prototype.displayAttribute=function(t){switch(t.attr_usage){case"none":return this.showreadonly;case"required":return this.showrequired;default:return this.showoptional}},__decorate([core_1.Input(),__metadata("design:type",Array)],t.prototype,"attributes",void 0),__decorate([core_1.Component({selector:"product-variants-attributes-table",template:'<div class="slds-p-around--x-small"><div class="slds-grid slds-p-vertical--x-small slds-grid--vertical-align-center"><div class="slds-p-right--small"><system-label label="LBL_SHOW_ATTRIBUTES"></system-label>:</div><system-checkbox [(ngModel)]="showrequired"><system-label label="LBL_REQUIRED"></system-label></system-checkbox><system-checkbox [(ngModel)]="showoptional"><system-label label="LBL_OPTIONAL"></system-label></system-checkbox><system-checkbox [(ngModel)]="showreadonly"><system-label label="LBL_READONLY"></system-label></system-checkbox><div class="slds-p-right--small slds-col_bump-left"><system-label label="LBL_FILTER"></system-label>:</div><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="displaygroup" [disabled]="displaygroups?.length == 0"><option value="all"><system-label label="LBL_ALL"></system-label></option><option *ngFor="let displaygroup of displaygroups" [value]="displaygroup">{{displaygroup}}</option></select></div></div></div></div><table class="slds-box--border slds-table slds-table_bordered slds-table_cell-buffer slds-table--fixed-layout"><thead><tr class="slds-text-title_caps"><th scope="col" width="30%"><div class="slds-truncate"><system-label label="LBL_ATTRIBUTE"></system-label></div></th><th scope="col" width="70%"><div class="slds-truncate"><system-label label="LBL_VALUE"></system-label></div></th></tr></thead><tbody><tr *ngFor="let attribute of displayAttributes"><td><div class="slds-truncate"><label class="slds-form-element__label"><abbr *ngIf="required(attribute)" class="slds-required">*</abbr> {{attribute.name}}</label></div></td><td><div class="slds-truncate" [ngSwitch]="attribute.prat_datatype?.toLowerCase()"><product-variants-attribute-di *ngSwitchCase="\'di\'" [attribute]="attribute"></product-variants-attribute-di><product-variants-attribute-s *ngSwitchCase="\'s\'" [attribute]="attribute"></product-variants-attribute-s><product-variants-attribute-n *ngSwitchCase="\'n\'" [attribute]="attribute"></product-variants-attribute-n><product-variants-attribute-f *ngSwitchCase="\'f\'" [attribute]="attribute"></product-variants-attribute-f><product-variants-attribute-vc *ngSwitchDefault [attribute]="attribute"></product-variants-attribute-vc></div></td></tr></tbody></table></div>'}),__metadata("design:paramtypes",[services_1.language,core_1.ElementRef,services_1.view])],t)}();exports.ProductVariantsAttributesTable=ProductVariantsAttributesTable;var ProductBrowserAttributeVCSearch=function(){function t(t,e){this.language=t,this.productfinder=e,this.attribute={}}return Object.defineProperty(t.prototype,"value",{get:function(){try{return this.productfinder.searchfilters[this.attribute.id].value}catch(t){return""}},set:function(t){var e=this;this.productfinder.searchfilters[this.attribute.id]||(this.productfinder.searchfilters[this.attribute.id]={}),this.productfinder.searchfilters[this.attribute.id].value=t,clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.productfinder.getProductVariants()},500)},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"attribute",void 0),__decorate([core_1.Component({selector:"product-browser-attribute-vc-search",template:'<div class="slds-form-element"><label class="slds-form-element__label">{{attribute.name}}</label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="value"></div></div>'}),__metadata("design:paramtypes",[services_1.language,productfinder])],t)}(),ProductBrowserAttributeDISearch=function(i){function t(t,e){var s=i.call(this,t,e)||this;return s.language=t,s.productfinder=e,s}return __extends(t,i),Object.defineProperty(t.prototype,"attributeValues",{get:function(){return this.attribute.validations?this.attribute.validations.map(function(t){return t=t.value}):[]},enumerable:!1,configurable:!0}),__decorate([core_1.Component({selector:"product-browser-attribute-di-search",template:'<div class="slds-form-element"><label class="slds-form-element__label">{{attribute.name}}</label><div class="slds-select_container"><select class="slds-select" [(ngModel)]="value"><option></option><option *ngFor="let attributevalue of attributeValues">{{attributevalue}}</option></select></div></div>'}),__metadata("design:paramtypes",[services_1.language,productfinder])],t)}(exports.ProductBrowserAttributeVCSearch=ProductBrowserAttributeVCSearch);exports.ProductBrowserAttributeDISearch=ProductBrowserAttributeDISearch;var ProductBrowserAttributeNSearch=function(){function t(t,e,s,i){this.language=t,this.backend=e,this.elementRef=s,this.productfinder=i,this.attribute={}}return Object.defineProperty(t.prototype,"fromValue",{get:function(){try{return this.productfinder.searchfilters[this.attribute.id].valuefrom}catch(t){return""}},set:function(t){var e=this;this.productfinder.searchfilters[this.attribute.id]||(this.productfinder.searchfilters[this.attribute.id]={}),this.productfinder.searchfilters[this.attribute.id].valuefrom=t,clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.productfinder.getProductVariants()},500)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toValue",{get:function(){try{return this.productfinder.searchfilters[this.attribute.id].valueto}catch(t){return""}},set:function(t){var e=this;this.productfinder.searchfilters[this.attribute.id]||(this.productfinder.searchfilters[this.attribute.id]={}),this.productfinder.searchfilters[this.attribute.id].valueto=t,clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.productfinder.getProductVariants()},500)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uom",{get:function(){return this.attribute.uom},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"attribute",void 0),__decorate([core_1.Component({selector:"product-browser-attribute-n-search",template:'<div class="slds-p-vertical--x-small"><label class="slds-form-element__label">{{attribute.name}}</label><div class="slds-grid"><div class="slds-form-element slds-p-right--x-small slds-size--2-of-5"><div class="slds-form-element__control"><input type="number" class="slds-input" [(ngModel)]="fromValue"></div></div><div class="slds-form-element slds-p-left--x-small slds-size--2-of-5"><div class="slds-form-element__control"><input type="number" class="slds-input" [(ngModel)]="toValue"></div></div><div class="slds-form-element slds-p-left--x-small slds-size--1-of-5"><div class="slds-form-element__control"><input type="text" class="slds-input" disabled [value]="uom"></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,productfinder])],t)}();exports.ProductBrowserAttributeNSearch=ProductBrowserAttributeNSearch;var ProductBrowserAttributeFSearch=function(i){function t(t,e){var s=i.call(this,t,e)||this;return s.language=t,s.productfinder=e,s}return __extends(t,i),__decorate([core_1.Component({selector:"product-browser-attribute-f-search",template:'<div class="slds-form-element slds-p-vertical--x-small"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="value">{{attribute.name}}</system-checkbox></div></div>'}),__metadata("design:paramtypes",[services_1.language,productfinder])],t)}(ProductBrowserAttributeVCSearch);exports.ProductBrowserAttributeFSearch=ProductBrowserAttributeFSearch;var ProductBrowserAttributeSSearch=function(i){function t(t,e){var s=i.call(this,t,e)||this;return s.language=t,s.productfinder=e,s.arrayvalue=[],s}return __extends(t,i),Object.defineProperty(t.prototype,"attributeValues",{get:function(){return this.attribute.validations?this.attribute.validations.map(function(t){return t=t.value}).sort(function(t,e){return t.toLowerCase()>e.toLowerCase()?1:-1}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayValue",{get:function(){return this.arrayvalue},set:function(t){this.arrayvalue=t,this.value=0<t.length?t.join(","):""},enumerable:!1,configurable:!0}),__decorate([core_1.Component({selector:"product-browser-attribute-s-search",template:'<div class="slds-box--border slds-m-vertical--x-small"><div class="slds-p-horizontal--x-small slds-p-bottom--x-small"><label class="slds-form-element__label slds-m-bottom--x-small">{{attribute.name}}</label><system-checkbox-group [(ngModel)]="arrayValue" class="slds-grid slds-wrap"><div *ngFor="let attributeValue of attributeValues" [title]="attributeValue" class="slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate"><system-checkbox-group-checkbox [value]="attributeValue"><span class="slds-m-left--xx-small">{{attributeValue}}</span></system-checkbox-group-checkbox></div></system-checkbox-group></div></div>'}),__metadata("design:paramtypes",[services_1.language,productfinder])],t)}(ProductBrowserAttributeVCSearch);exports.ProductBrowserAttributeSSearch=ProductBrowserAttributeSSearch;var ProductVariantsAttributes=function(){function ProductVariantsAttributes(t,e,s){var i=this;this.language=t,this.model=e,this.backend=s,this.attributes=[],this.parentId="",this.isLoading=!1,this.subscription=new rxjs_1.Subscription,this.subscription=this.model.data$.subscribe(function(t){i.loadAttributes(t)})}return ProductVariantsAttributes.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},ProductVariantsAttributes.prototype.ngOnInit=function(){this.loadAttributes(this.model.data),this.loadAttributeValues()},ProductVariantsAttributes.prototype.loadAttributes=function(t){var e,s,i=this;switch(this.model.module){case"ProductVariants":e="product_id",s="products";break;case"Products":e="productgroup_id",s="productgroups"}t=t[e];t&&t!=this.parentId?(this.isLoading=!0,this.parentId=t,this.backend.getRequest(s+"/"+t+"/productattributes/direct").subscribe(function(t){i.attributes=t.sort(function(t,e){return+t.sort_sequence>+e.sort_sequence?1:-1}),i.isLoading=!1},function(t){return i.isLoading=!1})):t||(this.parentId="",this.attributes=[])},ProductVariantsAttributes.prototype.loadAttributeValues=function(){this.model.data.productattributevalues||(this.model.data.productattributevalues={beans:{}})},__decorate([core_1.Component({selector:"product-variants-attributes",template:'<system-section titlelabel="LBL_ATTRIBUTES"><product-variants-attributes-table *ngIf="parentId" [attributes]="attributes"></product-variants-attributes-table><table *ngIf="isLoading" class="slds-table"><tbody system-table-stencils [columns]="2" [rows]="3"></tbody></table><div *ngIf="!parentId && !isLoading" class="slds-align_absolute-center"><system-label label="MSG_SELECT_PRODUCT_GROUP"></system-label></div></system-section>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.backend])],ProductVariantsAttributes)}();exports.ProductVariantsAttributes=ProductVariantsAttributes;var ProductVariantsAttributeVC=function(){function t(t,e,s,i,r){this.language=t,this.backend=e,this.elementRef=s,this.view=i,this.model=r,this.attribute={},this.attributeValueId=void 0}return Object.defineProperty(t.prototype,"value",{get:function(){return this.model.data.productattributevalues.beans[this.attributeValueId].pratvalue},set:function(t){var e=this.model.getField("productattributevalues");e.beans[this.attributeValueId].pratvalue=t,this.model.setField("productattributevalues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return"none"==this.attribute.attr_usage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return this.view.isEditable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.view.isEditMode()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.setAttributeValueId()},t.prototype.createInitialAttributeValue=function(){this.model.data.productattributevalues.beans[this.attributeValueId]={id:this.attributeValueId,productattribute_id:this.attribute.id,pratvalue:"",parent_id:this.model.id,parent_type:this.model.module}},t.prototype.setAttributeValueId=function(){var t,e=this.model.generateGuid(),s=this.model.data.productattributevalues;for(t in s.beans)if(s.beans.hasOwnProperty(t)&&s.beans[t].productattribute_id===this.attribute.id){this.attributeValueId=t;break}this.attributeValueId||(this.attributeValueId=e,this.createInitialAttributeValue())},__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"attribute",void 0),__decorate([core_1.Component({selector:"product-variants-attribute-vc",template:'<div *ngIf="isEditMode" class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="value" [disabled]="isDisabled"></div><field-generic-display *ngIf="!isEditMode" [editable]="editable">{{value}}</field-generic-display>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.view,services_1.model])],t)}(),ProductVariantsAttributeDI=function(a){function t(t,e,s,i,r){var o=a.call(this,t,e,s,i,r)||this;return o.language=t,o.backend=e,o.elementRef=s,o.view=i,o.model=r,o}return __extends(t,a),Object.defineProperty(t.prototype,"attributeValues",{get:function(){var t=[];if(this.attribute.validations)for(var e=0,s=this.attribute.validations;e<s.length;e++){var i=s[e];i.value||(i.value=" "),t.push(i.value)}return t.sort(function(t,e){return t.toLowerCase()>e.toLowerCase()?1:-1})},enumerable:!1,configurable:!0}),__decorate([core_1.Component({selector:"product-variants-attribute-di",template:'<div *ngIf="isEditMode" class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="value" [disabled]="attribute.attr_usage == \'none\'"><option *ngFor="let attributevalue of attributeValues">{{attributevalue}}</option></select></div></div><field-generic-display *ngIf="!isEditMode" [editable]="editable">{{value}}</field-generic-display>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.view,services_1.model])],t)}(exports.ProductVariantsAttributeVC=ProductVariantsAttributeVC);exports.ProductVariantsAttributeDI=ProductVariantsAttributeDI;var ProductVariantsAttributeN=function(a){function t(t,e,s,i,r){var o=a.call(this,t,e,s,i,r)||this;return o.language=t,o.backend=e,o.elementRef=s,o.view=i,o.model=r,o}return __extends(t,a),Object.defineProperty(t.prototype,"precision",{get:function(){return this.attribute.prat_precision},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueTo",{get:function(){var t=(t=this.attribute.validations)&&0<t.length?t[0]:{};return parseInt(t.value_to,10)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueFrom",{get:function(){var t=(t=this.attribute.validations)&&0<t.length?t[0]:{};return parseInt(t.value_from,10)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uom",{get:function(){return this.attribute.uom},enumerable:!1,configurable:!0}),__decorate([core_1.Component({selector:"product-variants-attribute-n",template:'<field-generic-display *ngIf="!isEditMode" [editable]="editable">{{value}} {{uom}}</field-generic-display><system-input-number *ngIf="isEditMode" [(ngModel)]="value" [precision]="precision" [min]="valueFrom" [max]="valueTo"></system-input-number>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.view,services_1.model])],t)}(ProductVariantsAttributeVC);exports.ProductVariantsAttributeN=ProductVariantsAttributeN;var ProductVariantsAttributeF=function(a){function t(t,e,s,i,r){var o=a.call(this,t,e,s,i,r)||this;return o.language=t,o.backend=e,o.elementRef=s,o.view=i,o.model=r,o}return __extends(t,a),__decorate([core_1.Component({selector:"product-variants-attribute-f",template:'<field-generic-display *ngIf="!isEditMode" [editable]="editable"><system-checkbox [(ngModel)]="value" [disabled]="true"></system-checkbox></field-generic-display><system-checkbox *ngIf="isEditMode" [(ngModel)]="value"></system-checkbox>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.view,services_1.model])],t)}(ProductVariantsAttributeVC);exports.ProductVariantsAttributeF=ProductVariantsAttributeF;var ProductVariantsAttributeSS=function(a){function t(t,e,s,i,r){var o=a.call(this,t,e,s,i,r)||this;return o.language=t,o.backend=e,o.elementRef=s,o.view=i,o.model=r,o._valueArray=[],o}return __extends(t,a),Object.defineProperty(t.prototype,"valueArray",{get:function(){return 0==this._valueArray.length&&this.value&&"string"==typeof this.value?this._valueArray=2<this.value.length?this.value.split(","):[]:this._valueArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributeValues",{get:function(){return this.attribute.validations?this.attribute.validations.map(function(t){return t=t.value}).sort(function(t,e){return t.toLowerCase()>e.toLowerCase()?1:-1}):[]},enumerable:!1,configurable:!0}),t.prototype.setValue=function(t){this.value=1<t.length?t.join(","):t.toString()},t.prototype.trackByFn=function(t,e){return t},__decorate([core_1.Component({selector:"product-variants-attribute-s",template:'<field-generic-display *ngIf="!isEditMode" [editable]="editable"><system-checkbox-group [ngModel]="valueArray" class="slds-grid slds-wrap"><div *ngFor="let attributeValue of attributeValues; trackBy: trackByFn" [title]="attributeValue" class="slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate"><system-checkbox-group-checkbox [disabled]="true" [value]="attributeValue"><span class="slds-m-left--xx-small">{{attributeValue}}</span></system-checkbox-group-checkbox></div></system-checkbox-group></field-generic-display><system-checkbox-group *ngIf="isEditMode" [ngModel]="valueArray" (ngModelChange)="setValue($event)" class="slds-grid slds-wrap"><div *ngFor="let attributeValue of attributeValues; trackBy: trackByFn" [title]="attributeValue" class="slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate"><system-checkbox-group-checkbox [value]="attributeValue"><span class="slds-m-left--xx-small">{{attributeValue}}</span></system-checkbox-group-checkbox></div></system-checkbox-group>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.view,services_1.model])],t)}(ProductVariantsAttributeVC);exports.ProductVariantsAttributeSS=ProductVariantsAttributeSS;var ProductTextGenerator=function(){function ProductTextGenerator(t,e,s,i,r){var o=this;this.language=t,this.backend=e,this.elementRef=s,this.model=i,this.view=r,this.componentSubscriptions=[],this.attributes={},this.ltattributes={},this.productnames=[],this.attributesproductid="",this.loading=!1,this.tableguid="",this.isOpen=!0,this.E1="",this.E2="",this.Q="",this.textElements={MGST:"",E1:"",E2:"",Q:"",F:"",A:"",S:""},this.textTemplateDef=[{source:"MGST",len:6},{source:"E1",len:4},{source:"E2",len:4},{source:"Q",len:4},{source:"F",len:4},{source:"A",len:15},{source:"S",len:3}],this.textTemplate="MGST:1:6::E1:7:10::E2:11:14::Q:15:18::F:19:22::A:23:37::S:38:40",this.componentSubscriptions.push(i.data$.subscribe(function(t){o.loadAttributes()})),this.tableguid=this.model.generateGuid()}return Object.defineProperty(ProductTextGenerator.prototype,"e1",{get:function(){return this.textElements.E1},set:function(t){this.textElements.E1=t},enumerable:!1,configurable:!0}),Object.defineProperty(ProductTextGenerator.prototype,"productText",{get:function(){for(var t="",e=0,s=this.textTemplateDef;e<s.length;e++){var i=s[e],r="";switch(i.source){case"E1":case"E2":case"Q":if(this.textElements[i.source])switch(r=this.getAttributeValue(this.textElements[i.source]),this.attributes[this.textElements[i.source]].prat_datatype){case"N":for(r=r.toString();r.length<4;)r="0"+r;break;case"S":case"D":r=this.translateAttribValue(this.textElements[i.source],r)}break;case"F":for(var o in this.attributes)this.attributes.hasOwnProperty(o)&&"F"==this.attributes[o].contentcode&&(a=this.getAttributeValue(o),"D"==this.attributes[o].contentcode2&&a?r="DRUC":a&&""===r&&(r=this.translateAttribValue(o,a)));break;case"A":var a,n=[];for(o in this.attributes)if(this.attributes.hasOwnProperty(o)&&"A"==this.attributes[o].contentcode)if(a=this.getAttributeValue(o)){switch(this.attributes[o].prat_datatype){case"N":for(a=a.toString();a.length<4;)a="0"+a;break;case"S":case"D":a=this.translateAttribValue(o,a)}n.push({position:this.attributes[o].contentcode2,value:(this.attributes[o].contentprefix||"")+a})}n.sort(function(t,e){return t.position>e.position?1:-1});for(var d=0,l=n;d<l.length;d++)r+=(o=l[d]).value;break;default:r=this.textElements[i.source]}if(r.length==i.len)t+=r;else if(r.length>i.len)t+=r.substr(0,i.len);else{for(;r.length<i.len;)r+="/";t+=r}}return t},enumerable:!1,configurable:!0}),Object.defineProperty(ProductTextGenerator.prototype,"longText",{get:function(){for(var t="",e=0,s=this.ltattributes;e<s.length;e++){var i=s[e],r=this.getAttributeValue(i.id);""!=r&&(t+=i.textpattern.replace("[value]",r)+"\n")}return t},enumerable:!1,configurable:!0}),ProductTextGenerator.prototype.ngOnInit=function(){this.loadAttributes()},ProductTextGenerator.prototype.ngOnDestroy=function(){for(var t=0,e=this.componentSubscriptions;t<e.length;t++)e[t].unsubscribe()},ProductTextGenerator.prototype.loadAttributes=function(){var e=this;this.model.data.product_id&&this.model.data.product_id!==this.attributesproductid?(this.loading=!0,this.attributesproductid=this.model.data.product_id,this.backend.getRequest("products/"+this.model.data.product_id+"/productattributes/textgenerator").subscribe(function(t){e.attributes=t.attributes,e.ltattributes=t.ltattributes,e.productnames=t.productnames,e.textElements.MGST=t.shorttext.substr(6,6),e.loading=!1})):this.model.data.product_id||(this.attributes=[])},ProductTextGenerator.prototype.translateAttribValue=function(t,e){return this.attributes[t].values&&this.attributes[t].values[e]?this.attributes[t].values[e]:e},ProductTextGenerator.prototype.togglerequired=function(){this.isOpen=!this.isOpen},ProductTextGenerator.prototype.getOpenStyle=function(){if(!this.isOpen)return{height:"0px",transform:"rotateX(90deg)"}},ProductTextGenerator.prototype.getAttributeValue=function(t){var e=this.model.data.productattributevalues.beans;try{for(var s in e)if(e.hasOwnProperty(s)&&e[s].productattribute_id==t)return e[s].pratvalue}catch(t){return""}return""},ProductTextGenerator.prototype.getvalues=function(t){var e,s=[];for(e in this.attributes)this.attributes.hasOwnProperty(e)&&this.attributes[e].contentcode==t&&s.push({id:this.attributes[e].id,name:this.attributes[e].name});return s},__decorate([core_1.Component({selector:"product-text-generator",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': requiredopen}"><h3 class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglerequired()"><system-utility-icon [icon]="\'switch\'" [size]="\'x-small\'" [addclasses]="\'slds-section__title-action-icon slds-button__icon slds-button__icon_left\'"></system-utility-icon><span class="slds-truncate" title="Section Title">Text Generator</span></button></h3><div class="slds-p-vertical--medium slds-p-horizontal--medium"><div class="slds-grid slds-p-bottom--xx-small"><div class="slds-form-element slds-size--1-of-2 slds-p-right--x-small"><div class="slds-form-element__control"><label class="slds-form-element__label"><field-label [fieldname]="\'name\'"></field-label></label><div class="slds-select_container"><select class="slds-select" [(ngModel)]="model.data.name" [disabled]="productnames.length == 0"><option *ngFor="let productname of productnames" [value]="productname">{{productname}}</option></select></div></div></div><div class="slds-form-element slds-size--1-of-2 slds-p-left--x-small"><label class="slds-form-element__label">Short Text</label><div class="slds-form-element__control slds-p-vertical--xx-small"><input type="text" disabled class="slds-input" style="font-family: monospace;" [ngModel]="productText"></div></div></div><div class="slds-form-element"><label class="slds-form-element__label">Longtext</label><div class="slds-form-element__control"><textarea readonly class="slds-textarea" [(ngModel)]="longText"></textarea></div></div></div><div class="slds-form slds-p-around--x-small" [ngStyle]="getOpenStyle()"><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" width="50%"><div class="slds-truncate">Element</div></th><th scope="col" width="50%"><div class="slds-truncate">Value(s)</div></th></tr></thead><tbody><tr><td>Eigenschaft 1</td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="textElements.E1"><option *ngFor="let e1value of getvalues(\'E1\')" [value]="e1value.id">{{e1value.name}}</option></select></div></div></div></td></tr><tr><td>Eigenschaft 2</td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="textElements.E2"><option *ngFor="let e2value of getvalues(\'E2\')" [value]="e2value.id">{{e2value.name}}</option></select></div></div></div></td></tr><tr><td>Gewicht/QualitÃ¤t/FolienstÃ¤rke</td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="textElements.Q"><option *ngFor="let qvalue of getvalues(\'Q\')" [value]="qvalue.id">{{qvalue.name}}</option></select></div></div></div></td></tr></tbody></table></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,core_1.ElementRef,services_1.model,services_1.view])],ProductTextGenerator)}();exports.ProductTextGenerator=ProductTextGenerator;var ProductGroupsContentCodeAssignments=function(){function ProductGroupsContentCodeAssignments(t,e,s,i,r){this.language=t,this.model=e,this.navigation=s,this.backend=i,this.toast=r,this.dialogvisible=!1,this.assignedAttributes=[],this.allAttributes=[],this.selectedAttribute="",this.isLoading=!1}return Object.defineProperty(ProductGroupsContentCodeAssignments.prototype,"addDisabled",{get:function(){var e=this;if(!this.selectedAttribute)return!0;var s=!1;return this.assignedAttributes.some(function(t){if(t.id==e.selectedAttribute)return s=!0}),s},enumerable:!1,configurable:!0}),ProductGroupsContentCodeAssignments.prototype.getDisplay=function(){return this.model.data.acl&&!this.model.data.acl.edit||this.model.isEditing?"none":"inherit"},ProductGroupsContentCodeAssignments.prototype.editDisable=function(t){return t!=this.model.id},ProductGroupsContentCodeAssignments.prototype.showDialog=function(){var s=this;this.assignedAttributes=[],this.isLoading=!0,this.backend.getRequest("module/ProductGroups/"+this.model.id+"/productattributes/textgenerator").subscribe(function(t){for(var e in t.assignedattributes)t.assignedattributes.hasOwnProperty(e)&&s.assignedAttributes.push(t.assignedattributes[e]);s.assignedAttributes.sort(function(t,e){return t.name>e.name?1:-1}),s.allAttributes=t.allattributes,s.allAttributes.sort(function(t,e){return t.name>e.name?1:-1}),s.isLoading=!1}),this.dialogvisible=!0},ProductGroupsContentCodeAssignments.prototype.hideDialog=function(){this.dialogvisible=!1},ProductGroupsContentCodeAssignments.prototype.save=function(){var e=this;this.isLoading=!0;for(var t=[],s=0,i=this.assignedAttributes;s<i.length;s++){var r=i[s];r.productgroup_id===this.model.id&&t.push({id:r.id,contentcode:r.contentcode,contentcode2:r.contentcode2,contentprefix:r.contentprefix})}this.backend.postRequest("module/ProductGroups/"+this.model.id+"/productattributes/textgenerator",{},t).subscribe(function(t){e.hideDialog(),e.toast.sendToast("changes saved"),e.isLoading=!1})},ProductGroupsContentCodeAssignments.prototype.addAttribute=function(){var e=this;this.allAttributes.some(function(t){if(t.id==e.selectedAttribute)return e.assignedAttributes.push({id:t.id,name:t.name,contentcode:"",contentcode2:"",contentprefix:"",productgroup_id:e.model.id}),!0})},ProductGroupsContentCodeAssignments.prototype.removeAttribute=function(e){var s=this,i=0;this.assignedAttributes.some(function(t){return t.id==e.id?(s.assignedAttributes.splice(i,1),!0):void i++})},__decorate([core_1.Component({template:'<span (click)="showDialog()"><system-label label="LBL_CONTENTCODE"></system-label></span><ng-container *ngIf="dialogvisible"><div role="dialog" tabindex="-1" class="slds-modal slds-modal--large slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--default"><h2 class="slds-text-heading--medium"><system-label label="LBL_CONTENTCODE_LONG"></system-label></h2></div><div class="slds-modal__content slds-theme--default slds-scrollable" style="height:80%;"><div *ngIf="!isLoading; else loading"><div class="slds-grid slds-p-around--medium slds-grid_vertical-align-center"><div class="slds-p-horizontal--x-small">Add Attribute</div><select class="slds-select slds-size--1-of-2" [(ngModel)]="selectedAttribute"><option *ngFor="let attribute of allAttributes" [value]="attribute.id">{{attribute.name}}</option></select><button class="slds-col_bump-left slds-button slds-button--neutral" [disabled]="addDisabled" (click)="addAttribute()"><system-label label="LBL_ADD"></system-label></button></div><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div style="max-width: 200px;" class="slds-truncate"><system-label label="LBL_LIST_PRODUCTATTRIBUTES_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONTENTCODE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONTENTCODE2"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONTENTPREFIX"></system-label></div></th><th class="slds-cell-shrink" scope="col"></th></tr></thead><tbody><tr *ngFor="let attribute of assignedAttributes"><td><div class="slds-truncate" style="max-width: 200px;" [title]="attribute.name">{{attribute.name}}</div></td><td><div class="slds-truncate"><div class="slds-select_container"><select [disabled]="editDisable(attribute.productgroup_id)" class="slds-select" [(ngModel)]="attribute.contentcode"><option value="A">A</option><option value="E1">E1</option><option value="E2">E2</option><option value="F">F</option><option value="N">N</option><option value="Q">Q</option><option value="S">S</option><option value="G">G</option></select></div></div></td><td><ng-container [ngSwitch]="attribute.contentcode"><select [disabled]="editDisable(attribute.productgroup_id)" *ngSwitchCase="\'F\'" class="slds-select" [(ngModel)]="attribute.contentcode2"><option value="D">D</option><option value="F">F</option></select><select [disabled]="editDisable(attribute.productgroup_id)" *ngSwitchCase="\'G\'" class="slds-select" [(ngModel)]="attribute.contentcode2"><option value="D">Dimension</option><option value="N">Name</option><option value="C">Color</option><option value="C">Color</option><option value="Q">Quality</option></select><div *ngSwitchCase="\'A\'" class="slds-truncate"><input [disabled]="editDisable(attribute.productgroup_id)" type="number" class="slds-input" [(ngModel)]="attribute.contentcode2"></div></ng-container></td><td><div *ngIf="attribute.contentcode == \'A\' || attribute.contentcode == \'G\'" class="slds-truncate"><input [disabled]="editDisable(attribute.productgroup_id)" type="text" class="slds-input" [(ngModel)]="attribute.contentprefix"></div></td><td><button *ngIf="!editDisable(attribute.productgroup_id)" class="slds-button slds-button--icon" (click)="removeAttribute(attribute)"><system-button-icon [icon]="\'delete\'"></system-button-icon></button></td></tr></tbody></table></div><ng-template #loading><div style="height:100%" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div></ng-template></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="hideDialog()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div></div><div class="slds-backdrop slds-backdrop--open"></div></ng-container>',host:{class:"slds-button slds-button--neutral","[style.display]":"getDisplay()"},styles:[":host >>> span {cursor:pointer;}"]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.navigation,services_1.backend,services_1.toast])],ProductGroupsContentCodeAssignments)}();exports.ProductGroupsContentCodeAssignments=ProductGroupsContentCodeAssignments;var ProductGroupsLongtextCodeAssignments=function(){function ProductGroupsLongtextCodeAssignments(t,e,s,i,r){this.language=t,this.model=e,this.navigation=s,this.backend=i,this.toast=r,this.dialogvisible=!1,this.assignedAttributes=[],this.allAttributes=[],this.selectedAttribute="",this.isLoading=!1}return Object.defineProperty(ProductGroupsLongtextCodeAssignments.prototype,"addDisabled",{get:function(){var e=this;if(!this.selectedAttribute)return!0;var s=!1;return this.assignedAttributes.some(function(t){if(t.id==e.selectedAttribute)return s=!0}),s},enumerable:!1,configurable:!0}),ProductGroupsLongtextCodeAssignments.prototype.getDisplay=function(){return this.model.data.acl&&!this.model.data.acl.edit||this.model.isEditing?"none":"inherit"},ProductGroupsLongtextCodeAssignments.prototype.editDisable=function(t){return t!=this.model.id},ProductGroupsLongtextCodeAssignments.prototype.showDialog=function(){var s=this;this.assignedAttributes=[],this.isLoading=!0,this.backend.getRequest("module/ProductGroups/"+this.model.id+"/productattributes/longtextgenerator").subscribe(function(t){for(var e in t.assignedattributes)t.assignedattributes.hasOwnProperty(e)&&s.assignedAttributes.push(t.assignedattributes[e]);s.assignedAttributes.sort(function(t,e){return t.name>e.name?1:-1}),s.allAttributes=t.allattributes,s.allAttributes.sort(function(t,e){return t.name>e.name?1:-1}),s.isLoading=!1}),this.dialogvisible=!0},ProductGroupsLongtextCodeAssignments.prototype.hideDialog=function(){this.dialogvisible=!1},ProductGroupsLongtextCodeAssignments.prototype.save=function(){var e=this;this.isLoading=!0;for(var t=[],s=0,i=this.assignedAttributes;s<i.length;s++){var r=i[s];r.productgroup_id===this.model.id&&t.push({id:r.id,contentcode:r.contentcode,contentcode2:r.contentcode2,textpattern:r.textpattern,sequence:r.sequence})}this.backend.postRequest("module/ProductGroups/"+this.model.id+"/productattributes/longtextgenerator",{},t).subscribe(function(t){e.hideDialog(),e.toast.sendToast("changes saved"),e.isLoading=!1})},ProductGroupsLongtextCodeAssignments.prototype.addAttribute=function(){var e=this;this.allAttributes.some(function(t){if(t.id==e.selectedAttribute)return e.assignedAttributes.push({id:t.id,name:t.name,contentcode:"",contentcode2:"",textpattern:"",sequence:"",productgroup_id:e.model.id}),!0})},ProductGroupsLongtextCodeAssignments.prototype.removeAttribute=function(e){var s=this,i=0;this.assignedAttributes.some(function(t){return t.id==e.id?(s.assignedAttributes.splice(i,1),!0):void i++})},__decorate([core_1.Component({template:'<span (click)="showDialog()">Longtext</span><ng-container *ngIf="dialogvisible"><div role="dialog" tabindex="-1" class="slds-modal slds-modal--large slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--default"><h2 class="slds-text-heading--medium">Longtextgenerator</h2></div><div class="slds-modal__content slds-theme--default slds-scrollable" style="height:80%;"><div *ngIf="!isLoading; else loading"><div class="slds-grid slds-p-around--medium slds-grid_vertical-align-center"><div class="slds-p-horizontal--x-small">Add Attribute</div><select class="slds-select slds-size--1-of-2" [(ngModel)]="selectedAttribute"><option *ngFor="let attribute of allAttributes" [value]="attribute.id">{{attribute.name}}</option></select><button class="slds-col_bump-left slds-button slds-button--neutral" [disabled]="addDisabled" (click)="addAttribute()"><system-label label="LBL_ADD"></system-label></button></div><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div style="max-width: 200px;" class="slds-truncate"><system-label label="LBL_LIST_PRODUCTATTRIBUTES_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONTENTCODE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONTENTCODE2"></system-label></div></th><th scope="col"><div class="slds-truncate">Text</div></th><th scope="col"><div class="slds-truncate">Sequence</div></th><th class="slds-cell-shrink" scope="col"></th></tr></thead><tbody><tr *ngFor="let attribute of assignedAttributes"><td><div class="slds-truncate" style="max-width: 200px;" [title]="attribute.name">{{attribute.name}}</div></td><td><div class="slds-truncate"><div class="slds-select_container"><select [disabled]="editDisable(attribute.productgroup_id)" class="slds-select" [(ngModel)]="attribute.contentcode"><option value="G">G</option><option value="E">E</option></select></div></div></td><td><ng-container [ngSwitch]="attribute.contentcode"><select [disabled]="editDisable(attribute.productgroup_id)" *ngSwitchCase="\'G\'" class="slds-select" [(ngModel)]="attribute.contentcode2"><option value="D">Dimension</option><option value="N">Name</option><option value="C">Color</option><option value="C">Color</option><option value="Q">Quality</option></select><select [disabled]="editDisable(attribute.productgroup_id)" *ngSwitchCase="\'E\'" class="slds-select" [(ngModel)]="attribute.contentcode2"><option value="P">ProjectNr</option></select></ng-container></td><td><div class="slds-truncate"><input [disabled]="editDisable(attribute.productgroup_id)" type="text" class="slds-input" [(ngModel)]="attribute.textpattern"></div></td><td><div class="slds-truncate"><input [disabled]="editDisable(attribute.productgroup_id)" type="text" class="slds-input" [(ngModel)]="attribute.sequence"></div></td><td><button *ngIf="!editDisable(attribute.productgroup_id)" class="slds-button slds-button--icon" (click)="removeAttribute(attribute)"><system-button-icon [icon]="\'delete\'"></system-button-icon></button></td></tr></tbody></table></div><ng-template #loading><div style="height:100%" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div></ng-template></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="hideDialog()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div></div><div class="slds-backdrop slds-backdrop--open"></div></ng-container>',host:{class:"slds-button slds-button--neutral","[style.display]":"getDisplay()"},styles:[":host >>> span {cursor:pointer;}"]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.navigation,services_1.backend,services_1.toast])],ProductGroupsLongtextCodeAssignments)}();exports.ProductGroupsLongtextCodeAssignments=ProductGroupsLongtextCodeAssignments;var ProductGroupManagerDetailsAttributesValidationItem=function(){function t(t,e,s,i,r){this.language=t,this.backend=e,this.metadata=s,this.view=i,this.model=r,this.listFields=[],this.view.displayLabels=!1}return Object.defineProperty(t.prototype,"canEdit",{get:function(){return this.model.checkAccess("edit")},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.view.isEditable=this.canEdit,this.model.module="ProductAttributeValueValidations",this.model.id=this.item.id,this.model.data=this.item},t.prototype.trackByFn=function(t,e){return e.id},__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"item",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],t.prototype,"listFields",void 0),__decorate([core_1.Component({selector:"[product-group-manager-details-attributes-validation-item]",template:'<td *ngFor="let listField of listFields; trackBy: trackByFn" [attr.data-label]="language.getFieldDisplayName(model.module, listField.field)" scope="row"><field-container [field]="listField.field" [fieldconfig]="listField.fieldconfig" [fielddisplayclass]="\'slds-truncate slds-p-horizontal--x-small\'"></field-container></td><td role="gridcell" class="slds-cell-shrink" *ngIf="canEdit"><object-action-menu [buttonsize]="\'small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.metadata,services_1.view,services_1.model])],t)}();exports.ProductGroupManagerDetailsAttributesValidationItem=ProductGroupManagerDetailsAttributesValidationItem;var ProductGroupManagerDetailsAttributesValidation=function(){function ProductGroupManagerDetailsAttributesValidation(t,e,s,i,r){this.language=t,this.backend=e,this.model=s,this.metadata=i,this.relatedmodels=r,this.parent={},this.listFields=[],this.model.module="ProductAttributeValueValidations"}return Object.defineProperty(ProductGroupManagerDetailsAttributesValidation.prototype,"canEdit",{get:function(){return this.metadata.checkModuleAcl(this.model.module,"create")},enumerable:!1,configurable:!0}),Object.defineProperty(ProductGroupManagerDetailsAttributesValidation.prototype,"tableContainerStyle",{get:function(){return{"max-height":"calc(100% - "+this.buttonContainer.element.nativeElement.getBoundingClientRect().height+"px","min-height":"10px"}},enumerable:!1,configurable:!0}),ProductGroupManagerDetailsAttributesValidation.prototype.ngOnInit=function(){var t=this.metadata.getComponentConfig("ProductGroupManagerDetailsAttributesValidation","ProductGroups");this.listFields=t&&t.fieldset?this.metadata.getFieldSetFields(t.fieldset):[]},ProductGroupManagerDetailsAttributesValidation.prototype.addItem=function(){var e=this;this.model.id="",this.model.addModel("",this.parent).subscribe(function(t){"object"==typeof t&&(e.relatedmodels.items=__spreadArrays(e.relatedmodels.items,[t]))})},ProductGroupManagerDetailsAttributesValidation.prototype.trackByFn=function(t,e){return e.id},ProductGroupManagerDetailsAttributesValidation.prototype.ngOnDestroy=function(){this.relatedmodels.stopSubscriptions()},__decorate([core_1.ViewChild("buttoncontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductGroupManagerDetailsAttributesValidation.prototype,"buttonContainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ProductGroupManagerDetailsAttributesValidation.prototype,"parent",void 0),__decorate([core_1.Component({selector:"product-group-manager-details-attributes-validation",template:'<div class="slds-box--border slds-m-top--x-small"><table class="slds-table slds-table--bordered slds-table--fixed-layout slds-max-medium-table--stacked-horizontal slds-table_header-fixed" role="grid"><thead><tr class="slds-text-title_caps"><th scope="col" *ngFor="let item of listFields; trackBy: trackByFn"><div class="slds-truncate slds-grid slds-grid_vertical-align-center slds-p-around--x-small"><system-label-fieldname [module]="\'ProductAttributeValueValidations\'" [field]="item.field" [fieldconfig]="item.fieldconfig" length="short"></system-label-fieldname></div></th><th class="slds-cell-shrink"></th></tr></thead><tbody *ngIf="!relatedmodels.isloading"><tr *ngFor="let item of relatedmodels.items; trackBy: trackByFn" product-group-manager-details-attributes-validation-item [listFields]="listFields" [item]="item" class="slds-hint-parent"></tr></tbody><tbody system-table-stencils *ngIf="relatedmodels.isloading" [columns]="listFields?.length" [tools]="true" [rows]="3"></tbody></table><div #buttoncontainer><div *ngIf="canEdit" class="slds-p-around--x-small"><button class="slds-button slds-button--icon slds-align--absolute-center slds-p-around--xx-small" title="add item" (click)="addItem()"><system-utility-icon icon="new" size="x-small"></system-utility-icon></button></div></div></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.model,services_1.metadata,services_1.relatedmodels])],ProductGroupManagerDetailsAttributesValidation)}();exports.ProductGroupManagerDetailsAttributesValidation=ProductGroupManagerDetailsAttributesValidation;var ProductGroupManagerDetailsAttributesItem=function(){function ProductGroupManagerDetailsAttributesItem(t,e,s,i,r,o){this.language=t,this.model=e,this.metadata=s,this.router=i,this.relatedmodels=r,this.productFinder=o,this.detailsItems=[],this.isOpen=!1}return Object.defineProperty(ProductGroupManagerDetailsAttributesItem.prototype,"thisModel",{get:function(){return{id:this.model.id,module:this.model.module,data:this.model.data}},enumerable:!1,configurable:!0}),Object.defineProperty(ProductGroupManagerDetailsAttributesItem.prototype,"showParent",{get:function(){return this.attribute.parent_id!=this.productFinder.searchfocus.object.id&&this.attribute.parent_name&&0<this.attribute.parent_name.length},enumerable:!1,configurable:!0}),Object.defineProperty(ProductGroupManagerDetailsAttributesItem.prototype,"iconStyle",{get:function(){return this.isOpen?{}:{transform:"scale(1, -1)"}},enumerable:!1,configurable:!0}),ProductGroupManagerDetailsAttributesItem.prototype.ngOnInit=function(){this.model.module="ProductAttributes",this.model.id=this.attribute.id,this.model.data=this.attribute,this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.loaditems=-1,this.relatedmodels.relatedModule="ProductAttributeValueValidations"},ProductGroupManagerDetailsAttributesItem.prototype.ngAfterViewInit=function(){for(var e=this,t=this.metadata.getComponentConfig("ProductGroupManagerDetailsAttributesItem","ProductGroups"),s=0,i=t&&t.componentset?this.metadata.getComponentSetObjects(t.componentset):[];s<i.length;s++){var r=i[s];this.metadata.addComponent(r.component,this.detailsContainer).subscribe(function(t){e.detailsItems.push(t)})}},ProductGroupManagerDetailsAttributesItem.prototype.goDetails=function(){this.router.navigate(["module/ProductAttributes/"+this.attribute.id])},ProductGroupManagerDetailsAttributesItem.prototype.toggleOpen=function(t){this.isOpen=!this.isOpen,this.isOpen&&this.relatedmodels.getData(),t.stopPropagation()},__decorate([core_1.ViewChild("detailscontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductGroupManagerDetailsAttributesItem.prototype,"detailsContainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ProductGroupManagerDetailsAttributesItem.prototype,"attribute",void 0),__decorate([core_1.Component({selector:"product-group-manager-details-attributes-item",template:'<article class="slds-card slds-card_boundary slds-m-bottom--small"><div class="slds-card__header slds-grid slds-grid--align-spread"><header class="slds-media slds-media--center slds-has-flexi-truncate"><system-icon [module]="model.module" [size]="\'small\'"></system-icon><div class="slds-media__body"><h2 class="slds-card__header-title"><a href="javascript:void(0);" class="slds-card__header-link slds-truncate" (click)="goDetails()">{{attribute.summary_text}}</a> <span *ngIf="showParent" class="slds-text-color--inverse-weak">/ {{attribute.parent_name}}</span></h2></div></header><system-utility-icon class="slds-m-horizontal--xx-small" icon="up" size="x-small" (click)="toggleOpen($event)" [ngStyle]="iconStyle" style="transition: .5s;"></system-utility-icon></div><div [class.slds-hidden]="!isOpen" [style.height]="!isOpen ? \'0\':\'initial\'" class="slds-card__body slds-m-bottom--none"><div class="slds-grid slds-p-bottom--small slds-p-top--small slds-wrap"><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-2"><div #detailscontainer></div></div><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-2"><product-group-manager-details-attributes-validation [parent]="thisModel"></product-group-manager-details-attributes-validation></div></div></div></article>',providers:[services_1.model,services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata,router_1.Router,services_1.relatedmodels,productfinder])],ProductGroupManagerDetailsAttributesItem)}();exports.ProductGroupManagerDetailsAttributesItem=ProductGroupManagerDetailsAttributesItem;var ProductGroupManagerDetailsAttributesAddButton=function(){function t(t,e,s,i){this.language=t,this.backend=e,this.metadata=s,this.model=i,this.changes=new core_1.EventEmitter,this.model.module="ProductAttributes"}return t.prototype.addItem=function(){var e=this;this.model.id="",this.model.addModel().subscribe(function(t){"object"==typeof t&&e.changes.emit(t)})},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"changes",void 0),__decorate([core_1.Component({selector:"product-group-manager-details-attributes-add-button",template:'<button class="slds-button slds-button--icon" (click)="addItem()"><system-utility-icon icon="new" size="x-small" [title]="language.getLabel(\'LBL_ADD\')"></system-utility-icon></button>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.metadata,services_1.model])],t)}();exports.ProductGroupManagerDetailsAttributesAddButton=ProductGroupManagerDetailsAttributesAddButton;var ProductGroupManagerDetailsAttributes=function(){function ProductGroupManagerDetailsAttributes(t,e,s,i,r,o,a){this.language=t,this.backend=e,this.metadata=s,this.productFinder=i,this.broadcast=r,this.relatedmodels=o,this.model=a,this.fields=[],this.attributes=[],this.filterKeyword="",this.allExpanded=!1,this.isLoading=!0,this.modelSubscription=new rxjs_1.Subscription,this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule="ProductAttributes",this.saveSubscriber()}return Object.defineProperty(ProductGroupManagerDetailsAttributes.prototype,"filteredAttributes",{get:function(){var e=this;return this.attributes.filter(function(t){return 0==e.filterKeyword.length||t.summary_text.toLowerCase().includes(e.filterKeyword.toLowerCase())})},enumerable:!1,configurable:!0}),Object.defineProperty(ProductGroupManagerDetailsAttributes.prototype,"canAdd",{get:function(){return this.metadata.checkModuleAcl(this.model.module,"create")},enumerable:!1,configurable:!0}),ProductGroupManagerDetailsAttributes.prototype.ngOnInit=function(){var e=this;this.backend.getRequest("productgroups/"+this.model.id+"/productattributes/direct").subscribe(function(t){e.attributes=e.sortAttributes(t)||[],e.isLoading=!1},function(t){return e.isLoading=!1})},ProductGroupManagerDetailsAttributes.prototype.ngOnDestroy=function(){this.modelSubscription.unsubscribe()},ProductGroupManagerDetailsAttributes.prototype.trackByFn=function(t,e){return e.id},ProductGroupManagerDetailsAttributes.prototype.sortAttributes=function(t){return t.sort(function(t,e){return+t.sort_sequence>+e.sort_sequence?1:-1})},ProductGroupManagerDetailsAttributes.prototype.saveSubscriber=function(){var i=this;this.modelSubscription=this.broadcast.message$.subscribe(function(t){var s=t.messagedata;"ProductAttributes"==s.module&&"model.save"==t.messagetype&&(i.attributes.some(function(t,e){return t.id==s.id&&(i.attributes[e]=s.data)}),i.attributes=i.sortAttributes(i.attributes))})},ProductGroupManagerDetailsAttributes.prototype.handleAddEvent=function(t){t.parent_name=this.productFinder.searchfocus.object.id!=this.model.id?this.model.data.summary_text:"",t.parent_id=this.model.id,this.attributes=__spreadArrays(this.attributes,[t]),this.attributes=this.sortAttributes(this.attributes),this.relatedmodels.addItems([t])},__decorate([core_1.ViewChild("buttoncontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductGroupManagerDetailsAttributes.prototype,"buttonContainer",void 0),__decorate([core_1.ViewChild("itemcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ProductGroupManagerDetailsAttributes.prototype,"itemContainer",void 0),__decorate([core_1.Component({selector:"product-group-manager-details-attributes",template:'<div class="slds-p-bottom--small slds-grid slds-grid--align-spread slds-p-horizontal--xx-small"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left slds-global-search__form-element" role="none"><input type="text" class="slds-input" [placeholder]="language.getLabel(\'LBL_SEARCH\')" [(ngModel)]="filterKeyword"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--left"></system-utility-icon></div><div class="slds-grid slds-grid--vertical-align-center slds-m-left--small"><product-group-manager-details-attributes-add-button *ngIf="canAdd" (changes)="handleAddEvent($event)"></product-group-manager-details-attributes-add-button></div></div><div class="slds-border--top slds-p-top--small slds-p-horizontal--xx-small"><system-spinner *ngIf="isLoading"></system-spinner><product-group-manager-details-attributes-item *ngFor="let attribute of filteredAttributes; trackBy: trackByFn" [attribute]="attribute" class="slds-size--1-of-1"></product-group-manager-details-attributes-item></div>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.metadata,productfinder,services_1.broadcast,services_1.relatedmodels,services_1.model])],ProductGroupManagerDetailsAttributes)}();exports.ProductGroupManagerDetailsAttributes=ProductGroupManagerDetailsAttributes;var ProductUOMConversions=function(){function ProductUOMConversions(t,e,s,i,r,o){this.language=t,this.metadata=e,this.model=s,this.backend=i,this.configuration=r,this.view=o,this.uomUnits=[],this.noUnits=!1,this.componentconfig={}}return Object.defineProperty(ProductUOMConversions.prototype,"uomConversions",{get:function(){var t=this.model.getField("uomconversions");return t&&t.beans?_.toArray(t.beans).filter(function(t){return"0"==t.deleted||!1===t.deleted}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(ProductUOMConversions.prototype,"baseUom",{get:function(){var e=this;return this.uomUnits.find(function(t){return t.id==e.model.getField(e.fieldBaseUomId)})},enumerable:!1,configurable:!0}),Object.defineProperty(ProductUOMConversions.prototype,"baseUomName",{get:function(){return this.model.getField(this.fieldBaseUom)},enumerable:!1,configurable:!0}),Object.defineProperty(ProductUOMConversions.prototype,"canAdd",{get:function(){return this.baseUom&&!this.noUnits},enumerable:!1,configurable:!0}),Object.defineProperty(ProductUOMConversions.prototype,"editMode",{get:function(){return this.view.isEditMode()},enumerable:!1,configurable:!0}),Object.defineProperty(ProductUOMConversions.prototype,"editable",{get:function(){return this.model.checkAccess("edit")&&this.view.isEditable},enumerable:!1,configurable:!0}),ProductUOMConversions.prototype.ngOnInit=function(){this.getUomFieldDefs(),this.getUomUnits(),this.cloneParentConversions()},ProductUOMConversions.prototype.setBaseUom=function(e){var t=this.uomUnits.find(function(t){return t.id==e});this.model.setField(this.fieldBaseUom,t?t.label:""),this.model.setField(this.fieldBaseUomId,t?t.id:"")},ProductUOMConversions.prototype.filteredUomUnits=function(r){var o=this,t=this.uomUnits.filter(function(i){var t=o.baseUom&&(o.baseUom.id==i.id||"none"!=i.dimensions&&o.baseUom.dimensions==i.dimensions);return!o.uomConversions.some(function(e){if(r.id==e.id)return!1;var t=i.id==e.uom_unit,s=o.uomUnits.find(function(t){return t.id==e.uom_unit}),s=!(!s||"none"==i.dimensions||!s.dimensions)&&i.dimensions==s.dimensions;return t||s})&&!t});return this.noUnits=1==t.length,t},ProductUOMConversions.prototype.getUomFieldDefs=function(){this.fieldBaseUom=this.componentconfig.baseuomfield||this.fieldBaseUom;var t=this.metadata.getFieldDefs(this.model.module,this.fieldBaseUom);this.fieldBaseUomId=t&&t.id_name?t.id_name:this.fieldBaseUomId},ProductUOMConversions.prototype.getUomUnits=function(){this.uomUnits=this.configuration.getData("uomunits")||[]},ProductUOMConversions.prototype.cloneParentConversions=function(){var t,e,s=this;this.model.isNew&&0<this.uomConversions.length&&(t=this.model.data.uomconversions.beans,e={},_.each(t,function(t){t.id=s.model.generateGuid(),e[t.id]=t}),this.model.data.uomconversions.beans=e)},ProductUOMConversions.prototype.addConversion=function(){var t;this.canAdd&&(this.view.setEditMode(),t=this.model.generateGuid(),this.model.getFieldValue("uomconversion")||(this.model.data.uomconversions={beans:{}}),this.model.data.uomconversions.beans[t]={id:t,quantity:"1",conversion_factor:"",uom_unit:"",reference_uom_unit:this.baseUom.id,deleted:"0",assigned_user_id:this.model.getFieldValue("assigned_user_id")})},ProductUOMConversions.prototype.deleteConversion=function(t){this.model.data.uomconversions.beans[t].deleted="1"},ProductUOMConversions.prototype.getConversionUomLabel=function(e){var t=this.uomUnits.find(function(t){return t.id==e});return t?this.language.getLabel(t.label):""},ProductUOMConversions.prototype.trackByFn=function(t,e){return e.id},__decorate([core_1.Component({selector:"product-uom-conversions",template:'<system-section titlelabel="LBL_UNIT_OF_MEASURE_CONVERSIONS"><div class="slds-grid slds-p-vertical--x-small"><div class="slds-grid slds-grid--vertical-align-center slds-m-left--small"><field-label [fieldname]="fieldBaseUom">:</field-label><field-generic-display *ngIf="!editMode || uomConversions.length > 0" [editable]="editable && uomConversions.length == 0"><system-label [label]="baseUomName"></system-label></field-generic-display><select *ngIf="editMode && uomConversions.length == 0" class="slds-select" (ngModelChange)="setBaseUom($event)" [ngModel]="model.data.base_uom_id"><option></option><option *ngFor="let uomUnit of uomUnits; trackBy: trackByFn" [value]="uomUnit.id"><system-label [label]="uomUnit.label"></system-label></option></select></div><div class="slds-p-right--small slds-col_bump-left"><button class="slds-button slds-button--neutral" title="add item" [disabled]="!canAdd" (click)="addConversion()"><system-label label="LBL_ADD"></system-label> <system-label-modulename module="UOMConversions" [singular]="true"></system-label-modulename></button></div></div><table *ngIf="uomConversions?.length > 0 && baseUom" class="slds-table slds-table_bordered slds-table_cell-buffer slds-table--fixed-layout slds-m-bottom--small"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_QUANTITY"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_UNIT_OF_MEASURE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONVERSION_FACTOR"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_REFERENCE_UNIT_OF_MEASURE"></system-label></div></th><th class="slds-cell-shrink"></th></tr></thead><tbody><tr *ngFor="let uomConversion of uomConversions; trackBy: trackByFn"><td><div class="slds-truncate"><field-generic-display *ngIf="!editMode" [editable]="editable">{{uomConversion.quantity}}</field-generic-display><system-input-number *ngIf="editMode" [(ngModel)]="uomConversion.quantity"></system-input-number></div></td><td><div class="slds-truncate"><field-generic-display *ngIf="!editMode" [editable]="editable">{{getConversionUomLabel(uomConversion.uom_unit)}}</field-generic-display><div *ngIf="editMode" class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="uomConversion.uom_unit"><option></option><option *ngFor="let uomUnit of filteredUomUnits(uomConversion); trackBy: trackByFn" [value]="uomUnit.id"><system-label [label]="uomUnit.label"></system-label></option></select></div></div></div></div></td><td><div class="slds-truncate"><field-generic-display *ngIf="!editMode" [editable]="editable">{{uomConversion.conversion_factor}}</field-generic-display><system-input-number *ngIf="editMode" [(ngModel)]="uomConversion.conversion_factor"></system-input-number></div></td><td><field-generic-display *ngIf="!editMode" [editable]="editable">{{getConversionUomLabel(uomConversion.reference_uom_unit)}}</field-generic-display><div *ngIf="editMode" class="slds-truncate"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" disabled><option [value]="baseUom.id"><system-label [label]="baseUom.label"></system-label></option></select></div></div></div></div></td><td class="slds-shrink"><button *ngIf="editMode" class="slds-button slds-button--icon" title="delete item" (click)="deleteConversion(uomConversion.id)"><system-utility-icon icon="delete" size="x-small"></system-utility-icon></button></td></tr></tbody></table><div *ngIf="baseUom && uomConversions?.length == 0" class="slds-align--absolute-center slds-p-around_medium"><system-label label="MSG_NO_RECORDS_FOUND"></system-label></div><div *ngIf="!baseUom" class="slds-align--absolute-center slds-p-around_medium"><system-label label="MSG_SELECT_UOM"></system-label></div></system-section>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.backend,services_1.configurationService,services_1.view])],ProductUOMConversions)}();exports.ProductUOMConversions=ProductUOMConversions;var ModuleProducts=function(){function ModuleProducts(){}return __decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,objectfields_1.ObjectFields,globalcomponents_1.GlobalComponents,objectcomponents_1.ObjectComponents,systemcomponents_1.SystemComponents,directives_1.DirectivesModule],declarations:[ProductManager,ProductGroupManager,ProductGroupManagerDetails,ProductGroupManagerDetailsAttributesValidationItem,ProductGroupManagerDetailsAttributesValidation,ProductGroupManagerDetailsAttributesAddButton,ProductGroupManagerDetailsAttributesItem,ProductGroupManagerDetailsAttributes,ProductBrowser,ProductBrowserTree,ProductGroupManagerTree,ProductBrowserVariants,ProductBrowserVariant,ProductBrowserAttributes,ProductBrowserAttributeVCSearch,ProductBrowserAttributeDISearch,ProductBrowserAttributeNSearch,ProductBrowserAttributeFSearch,ProductBrowserAttributeSSearch,ProductVariantsAttributeVC,ProductVariantsAttributeDI,ProductVariantsAttributeN,ProductVariantsAttributeF,ProductVariantsAttributeSS,ProductVariantsAttributesTable,ProductVariantsAttributes,ProductTextGenerator,ProductGroupsContentCodeAssignments,ProductGroupsLongtextCodeAssignments,ProductUOMConversions]})],ModuleProducts)}();exports.ModuleProducts=ModuleProducts;