/*
SpiceUI 1.1.0

This file is part of SpiceCRM in its "More" Editions and thus is licensed and copyrighted software. Your installation or use of this SpiceCRM file is subject to the license agreement you entered regaridng the use of SpiceCRM with aac services k.s or any of its affiliates and partners.

If you are unsure about your licese agreement please contat aac services k.s. at office@all-about-crm.com

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
*/

"use strict";var __decorate=this&&this.__decorate||function(e,t,i,a){var s,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,a);else for(var c=e.length-1;0<=c;c--)(s=e[c])&&(n=(o<3?s(n):3<o?s(t,i,n):s(t,i))||n);return 3<o&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var common_1=require("@angular/common"),core_1=require("@angular/core"),forms_1=require("@angular/forms"),rxjs_1=require("rxjs"),services_1=require("../../services/services"),directives_1=require("../../directives/directives"),services_2=require("../../services/services"),services_3=require("../../services/services"),services_4=require("../../services/services"),services_5=require("../../services/services"),services_6=require("../../services/services"),services_7=require("../../services/services"),services_8=require("../../services/services"),objectfields_1=require("../../objectfields/objectfields"),globalcomponents_1=require("../../globalcomponents/globalcomponents"),objectcomponents_1=require("../../objectcomponents/objectcomponents"),systemcomponents_1=require("../../systemcomponents/systemcomponents"),ACManagerService=function(){function e(){this.contactccdetails={},this.contactCCDetails$=new core_1.EventEmitter}return Object.defineProperty(e.prototype,"contactCCDetails",{get:function(){return this.contactccdetails},set:function(e){this.contactccdetails=e,this.contactCCDetails$.emit(e)},enumerable:!0,configurable:!0}),e=__decorate([core_1.Injectable()],e)}();exports.ACManagerService=ACManagerService;var accountHierarchy=function(){function e(e){this.backend=e,this.parentId="",this.requestedFields=[],this.members=[],this.membersList=[]}return e.prototype.loadHierachy=function(s,o){var n=this;void 0===s&&(s=this.parentId),void 0===o&&(o=!1);for(var c=new rxjs_1.Subject,e=[],t=0,i=this.requestedFields;t<i.length;t++){var a=i[t];e.push(a.field)}return this.backend.getRequest("AccountsHierachy/"+s+"/"+JSON.stringify(e)).subscribe(function(e){for(var t=0,i=e;t<i.length;t++){var a=i[t];n.members.push({parent_id:s,id:a.id,member_count:a.member_count,expanded:!1,loaded:!1,summary_text:a.summary_text,data:a.data})}n.members.some(function(e){if(e.id===s)return e.loaded=!0,o&&(e.expanded=!0),!0}),n.rebuildMembersList(),c.next(!0),c.complete()}),c.asObservable()},e.prototype.expand=function(t){var i=this;this.members.some(function(e){if(e.id===t)return e.loaded?e.expanded=!0:i.loadHierachy(t,!0),!0}),this.rebuildMembersList()},e.prototype.collapse=function(t){this.members.some(function(e){if(e.id===t)return!(e.expanded=!1)}),this.rebuildMembersList()},e.prototype.rebuildMembersList=function(){this.membersList=[],this.buildMembersList()},e.prototype.buildMembersList=function(e,t){void 0===e&&(e=this.parentId),void 0===t&&(t=0);for(var i=0,a=this.members;i<a.length;i++){var s=a[i];s.parent_id==e&&(this.membersList.push({level:t+1,id:s.id,member_count:parseInt(s.member_count,10),summary_text:s.summary_text,data:s.data,expanded:s.expanded}),s.expanded&&this.buildMembersList(s.id,t+1))}},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_5.backend])],e)}();exports.accountHierarchy=accountHierarchy;var AccountsKPIsOverview=function(){function AccountsKPIsOverview(e,t,i,a,s){var o=this;this.backend=e,this.model=t,this.metadata=i,this.language=a,this.renderer=s,this.years=[],this.limit=0,this.yearto=0,this.companyCodes=[],this.accountKpis={},this.isLoading=!1,this.getYears(),this.isLoading=!0,this.backend.getRequest("/module/AccountKPIs/"+this.model.id+"/getsummary",{yearfrom:this.yearto-this.limit+1,yearto:this.yearto}).subscribe(function(e){o.accountKpis=e.accountkpis,o.companyCodes=e.companycodes,o.isLoading=!1})}return Object.defineProperty(AccountsKPIsOverview.prototype,"tableContainerStyle",{get:function(){return{border:"1px solid #dddbda","border-radius":".25rem",height:"417px"}},enumerable:!0,configurable:!0}),AccountsKPIsOverview.prototype.getYears=function(){var e=this.metadata.getComponentConfig("AccountsKPIsOverview","AccountKPIs");this.yearto=e&&e.yearto?+e.yearto:(new moment).get("year"),this.limit=e&&e.limit?+e.limit:4;for(var t=this.yearto-this.limit+1;t<=this.yearto;t++)this.years.push(t)},AccountsKPIsOverview.prototype.getKPI=function(e,t){try{return this.accountKpis[e][t]?this.accountKpis[e][t]:0}catch(e){return 0}},AccountsKPIsOverview=__decorate([core_1.Component({template:'<div class="slds-container--fluid slds-m-vertical--small"><div *ngIf="companyCodes.length > 0" class="slds-table--header-fixed_container" [ngStyle]="tableContainerStyle"><div class="slds-scrollable--y" style="height:100%;"><table class="slds-table slds-table_bordered slds-table_header-fixed slds-theme--default"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-p-left--x-small slds-truncate slds-cell-fixed slds-grid slds-grid_vertical-align-center" title="companyCode">{{ language.getLabel(\'LBL_COMPANYCODE\') }}</div></th><th scope="col" *ngFor="let year of years"><div class="slds-p-left--x-small slds-truncate slds-cell-fixed slds-grid slds-grid_vertical-align-center" title="year">{{ year }}</div></th><th scope="col"><div class="slds-p-left--x-small slds-truncate slds-cell-fixed slds-grid slds-grid_vertical-align-center" title="currency" style="width: fit-content">{{ language.getLabel(\'LBL_CURRENCY\') }}</div></th></tr></thead><tbody><tr *ngFor="let CCode of companyCodes"><th scope="row" class="slds-theme_shade slds-text-title_caps"><div class="slds-truncate" title="Company Code">{{ CCode.companycode }}</div></th><td scope="row" *ngFor="let year of years"><div class="slds-truncate" title="Revenue">{{ getKPI(CCode.id, year)}}</div></td><th scope="row" class="slds-theme_shade"><div class="slds-truncate slds-text-title_caps" title="EUR">EUR</div></th></tr></tbody></table></div></div><system-spinner *ngIf="isLoading"></system-spinner><div *ngIf="!isLoading && companyCodes.length == 0" class="slds-align_absolute-center slds-p-vertical--medium"><span>No Company Codes found</span></div></div>'}),__metadata("design:paramtypes",[services_5.backend,services_6.model,services_4.metadata,services_2.language,core_1.Renderer2])],AccountsKPIsOverview)}();exports.AccountsKPIsOverview=AccountsKPIsOverview;var AccountCCDetails=function(){function AccountCCDetails(e,t,i,a,s){var o=this;this.language=e,this.metadata=t,this.model=i,this.backend=a,this.view=s,this.tabs=[],this.companyCodes=[],this.activatedTabs=[],this.activeTab=0,this.isLoading=!1,this.isLoading=!0;var n=JSON.stringify(["companycode","date_modified","description","id"]);this.backend.getRequest("/module/CompanyCodes",{fields:n}).subscribe(function(e){o.companyCodes=e.list}),this.isLoading=!1}return Object.defineProperty(AccountCCDetails.prototype,"containerStyle",{get:function(){return{"border-radius":".25rem",border:"1px solid #dddbda"}},enumerable:!0,configurable:!0}),AccountCCDetails.prototype.ngOnInit=function(){this.view.isEditable=!0},AccountCCDetails.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},AccountCCDetails.prototype.getCCDetailsData=function(e){var t=this.model.data.accountccdetails.beans;for(var i in t)if(t[i].companycode_id==e.id)return t[i]},AccountCCDetails.prototype.getContentContainerStyle=function(e){return{display:e!==this.activeTab?"none":"block",padding:".25rem"}},__decorate([core_1.ViewChild("detailscontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],AccountCCDetails.prototype,"detailscontainer",void 0),AccountCCDetails=__decorate([core_1.Component({template:'<div class="slds-grid slds-m-horizontal--small slds-p-around--xxx-small" [ngStyle]="containerStyle"><div *ngIf="!isLoading && companyCodes.length > 0" class="slds-tabs--default"><ul class="slds-tabs--default__nav" role="tablist"><li *ngFor="let CCode of companyCodes; let tabindex = index" class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': tabindex === activeTab}" role="presentation" (click)="setActiveTab(tabindex)"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false">{{ CCode.companycode }}</a></li></ul><ng-container *ngFor="let CCode of companyCodes let tabindex = index"><div class="slds-tabs--default__content slds-show" role="tabpanel" [ngStyle]="getContentContainerStyle(tabindex)"><account-cc-details-tab [ccid]="CCode.id" [ccname]="CCode.companycode" [contactid]="model.id" [data]="getCCDetailsData(CCode)"></account-cc-details-tab></div></ng-container></div><system-spinner *ngIf="isLoading"></system-spinner><div *ngIf="!isLoading && companyCodes.length == 0" class="slds-align_absolute-center slds-p-vertical--medium"><span>No Company Codes found</span></div></div>',providers:[services_3.view]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_6.model,services_5.backend,services_3.view])],AccountCCDetails)}();exports.AccountCCDetails=AccountCCDetails;var AccountCCDetailsTab=function(){function e(e,t,i,a,s,o){this.language=e,this.metadata=t,this.view=i,this.toast=a,this.backend=s,this.model=o,this.data=void 0,this.contactId=void 0,this.ccId=void 0,this.ccName=void 0}return e.prototype.ngOnInit=function(){this.model.module="AccountCCDetails",this.data?(this.model.id=this.data.id,this.model.data=this.data):(this.model.id=this.model.generateGuid(),this.model.data={id:this.model.id,name:this.ccName,contact_id:this.contactId,companycode_id:this.ccId,date_entered:new moment,date_modified:new moment})},e.prototype.ngAfterViewInit=function(){this.buildContainer()},e.prototype.buildContainer=function(){var e=this.metadata.getComponentConfig("AccountCCDetailsTab","Accounts").componentset;if(e)for(var t=this.metadata.getComponentSetObjects(e),i=function(t){a.metadata.addComponent(t.component,a.ccdetailscontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig})},a=this,s=0,o=t;s<o.length;s++){i(o[s])}},__decorate([core_1.ViewChild("ccdetailscontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"ccdetailscontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"data",void 0),__decorate([core_1.Input("contactid"),__metadata("design:type",String)],e.prototype,"contactId",void 0),__decorate([core_1.Input("ccid"),__metadata("design:type",String)],e.prototype,"ccId",void 0),__decorate([core_1.Input("ccname"),__metadata("design:type",String)],e.prototype,"ccName",void 0),e=__decorate([core_1.Component({selector:"account-cc-details-tab",template:"<div #ccdetailscontainer></div>",providers:[services_6.model]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_3.view,services_7.toast,services_5.backend,services_6.model])],e)}();exports.AccountCCDetailsTab=AccountCCDetailsTab;var ContactCCDetails=function(){function ContactCCDetails(e,t,i,a,s,o){var n=this;this.language=e,this.metadata=t,this.model=i,this.acmService=a,this.backend=s,this.view=o,this.tabs=[],this.companyCodes=[],this.activatedTabs=[],this.activeTab=0,this.contactccdetails={},this.isLoading=!1,this.isLoading=!0;var c=JSON.stringify(["companycode","date_modified","description","id"]);this.backend.getRequest("/module/CompanyCodes",{fields:c}).subscribe(function(e){n.companyCodes=e.list,n.isLoading=!1}),this.acmService.contactCCDetails$.subscribe(function(e){n.activeTab=0,n.companyCodes=n.companyCodes,n.contactCCDetails=e})}return Object.defineProperty(ContactCCDetails.prototype,"containerStyle",{get:function(){return{"border-radius":".25rem",border:"1px solid #dddbda"}},enumerable:!0,configurable:!0}),Object.defineProperty(ContactCCDetails.prototype,"contactCCDetails",{get:function(){return this.contactccdetails},set:function(e){this.contactccdetails=e},enumerable:!0,configurable:!0}),ContactCCDetails.prototype.ngOnInit=function(){this.view.isEditable=!0},ContactCCDetails.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ContactCCDetails.prototype.getCCDetailsData=function(e){if(!_.isEmpty(this.contactCCDetails))for(var t in this.contactCCDetails)if(this.contactCCDetails[t].companycode_id==e.id)return this.contactCCDetails[t]},ContactCCDetails.prototype.getContentContainerStyle=function(e){return{display:e!==this.activeTab?"none":"block",padding:".25rem"}},__decorate([core_1.ViewChild("detailscontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ContactCCDetails.prototype,"detailscontainer",void 0),ContactCCDetails=__decorate([core_1.Component({selector:"contact-cc-details",template:'<div class="slds-grid slds-p-around--xxx-small" [ngStyle]="containerStyle"><div *ngIf="!isLoading && companyCodes.length > 0" class="slds-tabs--default"><ul class="slds-tabs--default__nav" role="tablist"><li *ngFor="let CCode of companyCodes; let tabindex = index" class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': tabindex === activeTab}" role="presentation" (click)="setActiveTab(tabindex)"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false">{{ CCode.companycode }}</a></li></ul><ng-container *ngFor="let CCode of companyCodes let tabindex = index"><div class="slds-tabs--default__content slds-show" role="tabpanel" [ngStyle]="getContentContainerStyle(tabindex)"><contact-cc-details-tab [ccid]="CCode.id" [ccname]="CCode.companycode" [contactid]="model.id" [data]="getCCDetailsData(CCode)"></contact-cc-details-tab></div></ng-container></div><system-spinner *ngIf="isLoading"></system-spinner><div *ngIf="!isLoading && companyCodes.length == 0" class="slds-align_absolute-center slds-p-vertical--medium"><span>No Company Codes found</span></div></div>',providers:[services_3.view]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_6.model,ACManagerService,services_5.backend,services_3.view])],ContactCCDetails)}();exports.ContactCCDetails=ContactCCDetails;var ContactCCDetailsTab=function(){function e(e,t,i,a,s,o){this.language=e,this.metadata=t,this.view=i,this.toast=a,this.backend=s,this.model=o,this.data=void 0,this.contactId=void 0,this.ccId=void 0,this.ccName=void 0}return e.prototype.ngOnInit=function(){this.model.module="ContactCCDetails"},e.prototype.ngAfterViewInit=function(){this.buildContainer()},e.prototype.ngOnChanges=function(){this.data?(this.model.id=this.data.id,this.model.data=this.data):(this.model.id=this.model.generateGuid(),this.model.data={id:this.model.id,name:this.ccName,contact_id:this.contactId,companycode_id:this.ccId,date_entered:new moment,date_modified:new moment})},e.prototype.buildContainer=function(){var e=this.metadata.getComponentConfig("ContactCCDetailsTab","Accounts").componentset;if(e)for(var t=this.metadata.getComponentSetObjects(e),i=function(t){a.metadata.addComponent(t.component,a.ccdetailscontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig})},a=this,s=0,o=t;s<o.length;s++){i(o[s])}},__decorate([core_1.ViewChild("ccdetailscontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"ccdetailscontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"data",void 0),__decorate([core_1.Input("contactid"),__metadata("design:type",String)],e.prototype,"contactId",void 0),__decorate([core_1.Input("ccid"),__metadata("design:type",String)],e.prototype,"ccId",void 0),__decorate([core_1.Input("ccname"),__metadata("design:type",String)],e.prototype,"ccName",void 0),e=__decorate([core_1.Component({selector:"contact-cc-details-tab",template:"<div #ccdetailscontainer></div>",providers:[services_6.model]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_3.view,services_7.toast,services_5.backend,services_6.model])],e)}();exports.ContactCCDetailsTab=ContactCCDetailsTab;var AccountsContactsManager=function(){function AccountsContactsManager(e,t,i,a,s){this.language=e,this.metadata=t,this.relatedmodels=i,this.acmService=a,this.model=s,this.editcomponentset="",this.module="",this.displayitems=5,this.activeContactId=void 0,this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id}return AccountsContactsManager.prototype.setActiveContactId=function(e){this.activeContactId=e},Object.defineProperty(AccountsContactsManager.prototype,"childrenHeight",{get:function(){return{height:"340px"}},enumerable:!0,configurable:!0}),Object.defineProperty(AccountsContactsManager.prototype,"mainStyle",{get:function(){return{height:"350pxpx","border-radius":".25rem",border:"1px solid #dddbda"}},enumerable:!0,configurable:!0}),AccountsContactsManager.prototype.ngAfterViewInit=function(){this.loadRelated()},AccountsContactsManager.prototype.loadRelated=function(){this.relatedmodels.relatedModule="Contacts",this.relatedmodels.getData()},AccountsContactsManager.prototype.ngOnDestroy=function(){this.relatedmodels.stopSubscriptions()},AccountsContactsManager.prototype.aclAccess=function(){return this.metadata.checkModuleAcl(this.module,"list")},AccountsContactsManager=__decorate([core_1.Component({selector:"accounts-contacts-manager",template:'<div class="slds-grid slds-m-around--small" [ngStyle]="mainStyle"><div class="slds-size--1-of-3 slds-border--right slds-p-around--xxx-small"><accounts-contacts-manager-list (activeContactId$)="setActiveContactId($event)" [tableHeight]="childrenHeight"></accounts-contacts-manager-list></div><div class="slds-size--2-of-3" [ngStyle]="childrenHeight"><accounts-contacts-manager-details [activecontactid]="activeContactId"></accounts-contacts-manager-details></div></div>',providers:[services_8.relatedmodels,ACManagerService]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_8.relatedmodels,ACManagerService,services_6.model])],AccountsContactsManager)}();exports.AccountsContactsManager=AccountsContactsManager;var AccountsContactsManagerDetails=function(){function AccountsContactsManagerDetails(e,t,i,a,s,o){this.language=e,this.metadata=t,this.view=i,this.acmService=a,this.relatedmodels=s,this.model=o,this.activeContactId=void 0,this.renderedComponents=[],this.model.module="Contacts"}return AccountsContactsManagerDetails.prototype.ngAfterViewInit=function(){this.buildContainer()},AccountsContactsManagerDetails.prototype.ngOnChanges=function(){var t=this;this.activeContactId&&(this.resetView(),this.buildContainer(),this.view.setViewMode(),this.model.id=this.activeContactId,this.model.getData(!0,"",!0).subscribe(function(e){_.isEmpty(e.contactccdetails.beans)?t.acmService.contactCCDetails={}:t.acmService.contactCCDetails=e.contactccdetails.beans}))},AccountsContactsManagerDetails.prototype.resetView=function(){for(var e=0,t=this.renderedComponents;e<t.length;e++){t[e].destroy()}this.renderedComponents=[]},AccountsContactsManagerDetails.prototype.buildContainer=function(){var i=this,e=this.metadata.getComponentConfig("AccountsContactsManagerDetails","Accounts").componentset;if(e)for(var t=this.metadata.getComponentSetObjects(e),a=function(t){s.metadata.addComponent(t.component,s.detailscontainer).subscribe(function(e){i.renderedComponents.push(e),e.instance.componentconfig=t.componentconfig})},s=this,o=0,n=t;o<n.length;o++){a(n[o])}},__decorate([core_1.ViewChild("detailscontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],AccountsContactsManagerDetails.prototype,"detailscontainer",void 0),__decorate([core_1.Input("activecontactid"),__metadata("design:type",String)],AccountsContactsManagerDetails.prototype,"activeContactId",void 0),AccountsContactsManagerDetails=__decorate([core_1.Component({selector:"accounts-contacts-manager-details",template:'<div class="slds-scrollable--y slds-p-around--x-small"><div *ngIf="!activeContactId" class="slds-text-align_center slds-p-vertical--medium"><span>{{ language.getLabel(\'LBL_MAKE_SELECTION\') }}</span></div><div [hidden]="!activeContactId"><div #detailscontainer></div></div></div>',providers:[services_6.model,services_3.view]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_3.view,ACManagerService,services_8.relatedmodels,services_6.model])],AccountsContactsManagerDetails)}();exports.AccountsContactsManagerDetails=AccountsContactsManagerDetails;var AccountsContactsManagerList=function(){function e(e,t,i,a){this.language=e,this.metadata=t,this.relatedmodels=i,this.model=a,this.listfields=[],this.fieldset="",this.tableheight={},this.activeContactId$=new core_1.EventEmitter,this.activeContactId=void 0,this.model.module="Contacts"}return e.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("AccountsContactsManagerList","Accounts");this.listfields=this.metadata.getFieldSetFields(e.fieldset)},e.prototype.setActiveContactId=function(e){this.activeContactId=e,this.activeContactId$.emit(e)},Object.defineProperty(e.prototype,"contacts",{get:function(){return this.relatedmodels.items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tableHeight",{get:function(){return this.tableheight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isloading",{get:function(){return this.relatedmodels.isloading},enumerable:!0,configurable:!0}),__decorate([core_1.ViewChild("tableContainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"tableContainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),__decorate([core_1.Input("tableHeight"),__metadata("design:type",Object)],e.prototype,"tableheight",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"activeContactId$",void 0),e=__decorate([core_1.Component({selector:"accounts-contacts-manager-list",template:'<div #tableContainer *ngIf="!isloading && contacts?.length > 0" class="slds-table--header-fixed_container" [ngStyle]="tableHeight"><div class="slds-scrollable--y" style="height:100%;"><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table_header-fixed" style="border-top: 0"><thead><tr class="slds-text-title_caps"><th scope="col" *ngFor="let field of listfields"><div class="slds-truncate slds-cell-fixed slds-grid slds-grid_vertical-align-center"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label></div></th></tr></thead><tbody><tr *ngFor="let contact of contacts" [modelProvider]="{module:\'Contacts\', data: contact}" (click)="setActiveContactId(contact.id)" style="cursor: pointer" (mouseover)="hovered = contact.id" (mouseout)="hovered = \'\'" [ngClass]="{\'slds-theme_shade\': activeContactId == contact.id}" [ngStyle]="{\'border-bottom\': hovered == contact.id ? \'1px solid darkred\':\'\', \'font-weight\': activeContactId == contact.id ? \'700\': \'\'}"><td *ngFor="let field of listfields"><field-container [fieldname]="field.field" [fieldconfig]="field.fieldconfig" fielddisplayclass="slds-truncate"></field-container></td></tr></tbody></table></div></div><system-spinner *ngIf="isloading"></system-spinner><div *ngIf="!isloading && contacts?.length == 0" class="slds-text-align_center slds-p-vertical--medium"><span>{{ language.getLabel(\'LBL_NO_ENTRIES\') }}</span></div>',providers:[services_3.view,services_6.model]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,services_8.relatedmodels,services_6.model])],e)}();exports.AccountsContactsManagerList=AccountsContactsManagerList;var AccountHierarchy=function(){function AccountHierarchy(e,t,i,a){this.language=e,this.metadata=t,this.accountHierarchy=i,this.model=a,this.componentconfig={},this.fieldsetFields=[],this.loading=!1}return AccountHierarchy.prototype.loadHierarchy=function(){return this.accountHierarchy.parentId=this.model.id,this.accountHierarchy.requestedFields=this.fieldsetFields,this.accountHierarchy.loadHierachy()},AccountHierarchy.prototype.ngOnInit=function(){var t=this;this.fieldsetFields=this.metadata.getFieldSetFields(this.componentconfig.fieldset),this.loading=!0,this.loadHierarchy().subscribe(function(e){t.loading=!1})},AccountHierarchy=__decorate([core_1.Component({selector:"account-hierarchy",template:'<article class="slds-card slds-card_boundary slds-m-bottom--medium"><div class="slds-card__header slds-grid"><header class="slds-media slds-media--center slds-has-flexi-truncate"><object-icon [icon]="\'hierarchy\'" [size]="\'small\'"></object-icon><div class="slds-media__body slds-truncate"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small">{{language.getLabel(\'LBL_SUBSIDIARIES\')}}</span></a></h2></div></header></div><div class="slds-card__body"><table class="slds-table slds-table--bordered slds-tree slds-table--tree" role="treegrid"><thead><tr class="slds-text-title--caps"><th *ngFor="let field of fieldsetFields" class="slds-cell-buffer--left" scope="col"><div class="slds-truncate">{{language.getFieldDisplayName(\'Accounts\', field.field)}}</div></th></tr></thead><tbody><tr account-hierarchy-node class="slds-hint-parent" role="row" aria-expanded="true" *ngFor="let node of accountHierarchy.membersList" [nodedata]="node" [fields]="fieldsetFields"></tr></tbody><tbody system-table-stencils *ngIf="loading" [columns]="fieldsetFields.length" [rows]="5"></tbody></table></div></article>',providers:[accountHierarchy]}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,accountHierarchy,services_6.model])],AccountHierarchy)}();exports.AccountHierarchy=AccountHierarchy;var AccountHierarchyNode=function(){function e(e,t,i,a){this.language=e,this.metadata=t,this.accountHierarchy=i,this.model=a,this.nodedata={},this.fields=[],this.loading=!1}return e.prototype.ngOnInit=function(){this.model.module="Accounts",this.model.id=this.nodedata.id,this.model.data.summary_text=this.nodedata.summary_text;for(var e=0,t=this.fields;e<t.length;e++){var i=t[e];this.model.data[i.field]=this.nodedata.data[i.field]}this.model.data.acl=this.nodedata.data.acl},e.prototype.expandNode=function(){this.nodedata.expanded?this.accountHierarchy.collapse(this.nodedata.id):(this.loading=!0,this.accountHierarchy.expand(this.nodedata.id))},e.prototype.getIcon=function(){switch(this.nodedata.expanded){case!1:return"chevronright";case!0:return"chevrondown"}},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"nodedata",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"fields",void 0),e=__decorate([core_1.Component({selector:"[account-hierarchy-node]",template:'<ng-container *ngFor="let field of fields; let i = index"><td *ngIf="i === 0" scope="row" class="slds-tree__item"><button class="slds-button slds-button--icon slds-button--icon-x-small slds-m-right--x-small" [disabled]="nodedata.member_count === 0" (click)="expandNode()"><system-button-icon *ngIf="!loading" [icon]="getIcon()"></system-button-icon><system-button-icon *ngIf="loading" [icon]="\'spinner\'"></system-button-icon></button><div class="slds-truncate"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></div></td><td *ngIf="i > 0"><div class="slds-truncate"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></div></td></ng-container>',providers:[services_6.model,services_3.view],host:{"[attr.aria-level]":"nodedata.level"}}),__metadata("design:paramtypes",[services_2.language,services_4.metadata,accountHierarchy,services_6.model])],e)}();exports.AccountHierarchyNode=AccountHierarchyNode;var ModuleAccounts=function(){function ModuleAccounts(e){this.vms=e,this.version="1.0",this.build_date="2018-10-25",this.vms.registerModule(this)}return ModuleAccounts=__decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,objectfields_1.ObjectFields,globalcomponents_1.GlobalComponents,objectcomponents_1.ObjectComponents,systemcomponents_1.SystemComponents,directives_1.DirectivesModule],declarations:[AccountsKPIsOverview,AccountCCDetails,AccountCCDetailsTab,ContactCCDetails,ContactCCDetailsTab,AccountsContactsManager,AccountsContactsManagerDetails,AccountsContactsManagerList,AccountHierarchy,AccountHierarchyNode],providers:[ACManagerService]}),__metadata("design:paramtypes",[services_1.VersionManagerService])],ModuleAccounts)}();exports.ModuleAccounts=ModuleAccounts;