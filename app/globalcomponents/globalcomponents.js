/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/*(c) aac services 2020. All Rights reserved)*/
"use strict";var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)};return function(e,t){function s(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),__decorate=this&&this.__decorate||function(e,t,s,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,o);else for(var l=e.length-1;0<=l;l--)(i=e[l])&&(n=(a<3?i(n):3<a?i(t,s,n):i(t,s))||n);return 3<a&&n&&Object.defineProperty(t,s,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var common_1=require("@angular/common"),forms_1=require("@angular/forms"),directives_1=require("../directives/directives"),core_1=require("@angular/core"),router_1=require("@angular/router"),objectfields_1=require("../objectfields/objectfields"),objectcomponents_1=require("../objectcomponents/objectcomponents"),systemcomponents_1=require("../systemcomponents/systemcomponents"),services_1=require("../services/services"),http_1=require("@angular/common/http"),platform_browser_1=require("@angular/platform-browser"),rxjs_1=require("rxjs"),operators_1=require("rxjs/operators"),MenuService=function(){function e(e,t){this.http=e,this.configurationService=t,this.menuitems=[]}return e.prototype.loadModules=function(){new http_1.HttpHeaders},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.HttpClient,services_1.configurationService])],e)}();exports.MenuService=MenuService;var GlobalHeader=function(){function e(e,t,s,o,i){var a=this;this.session=e,this.router=t,this.toast=s,this.layout=o,this.navigation=i,this.router.events.subscribe(function(e){e instanceof router_1.ActivationStart&&"Users"===e.snapshot.params.module&&e.snapshot.params.id&&(a.session.authData.admin||e.snapshot.params.id==a.session.authData.userId||(a.toast.sendToast("You are not allowed to view or edit foreign user data.","warning",null,3),a.router.navigate(["/module/Users"])))})}return Object.defineProperty(e.prototype,"headerHeight",{get:function(){return this.header?this.header.element.nativeElement.getBoundingClientRect().height:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabbed",{get:function(){return"tabbed"==this.navigation.navigationparadigm||"subtabbed"==this.navigation.navigationparadigm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"issmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),__decorate([core_1.ViewChild("header",{read:core_1.ViewContainerRef,static:!1}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"header",void 0),e=__decorate([core_1.Component({selector:"global-header",template:'<header #header class="slds-global-header_container"><div *ngIf="session.authData.sessionId && session.authData.loaded === true"><global-header-top></global-header-top><global-navigation-tabbed *ngIf="!issmall && tabbed"></global-navigation-tabbed><global-navigation *ngIf="!issmall && !tabbed"></global-navigation><div class="slds-hide--medium slds-context-bar" style="height: 0px;"></div></div></header>'}),__metadata("design:paramtypes",[services_1.session,router_1.Router,services_1.toast,services_1.layout,services_1.navigation])],e)}();exports.GlobalHeader=GlobalHeader;var GlobalHeaderTop=function(){function e(e,t){this.metadata=e,this.layout=t}return Object.defineProperty(e.prototype,"showSearch",{get:function(){return this.metadata.getActiveRole().showsearch&&"0"!=this.metadata.getActiveRole().showsearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),e=__decorate([core_1.Component({selector:"global-header-top",template:'<div class="slds-global-header slds-grid slds-grid--align-spread slds-p-left--medium"><div class="slds-show--large slds-large-size--1-of-6"><div class="slds-global-header__item slds-p-left--none"><img class="slds-show--large" style="max-height: 25px;" src="./config/headerimage"></div></div><div *ngIf="isSmall" class="slds-x-small-size--1-of-12"><div class="slds-global-header__item slds-p-horizontal--none"><global-navigation-compact></global-navigation-compact></div></div><div *ngIf="showSearch" class="slds-x-small-size--11-of-12 slds-medium-size--4-of-6 slds-large-size--3-of-6"><div class="slds-global-header__item"><global-header-search></global-header-search></div></div><div *ngIf="!isSmall" class="slds-medium-size--2-of-6 slds-large-size--1-of-6"><div class="slds-global-header__item slds-grid slds-grid--align-end slds-grid--vertical-align-center"><global-header-tools></global-header-tools><global-user></global-user></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.layout])],e)}();exports.GlobalHeaderTop=GlobalHeaderTop;var GlobalHeaderSearch=function(){function e(e,t,s,o,i,a){this.router=e,this.broadcast=t,this.fts=s,this.elementRef=o,this.renderer=i,this.language=a,this.showRecent=!1,this.searchTimeOut=void 0,this.searchTerm="",this.searchTermUntrimmed="",this._searchmodule="all",this.searchresults=[]}return Object.defineProperty(e.prototype,"searchmodule",{get:function(){return this.language.getModuleName(this._searchmodule)},set:function(e){this._searchmodule=e,this.searchTerm&&this.showRecent&&this.executeSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showModuleSelector",{get:function(){return 768<=window.innerWidth},enumerable:!0,configurable:!0}),e.prototype.onFocus=function(){var t=this;this.showRecent=!0,this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)})},e.prototype.closePopup=function(){this.clickListener(),this.showRecent=!1,this.searchTerm="",this.searchTermUntrimmed=""},e.prototype.doSearch=function(){this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTerm!==this.fts.searchTerm&&this.executeSearch()},e.prototype.executeSearch=function(){var a=this,e=[];this.showModuleSelector&&"all"!=this._searchmodule&&e.push(this._searchmodule),this.searchresults=[],this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe(function(e){for(var t=[],s=0,o=a.fts.moduleSearchresults;s<o.length;s++){var i=o[s];t=t.concat(i.data.hits)}t.sort(function(e,t){return e._score>t._score?-1:1}),a.searchresults=t.splice(0,10)})},e.prototype.clearSearchTerm=function(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTerm="",this.searchTermUntrimmed="",this.fts.searchTerm=""},e.prototype.search=function(e){var t=this;switch(this.showRecent=!0,e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.showRecent=!1,0<this.searchTerm.length&&this.router.navigate(["/search/"+btoa(this.searchTerm)]));break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return t.doSearch()},1e3)}},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||this.closePopup()},e.prototype.selected=function(e){this.showRecent=!1,this.clearSearchTerm()},e=__decorate([core_1.Component({selector:"global-header-search",template:'<div class="slds-global-header__item_search" style="min-width: 15rem"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-combobox-group"><div *ngIf="showModuleSelector" class="slds-combobox_object-switcher slds-combobox-addon_start"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" system-dropdown-trigger role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input type="text" class="slds-input slds-combobox__input slds-combobox__input-value" [(ngModel)]="searchmodule" readonly role="textbox"><system-icon icon="down" sprite="utility" size="x-small" addclasses="slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"></system-icon></div><div class="slds-dropdown slds-dropdown_x-small slds-dropdown_left"><ul class="slds-listbox slds-listbox_vertical" role="group"><li role="presentation" class="slds-listbox__item" (click)="searchmodule = \'all\'"><div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option"><div class="slds-media__figure slds-listbox__option-icon"><system-utility-icon icon="check" size="x-small" *ngIf="\'all\' == searchmodule"></system-utility-icon></div><div class="slds-media__body"><div class="slds-truncate"><system-label label="LBL_ALL"></system-label></div></div></div></li><li *ngFor="let searchModule of fts.loadedSearchModules" role="presentation" (click)="searchmodule = searchModule" class="slds-listbox__item"><div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option"><div class="slds-media__figure slds-listbox__option-icon"><system-utility-icon icon="check" size="x-small" *ngIf="searchModule == _searchmodule"></system-utility-icon></div><div class="slds-media__body"><div class="slds-truncate"><system-label-modulename [module]="searchModule"></system-label-modulename></div></div></div></li></ul></div></div></div></div></div></div><div class="slds-combobox_container slds-combobox-addon_end" [ngClass]="{\'slds-combobox-addon_start\': !showModuleSelector}"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" role="combobox" [ngClass]="{\'slds-is-open\': showRecent}"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left slds-global-search__form-element" role="none"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--left"></system-utility-icon><input class="slds-input slds-combobox__input" type="search" [placeholder]="language.getLabel(\'LBL_SEARCH_SPICE\')" (focus)="onFocus()" [(ngModel)]="searchTermUntrimmed" (keyup)="search($event)"></div><div class="slds-dropdown slds-dropdown_fluid" role="listbox"><global-header-search-recent-items *ngIf="searchTerm === \'\'" (selected)="selected($event)"></global-header-search-recent-items><global-header-search-results-items *ngIf="searchTerm !== \'\'" [searchTerm]="searchTerm" [searchResults]="searchresults" (selected)="selected($event)"></global-header-search-results-items></div></div></div></div></div></div></div>',providers:[services_1.fts]}),__metadata("design:paramtypes",[router_1.Router,services_1.broadcast,services_1.fts,core_1.ElementRef,core_1.Renderer2,services_1.language])],e)}();exports.GlobalHeaderSearch=GlobalHeaderSearch;var GlobalHeaderSearchResultsItems=function(){function e(e,t,s){this.router=e,this.language=t,this.fts=s,this.searchTerm="",this.searchModule="",this.searchResults=[],this.selected=new core_1.EventEmitter}return Object.defineProperty(e.prototype,"searchModuleName",{get:function(){return this.language.getLabel("LBL_INSPICECRM")},enumerable:!0,configurable:!0}),e.prototype.goSearch=function(){0<this.searchTerm.length&&(this.selected.emit(!0),this.router.navigate(["/search/"+btoa(this.searchTerm)]))},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"searchTerm",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"searchModule",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"searchResults",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selected",void 0),e=__decorate([core_1.Component({selector:"global-header-search-results-items",template:'<ul role="listbox"><li role="presentation" (click)="goSearch()"><span class="slds-lookup__item-action slds-media slds-media--center" role="option"><system-spinner *ngIf="fts.runningmodulesearch" [size]="20" class="slds-p-right--x-small"></system-spinner><system-icon *ngIf="!fts.runningmodulesearch" icon="search" size="small" sprite="utility"></system-icon><div class="slds-media__body"><div class="slds-lookup__result-text"><system-label label="LBL_SEARCH"></system-label>"{{searchTerm}}" {{searchModuleName}}</div></div></span></li><ng-container *ngIf="!fts.runningmodulesearch"><li global-header-search-results-item *ngFor="let searchResult of searchResults" [hit]="searchResult" (selected)="selected.emit(true)"></li></ng-container></ul>'}),__metadata("design:paramtypes",[router_1.Router,services_1.language,services_1.fts])],e)}();exports.GlobalHeaderSearchResultsItems=GlobalHeaderSearchResultsItems;var GlobalHeaderSearchResultsItem=function(){function GlobalHeaderSearchResultsItem(e,t,s,o,i){this.model=e,this.view=t,this.router=s,this.language=o,this.metadata=i,this.hit={},this.selected=new core_1.EventEmitter,this.view.displayLabels=!1}return GlobalHeaderSearchResultsItem.prototype.navigateTo=function(){this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},GlobalHeaderSearchResultsItem.prototype.gethref=function(){return"#/module/"+this.model.module+"/"+this.model.id},GlobalHeaderSearchResultsItem.prototype.ngOnInit=function(){this.model.module="_doc"==this.hit._type?this.hit._source._module:this.hit._type,this.model.id=this.hit._id;var e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset)),this.model.data=this.model.utils.backendModel2spice(this.model.module,this.hit._source)},__decorate([core_1.Input(),__metadata("design:type",Object)],GlobalHeaderSearchResultsItem.prototype,"hit",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],GlobalHeaderSearchResultsItem.prototype,"selected",void 0),GlobalHeaderSearchResultsItem=__decorate([core_1.Component({selector:"[global-header-search-results-item]",template:'<span class="slds-lookup__item-action slds-media slds-media--center" role="option"><system-icon [module]="model.module" size="small"></system-icon><div class="slds-media__body"><div class="slds-lookup__result-text"><span *ngIf="!mainfieldset">{{model.data.summary_text}}</span><object-record-fieldset-horizontal-list [fieldset]="mainfieldset"></object-record-fieldset-horizontal-list></div><div class="slds-lookup__result-meta slds-text-body--small"><ul class="slds-list_horizontal slds-has-dividers_right slds-truncate"><li class="slds-item"><system-label-modulename [module]="model.module" [singular]="true"></system-label-modulename></li><ng-container *ngFor="let fieldsetitem of subfieldsetfields"><li *ngIf="model.getField(fieldsetitem.field)" class="slds-item"><field-container [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" fielddisplayclass="slds-truncate"></field-container></li></ng-container></ul></div></div></span>',providers:[services_1.model,services_1.view],host:{"(click)":"navigateTo()"}}),__metadata("design:paramtypes",[services_1.model,services_1.view,router_1.Router,services_1.language,services_1.metadata])],GlobalHeaderSearchResultsItem)}();exports.GlobalHeaderSearchResultsItem=GlobalHeaderSearchResultsItem;var GlobalHeaderSearchRecentItems=function(){function e(e,t,s){this.language=e,this.recent=t,this.router=s,this.selected=new core_1.EventEmitter}return e.prototype.goRecent=function(){this.selected.emit(!1),this.router.navigate(["/recent"])},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selected",void 0),e=__decorate([core_1.Component({selector:"global-header-search-recent-items",template:'<ul role="listbox"><li role="presentation" (click)="goRecent()"><span class="slds-lookup__item-action slds-media slds-media--center" role="option"><system-icon icon="breadcrumbs" size="small" sprite="utility"></system-icon><div class="slds-media__body"><div class="slds-lookup__result-text"><system-label label="LBL_RECENTLYVIEWED"></system-label></div></div></span></li><li global-header-search-recent-item *ngFor="let item of recent.items.slice(0, 10)" [item]="item" (selected)="selected.emit(true)"></li></ul>'}),__metadata("design:paramtypes",[services_1.language,services_1.recent,router_1.Router])],e)}();exports.GlobalHeaderSearchRecentItems=GlobalHeaderSearchRecentItems;var GlobalHeaderSearchRecentItem=function(){function e(e,t,s,o,i){this.model=e,this.router=t,this.language=s,this.metadata=o,this.view=i,this.item={},this.selected=new core_1.EventEmitter,this.view.displayLabels=!1}return e.prototype.navigateTo=function(){this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},e.prototype.gethref=function(){return"#/module/"+this.model.module+"/"+this.model.id},e.prototype.ngOnInit=function(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.data=this.model.utils.backendModel2spice(this.model.module,this.item.data);var e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selected",void 0),e=__decorate([core_1.Component({selector:"[global-header-search-recent-item]",template:'<span class="slds-lookup__item-action slds-media slds-media--center" role="option"><system-icon [module]="model.module" size="small"></system-icon><div class="slds-media__body"><div class="slds-lookup__result-text"><span *ngIf="!mainfieldset">{{model.data.summary_text}}</span><object-record-fieldset-horizontal-list [fieldset]="mainfieldset"></object-record-fieldset-horizontal-list></div><span class="slds-lookup__result-meta slds-text-body--small"><ul class="slds-list_horizontal slds-has-dividers_right slds-truncate"><li class="slds-item"><system-label-modulename [module]="model.module" [singular]="true"></system-label-modulename></li><ng-container *ngFor="let fieldsetitem of subfieldsetfields"><li *ngIf="model.getField(fieldsetitem.field)" class="slds-item"><field-container [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" fielddisplayclass="slds-truncate"></field-container></li></ng-container></ul></span></div></span>',providers:[services_1.model,services_1.view],host:{"(click)":"navigateTo()"}}),__metadata("design:paramtypes",[services_1.model,router_1.Router,services_1.language,services_1.metadata,services_1.view])],e)}();exports.GlobalHeaderSearchRecentItem=GlobalHeaderSearchRecentItem;var GlobalHeaderTools=function(){function GlobalHeaderTools(e,t,s,o,i){var a=this;this.session=e,this.metadata=t,this.router=s,this.language=o,this.broadcast=i,this.containerItems=[],this.broadcast.message$.subscribe(function(e){a.handleMessage(e)})}return GlobalHeaderTools.prototype.ngAfterViewInit=function(){this.buildTools()},GlobalHeaderTools.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildTools()}},GlobalHeaderTools.prototype.buildTools=function(){var t=this;this.containerItems.forEach(function(e){e.destroy()}),this.containerItems=[];var e=this.metadata.getComponentConfig("GlobalHeaderTools");if(!e.componentset)return!1;for(var s=0,o=this.metadata.getComponentSetObjects(e.componentset);s<o.length;s++){var i=o[s];this.metadata.addComponent(i.component,this.toolcontainer).subscribe(function(e){t.containerItems.push(e)})}},__decorate([core_1.ViewChild("toolcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalHeaderTools.prototype,"toolcontainer",void 0),GlobalHeaderTools=__decorate([core_1.Component({selector:"global-header-tools",template:'<div class="slds-grid slds-grid--vertical-align-center"><div #toolcontainer></div></div>'}),__metadata("design:paramtypes",[services_1.session,services_1.metadata,router_1.Router,services_1.language,services_1.broadcast])],GlobalHeaderTools)}();exports.GlobalHeaderTools=GlobalHeaderTools;var GlobalHeaderActions=function(){function GlobalHeaderActions(e,t,s,o,i){this.renderer=e,this.elementRef=t,this.session=s,this.metadata=o,this.language=i,this.isOpen=!1}return GlobalHeaderActions.prototype.ngAfterViewInit=function(){var s=this,e=this.metadata.getComponentConfig("GlobalHeaderActions");if(e&&e.actionset)for(var t=this.metadata.getActionSetItems(e.actionset),o=function(t){i.metadata.addComponent(t.component,i.actioncontainerheader).subscribe(function(e){e.instance.actionconfig=t.actionconfig,e.instance.closemenu&&e.instance.closemenu.subscribe(function(e){s.isOpen=!1})})},i=this,a=0,n=t;a<n.length;a++){o(n[a])}},GlobalHeaderActions.prototype.toggleOpen=function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},GlobalHeaderActions.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())},__decorate([core_1.ViewChild("actioncontainerheader",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalHeaderActions.prototype,"actioncontainerheader",void 0),GlobalHeaderActions=__decorate([core_1.Component({selector:"global-header-actions",template:'<div class="slds-show--medium slds-dropdown-trigger slds-dropdown-trigger_click slds-p-horizontal--xxx-small" [ngClass]="{\'slds-is-open\': isOpen}"><div class="slds-p-around--xx-small" (click)="toggleOpen()"><system-utility-icon [icon]="\'add\'" [size]="\'x-small\'"></system-utility-icon></div><div class="slds-is-absolute slds-dropdown slds-dropdown_right slds-nubbin_top-right" style="right:-10px;top:25px;"><ul class="slds-dropdown__list" role="menu"><li #actioncontainerheader class="slds-dropdown__header" role="separator"><span class="slds-text-title_caps"><system-label label="LBL_CREATE"></system-label></span></li></ul></div></div>'}),__metadata("design:paramtypes",[core_1.Renderer2,core_1.ElementRef,services_1.session,services_1.metadata,services_1.language])],GlobalHeaderActions)}();exports.GlobalHeaderActions=GlobalHeaderActions;var GlobalHeaderActionItem=function(){function GlobalHeaderActionItem(e,t,s,o,i){this.session=e,this.metadata=t,this.model=s,this.language=o,this.dockedComposer=i,this.actionconfig={},this.closemenu=new core_1.EventEmitter}return GlobalHeaderActionItem.prototype.ngOnInit=function(){this.actionconfig.module&&(this.model.module=this.actionconfig.module)},GlobalHeaderActionItem.prototype.click=function(){this.dockedComposer.addComposer(this.model.module),this.closemenu.emit(!0)},Object.defineProperty(GlobalHeaderActionItem.prototype,"label",{get:function(){return this.actionconfig.label?this.language.getLabel(this.actionconfig.label):this.language.getLabel(this.model.module,"LBL_NEW_FORM_TITLE")},enumerable:!0,configurable:!0}),GlobalHeaderActionItem=__decorate([core_1.Component({selector:"global-header-action-item",template:'<li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0)" (click)="click()" class="slds-grid slds-grid_vertical-align-center slds-p-horizontal--x-small slds-p-vertical--xx-small"><system-icon [module]="model.module" addclasses="\'slds-icon slds-icon_small"></system-icon><div class="slds-truncate slds-size--1-of-1">{{label}}</div></a></li>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.session,services_1.metadata,services_1.model,services_1.language,services_1.dockedComposer])],GlobalHeaderActionItem)}();exports.GlobalHeaderActionItem=GlobalHeaderActionItem;var GlobalHeaderFavorite=function(){function GlobalHeaderFavorite(e,t,s,o,i,a,n,l){var r=this;this.metadata=e,this.favorite=t,this.navigation=s,this.router=o,this.renderer=i,this.elementRef=a,this.language=n,this.modal=l,this.showFavorites=!1,this.navigation.activeTab$.subscribe(function(e){return r.handleNavigationChange()})}return Object.defineProperty(GlobalHeaderFavorite.prototype,"canShowFavorites",{get:function(){return this.metadata.getActiveRole().showfavorites&&"0"!=this.metadata.getActiveRole().showfavorites},enumerable:!0,configurable:!0}),Object.defineProperty(GlobalHeaderFavorite.prototype,"nofavorites",{get:function(){return 0==this.favorite.favorites.length},enumerable:!0,configurable:!0}),GlobalHeaderFavorite.prototype.handleNavigationChange=function(){var e=this.navigation.activeTabObject;"module/:module/:id"==this.metadata.getRouteDetails(e.path.replace("tab/:tabid/","")).path?this.favorite.enable(e.params.module,e.params.id):this.favorite.disable()},GlobalHeaderFavorite.prototype.toggleFavorite=function(){this.favorite.isFavorite?this.favorite.deleteFavorite():this.favorite.setFavorite(),this.favbutton.element.nativeElement.blur()},GlobalHeaderFavorite.prototype.closeFavorites=function(){this.showFavorites=!1},GlobalHeaderFavorite.prototype.toggleFavorites=function(){var t=this;this.showFavorites=!this.showFavorites,this.showFavorites?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},GlobalHeaderFavorite.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.showFavorites=!1,this.clickListener())},GlobalHeaderFavorite.prototype.openEditModal=function(){this.modal.openModal("SpiceFavoritesEditModal")},__decorate([core_1.ViewChild("favbutton",{read:core_1.ViewContainerRef,static:!1}),__metadata("design:type",core_1.ViewContainerRef)],GlobalHeaderFavorite.prototype,"favbutton",void 0),GlobalHeaderFavorite=__decorate([core_1.Component({selector:"global-header-favorite",template:'<div class="slds-global-actions__favorites slds-m-around--none slds-dropdown-trigger slds-dropdown-trigger_click"><div class="slds-button-group"><button #favbutton class="slds-button slds-button_icon slds-global-actions__favorites-action slds-button_icon slds-button_icon-border slds-button_icon-small" [disabled]="!favorite.isEnabled" [ngClass]="{\'slds-is-selected\': favorite.isFavorite}" (click)="toggleFavorite()" title="Toggle Favorites"><system-button-icon icon="favorite"></system-button-icon></button> <button class="slds-button slds-button_icon slds-global-actions__favorites-more slds-button_icon slds-button_icon-border slds-button_icon-small" [disabled]="nofavorites" (click)="toggleFavorites()" title="View Favorites"><system-button-icon icon="down"></system-button-icon></button></div><section *ngIf="showFavorites" class="slds-popover slds-nubbin--top-right slds-dynamic-menu" role="dialog" style="position:absolute;left:-263px;top:38px"><div class="slds-popover__body slds-p-horizontal_none"><ul class="slds-listbox slds-listbox_vertical slds-dropdown_length-10"><li role="presentation" class="slds-listbox__item"><div class="slds-media slds-listbox__option slds-listbox__option_plain" role="presentation"><h3 class="slds-listbox__option-header" role="presentation"><system-label label="LBL_FAVORITES"></system-label></h3></div></li><li global-header-search-recent-item role="presentation" class="slds-listbox__item" *ngFor="let item of favorite.favorites" [item]="item" (selected)="closeFavorites()"></li></ul></div><footer class="slds-popover__footer"><ul><li><button class="slds-button slds-button_reset slds-p-vertical_xx-small slds-size_1-of-1" (click)="openEditModal()"><system-button-icon icon="edit" class="slds-p-right--xx-small"></system-button-icon><system-label label="LBL_EDIT_FAVORITES"></system-label></button></li></ul></footer></section></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.favorite,services_1.navigation,router_1.Router,core_1.Renderer2,core_1.ElementRef,services_1.language,services_1.modal])],GlobalHeaderFavorite)}();exports.GlobalHeaderFavorite=GlobalHeaderFavorite;var GlobalHeaderWorkbench=function(){function GlobalHeaderWorkbench(e,t,s){this.session=e,this.router=t,this.language=s}return GlobalHeaderWorkbench.prototype.isAdmin=function(){return this.session.isAdmin},GlobalHeaderWorkbench.prototype.goAdmin=function(){this.router.navigate(["/admin"])},GlobalHeaderWorkbench=__decorate([core_1.Component({selector:"global-header-workbench",template:'<div *ngIf="isAdmin()" class="slds-p-around--xx-small" [title]="language.getLabel(\'LBL_WORKBENCH\')" (click)="goAdmin()"><system-utility-icon [icon]="\'setup\'" [size]="\'x-small\'"></system-utility-icon></div>'}),__metadata("design:paramtypes",[services_1.session,router_1.Router,services_1.language])],GlobalHeaderWorkbench)}();exports.GlobalHeaderWorkbench=GlobalHeaderWorkbench;var GlobalHeaderReload=function(){function GlobalHeaderReload(e,t,s,o,i,a){this.session=e,this.router=t,this.language=s,this.loader=o,this.configuration=i,this.toast=a,this.loadTasks=!1}return GlobalHeaderReload.prototype.isAdmin=function(){return this.session.isAdmin},GlobalHeaderReload.prototype.reloadConf=function(){var t=this;this.loadTasks=!0,this.loader.load().subscribe(function(e){!0===e?t.toast.sendToast(t.language.getLabel("LBL_DATA_RELOADED")+".","success"):t.toast.sendToast("error","error","Reload failed"),t.loadTasks=!1})},GlobalHeaderReload=__decorate([core_1.Component({selector:"global-header-reload",template:'<div *ngIf="isAdmin() && !loadTasks" class="slds-p-around--xx-small" [title]="language.getLabel(\'LBL_RELOAD_CONFIGURATION\')" (click)="reloadConf()"><system-utility-icon [icon]="\'sync\'" [size]="\'x-small\'"></system-utility-icon></div><div *ngIf="isAdmin() && loadTasks" class="slds-p-around--xx-small" [title]="language.getLabel(\'LBL_RELOAD_CONFIGURATION\')"><system-spinner size="12"></system-spinner></div>'}),__metadata("design:paramtypes",[services_1.session,router_1.Router,services_1.language,services_1.loader,services_1.configurationService,services_1.toast])],GlobalHeaderReload)}();exports.GlobalHeaderReload=GlobalHeaderReload;var GlobalFooter=function(){function e(e,t,s){this.session=e,this.footer=t,this.modalservice=s}return e.prototype.ngAfterViewInit=function(){this.footer.footercontainer=this.footercontainer,this.footer.modalcontainer=this.modalcontainer,this.footer.modalbackdrop=this.modalbackdrop},__decorate([core_1.ViewChild("footercontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"footercontainer",void 0),__decorate([core_1.ViewChild("modalcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"modalcontainer",void 0),__decorate([core_1.ViewChild("modalbackdrop",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"modalbackdrop",void 0),e=__decorate([core_1.Component({selector:"global-footer",template:'<footer><global-docked-composer-container *ngIf="session.authData.sessionId && session.authData.loaded === true"></global-docked-composer-container><div #footercontainer></div><div data-info="ModalContainer" style="position:fixed;z-index:10000"><div #backdrop class="slds-backdrop" [class.slds-backdrop_open]="modalservice.backdropVisible" [style.zIndex]="modalservice.backdropZindex"></div><span #modalcontainer></span></div><system-toast-container class="slds-notify_container"></system-toast-container></footer>'}),__metadata("design:paramtypes",[services_1.session,services_1.footer,services_1.modal])],e)}();exports.GlobalFooter=GlobalFooter;var GlobalLogin=function(){function e(e,t,s,o,i,a,n,l,r){var d=this;if(this.loginService=e,this.http=t,this.configuration=s,this.session=o,this.cookie=i,this.language=a,this.broadcast=n,this.sanitizer=l,this.changeDetectorRef=r,this.promptUser=!1,this.username="",this.password="",this._selectedlanguage="",this.selectedsite="",this.lastSelectedLanguage=null,this.showForgotPass=!1,this.externalSidebarUrl=null,this.loggingIn=!1,sessionStorage["OAuth-Token"]&&0<sessionStorage["OAuth-Token"].length){var c=new http_1.HttpHeaders;c=c.set("OAuth-Token",sessionStorage["OAuth-Token"]),sessionStorage[btoa(sessionStorage["OAuth-Token"]+":siteid")]&&this.configuration.setSiteID(atob(sessionStorage[btoa(sessionStorage["OAuth-Token"]+":siteid")])),this.http.get(this.configuration.getBackendUrl()+"/login",{headers:c}).subscribe(function(e){var t=e;d.session.authData.sessionId=t.id,d.session.authData.userId=t.userid,d.session.authData.userName=t.user_name,d.session.authData.userimage=t.user_image,d.session.authData.first_name=t.first_name,d.session.authData.last_name=t.last_name,d.session.authData.display_name=t.display_name,d.session.authData.email=t.email,d.session.authData.admin=1==t.admin,d.session.authData.dev=1==t.dev,d.session.authData.renewPass="1"===t.renewPass,d.session.authData.obtainGDPRconsent=t.obtainGDPRconsent,d.session.authData.renewPass||(d.broadcast.broadcastMessage("login"),d.loginService.load())},function(e){switch(e.status){case 401:d.promptUser=!0}})}else this.promptUser=!0,this.selectedsite=this.cookie.getValue("spiceuibackend"),this.selectedsite&&this.configuration.setSiteID(this.selectedsite);this.lastSelectedLanguage=this.cookie.getValue("spiceuilanguage")}return e.prototype.handleResize=function(){this.changeDetectorRef.detectChanges()},e.prototype.login=function(){var t=this;this.loggingIn=!0,0<this.username.length&&0<this.password.length&&(this.loginService.authData.userName=this.username,this.loginService.authData.password=this.password,this.loginService.login().subscribe(function(e){t.loggingIn=!1},function(e){t.loggingIn=!1}))},Object.defineProperty(e.prototype,"selectedlanguage",{get:function(){return this._selectedlanguage||(this.lastSelectedLanguage?this.selectedlanguage=this.lastSelectedLanguage:this.configuration.data.languages&&(this.selectedlanguage=this.configuration.data.languages.default)),this._selectedlanguage},set:function(e){this._selectedlanguage=e,this.language.currentlanguage=e},enumerable:!0,configurable:!0}),e.prototype.getLanguages=function(){var e=[];if(this.configuration.data.languages)for(var t=0,s=this.configuration.data.languages.available;t<s.length;t++){var o=s[t];e.push({language:o.language_code,text:o.language_name})}return e},e.prototype.doLogin=function(){this.loginService.login()},Object.defineProperty(e.prototype,"currentSiteId",{get:function(){return this.configuration.data.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sites",{get:function(){return this.configuration.sites},enumerable:!0,configurable:!0}),e.prototype.getBackendUrls=function(){return this.configuration.data.backendUrls?this.configuration.data.backendUrls:[]},e.prototype.setSite=function(e){this.configuration.setSiteID(e.srcElement.value)},e.prototype.showForgotPassword=function(){this.showForgotPass?this.showForgotPass=!1:this.showForgotPass=!0},Object.defineProperty(e.prototype,"showSidebar",{get:function(){return 1024<=window.innerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showExternalSidebar",{get:function(){try{var e=!_.isEmpty(this.configuration.data.loginSidebarUrl);return e&&null===this.externalSidebarUrl&&(this.externalSidebarUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.data.loginSidebarUrl)),e}catch(e){return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showNewsfeed",{get:function(){try{return!!this.configuration.initialized&&_.isEmpty(this.configuration.data.loginSidebarUrl)}catch(e){return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showProgressBar",{get:function(){return this.configuration.data.loginProgressBar},enumerable:!0,configurable:!0}),e=__decorate([core_1.Component({selector:"global-login",template:'<div class="slds-grid slds-wrap slds-is-absolute slds-size--1-of-1 slds-theme--default" style="height:100vh; top: 0px;"><div class="slds-align--absolute-center slds-size--1-of-1 slds-large-size--1-of-2"><div class="slds-size--1-of-1 slds-medium-size--2-of-3 slds-p-around--medium"><div class="slds-align--absolute-center slds-p-vertical--medium"><img src="./config/loginimage"></div><div class="slds-box--border slds-theme--shade" *ngIf="!loginService.session.authData.sessionId && promptUser"><div class="slds-p-around--medium"><form *ngIf="!showForgotPass" (submit)="login()"><div class="slds-form-element slds-m-vertical--small"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'user\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input type="text" name="username" autocomplete [(ngModel)]="username" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="1" placeholder="Username"></div></div><div class="slds-form-element slds-m-vertical--small"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'lock\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input type="password" name="password" autocomplete [(ngModel)]="password" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="2" placeholder="Password"></div></div><div *ngIf="sites.length > 1" class="slds-form-element slds-m-vertical--small"><div class="slds-form-element__control"><div class="slds-select_container slds-m-vertical--xx-small"><select name="currentsite" class="slds-select slds-p-horizontal--large" [ngModel]="currentSiteId" (change)="setSite($event)"><option *ngFor="let site of sites" [value]="site.id">{{site.display}}</option></select></div></div></div><div *ngIf="getLanguages().length > 1" class="slds-form-element slds-m-vertical--small"><div class="slds-form-element__control"><div class="slds-select_container slds-m-vertical--xx-small"><select class="slds-select slds-p-horizontal--large" name="selectLang" [(ngModel)]="selectedlanguage"><option *ngFor="let lang of getLanguages()" [value]="lang.language">{{lang.text}}</option></select></div></div></div><button type="submit" value="Submit" class="slds-button slds-button--brand slds-button_stretch" tabindex="0">Login</button><global-login-google (googletoken)="doLogin()"></global-login-google></form><div class="slds-p-vertical--x-small slds-grid slds-grid--align-spread slds-grid_vertical-align-center" *ngIf="configuration.getData(\'allowForgotPass\')"><div class="slds-truncate slds-text-body_small" title="Forgot password">Forgot password</div><button class="slds-button" (click)="showForgotPassword()"><system-button-icon *ngIf="!showForgotPass" [icon]="\'chevrondown\'" [size]="\'xx-small\'"></system-button-icon><system-button-icon *ngIf="showForgotPass" [icon]="\'chevronup\'" [size]="\'xx-small\'"></system-button-icon></button></div><global-login-forgot-password class="slds-col" *ngIf="showForgotPass" (hasNewPassword)="showForgotPass = $event"></global-login-forgot-password></div></div><global-login-reset-password *ngIf="loginService.session.authData.renewPass" [oldpassword]="password"></global-login-reset-password><ng-container *ngIf="loginService.session.authData.sessionId && !loginService.session.authData.renewPass"><system-loader-progress></system-loader-progress></ng-container></div><div class="slds-is-absolute" style="bottom: 10px;">© 2015 - 2020 aac services k.s. All rights reserved.</div></div><div *ngIf="promptUser && showSidebar" class="slds-size--1-of-1 slds-large-size--1-of-2 slds-height_full" [class.slds-scrollable--y]="!showExternalSidebar"><iframe *ngIf="showExternalSidebar" [src]="externalSidebarUrl" style="border:none;width:100%;height:100%"></iframe><ng-container *ngIf="showNewsfeed"><global-newsfeed></global-newsfeed></ng-container></div></div>',host:{"(window:resize)":"handleResize()"}}),__metadata("design:paramtypes",[services_1.loginService,http_1.HttpClient,services_1.configurationService,services_1.session,services_1.cookie,services_1.language,services_1.broadcast,platform_browser_1.DomSanitizer,core_1.ChangeDetectorRef])],e)}();exports.GlobalLogin=GlobalLogin;var GlobalSetup=function(){function e(e,t,s,o){this.toast=e,this.http=t,this.router=s,this.configurationService=o,this.systemid="000",this.systemname="",this.systemurl="",this.systemproxy=1,this.systemdevmode=0,this.systemloginprogressbar=1,this.systemallowforgotpass=0,this.checking=!1}return Object.defineProperty(e.prototype,"saveEnabled",{get:function(){return""!=this.systemname&&""!=this.systemurl&&!this.checking},enumerable:!0,configurable:!0}),e.prototype.testConnection=function(){var s=this;this.checking=!0,this.http.get("config/check",{params:{url:btoa(this.systemurl)}}).subscribe(function(e){var t=e;1!=t.success?(s.toast.sendToast(t.message,"error"),s.checking=!1):s.saveConnection()},function(e){e.status})},e.prototype.saveConnection=function(){var s=this;this.checking=!0;var e={id:this.systemid,display:this.systemname,backendUrl:this.systemurl,proxy:this.systemproxy,developerMode:this.systemdevmode,loginProgressBar:this.systemloginprogressbar,allowForgotPass:this.systemloginprogressbar};this.http.post("config/set",e,{}).subscribe(function(e){var t=e;1==t.success?(s.configurationService.setSiteData(t.site),s.router.navigate(["/login"])):s.checking=!1},function(e){e.status})},e=__decorate([core_1.Component({selector:"global-setup",template:'<div class="slds-align--absolute-center slds-p-around--medium" style="height: 80%;"><div class="slds-box" style="width: 50%;"><h2 class="slds-text-heading--medium slds-p-vertical--small slds-p-horizontal--x-small">Define Backend Connection</h2><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label"><abbr class="slds-required">*</abbr>id</label><div class="slds-form-element__control"><input type="text" class="slds-input" [disabled]="checking" [(ngModel)]="systemid"></div></div><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label"><abbr class="slds-required">*</abbr>Name</label><div class="slds-form-element__control"><input type="text" class="slds-input" [disabled]="checking" [(ngModel)]="systemname"></div></div><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label"><abbr class="slds-required">*</abbr>Backend URL</label><div class="slds-form-element__control"><input type="text" class="slds-input" [disabled]="checking" [(ngModel)]="systemurl"></div></div><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label">use proxy</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [disabled]="checking" [(ngModel)]="systemproxy"><option value="1">Yes</option><option value="0">No</option></select></div></div></div><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label">developermode</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [disabled]="checking" [(ngModel)]="systemdevmode"><option value="1">Yes</option><option value="0">No</option></select></div></div></div><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label">Show Loader Details</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [disabled]="checking" [(ngModel)]="systemloginprogressbar"><option value="0">Yes</option><option value="1">No</option></select></div></div></div><div class="slds-form-element slds-p-vertical--xx-small"><label class="slds-form-element__label">Show Forgot Password on Login Screen</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [disabled]="checking" [(ngModel)]="systemallowforgotpass"><option value="0">Yes</option><option value="1">No</option></select></div></div></div><div class="slds-text-align--right slds-p-vertical--small"><button class="slds-button slds-button--brand" [disabled]="!saveEnabled" (click)="testConnection()">Check & Save</button></div></div></div>'}),__metadata("design:paramtypes",[services_1.toast,http_1.HttpClient,router_1.Router,services_1.configurationService])],e)}();exports.GlobalSetup=GlobalSetup;var GlobalLoginForgotPassword=function(){function e(e,t,s){this.http=e,this.configuration=t,this.toast=s,this.email="",this.token="",this.password=void 0,this.repeatPassword=void 0,this.pwdCheck=new RegExp("//"),this.pwdGuideline="",this.infoLoaded=!1,this.emailEmpty=!1,this.tokenEmpty=!1,this.tokenInvalid=!1,this.promptUser=!1,this.showForgotPasswordEmail=!0,this.promptNewPass=!1,this.showForgotPasswordToken=!1,this.hasNewPassword=new core_1.EventEmitter,this.getInfo()}return e.prototype.getInfo=function(){var t=this;this.http.get(this.configuration.getBackendUrl()+"/forgotPassword/info").subscribe(function(e){t.pwdCheck=new RegExp(e.pwdCheck.regex),t.pwdGuideline=e.pwdCheck.guideline,t.infoLoaded=!0})},Object.defineProperty(e.prototype,"pwderror",{get:function(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pwdreperror",{get:function(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."},enumerable:!0,configurable:!0}),e.prototype.keypressed=function(e){13===e.keyCode&&(this.showForgotPasswordEmail&&this.sendEmail(),this.showForgotPasswordToken&&this.sendToken(),this.promptNewPass&&this.sendNewPass())},e.prototype.sendEmail=function(){var t=this;0<this.email.length?(this.emailEmpty=!1,this.http.get(this.configuration.getBackendUrl()+"/forgotPassword/"+this.email).subscribe(function(e){e?0==e.result?t.toast.sendToast(e.message,"error"):(t.showForgotPasswordToken=!0,t.showForgotPasswordEmail=!1,t.toast.sendToast("Successfully sent, check your inbox to get the token code","success")):t.toast.sendToast("User with the given email does not exist","error")},function(e){switch(e.status){case 401:t.showForgotPasswordEmail=!0}})):this.emailEmpty=!0},e.prototype.sendToken=function(){var s=this;0<this.token.length?(this.tokenEmpty=!1,this.http.post(this.configuration.getBackendUrl()+"/forgotPassword/"+this.email+"/"+this.token,{}).subscribe(function(e){var t=e;s.showForgotPasswordEmail=!1,t.token_valid?(s.showForgotPasswordToken=!1,s.promptNewPass=!0):(s.tokenInvalid=!0,s.toast.sendToast("Token or email is invalid","error","Token is expired, or invalid or does not belong to this email address",!1))},function(e){switch(e.status){case 401:s.showForgotPasswordToken=!0}})):this.emailEmpty=!0},e.prototype.sendNewPass=function(){var t=this;if(this.infoLoaded&&this.pwderror)return!1;this.password&&0==this.pwdreperror&&this.http.post(this.configuration.getBackendUrl()+"/forgotPassword/resetPass",{email:this.email,token:this.token,password:this.password}).subscribe(function(e){t.promptNewPass=!1,t.toast.sendToast("please log in with new password","default","please return to login form and enter login data with new password",!1),t.hasNewPassword.emit(!1)},function(e){switch(e.status){case 401:t.promptNewPass=!0}})},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"hasNewPassword",void 0),e=__decorate([core_1.Component({selector:"global-login-forgot-password",template:'<div id="login-forgot-password"><div class="slds-form-element slds-m-vertical--small" [ngClass]="{\'slds-has-error\': emailEmpty}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left" *ngIf="showForgotPasswordEmail"><system-utility-icon [icon]="\'email\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input type="email" [(ngModel)]="email" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="3" placeholder="Email address of your user account"></div></div><div class="slds-button slds-button--brand" (click)="sendEmail()" *ngIf="showForgotPasswordEmail">Send</div><div class="slds-form-element slds-m-vertical--small" [ngClass]="{\'slds-has-error\': (tokenEmpty || tokenInvalid)}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left" *ngIf="showForgotPasswordToken"><system-utility-icon [icon]="\'shield\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input type="text" [(ngModel)]="token" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="4" placeholder="Token that was sent via email"></div></div><div class="slds-button slds-button--brand" (click)="sendToken()" *ngIf="showForgotPasswordToken">Confirm</div><div class="spiceNewPasswordModal" *ngIf="promptNewPass"><div *ngIf="pwdGuideline" class="slds-m-vertical--medium">Password Guideline:<br>{{pwdGuideline}}</div><div class="slds-form-element slds-m-vertical--small" [ngClass]="{\'slds-has-error\': passField.touched && passField.dirty && pwderror}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'lock\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input #passField="ngModel" type="password" [(ngModel)]="password" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="1" placeholder="enter new password"></div><div *ngIf="passField.touched && passField.dirty && pwderror" class="slds-form-element__help slds-text-color--error">{{pwderror}}</div></div><div class="slds-form-element slds-m-vertical--small" [ngClass]="{\'slds-has-error\': repPassField.touched && repPassField.dirty && pwdreperror}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'lock\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input type="password" #repPassField="ngModel" [(ngModel)]="repeatPassword" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="2" placeholder="repeat new password"></div><div *ngIf="repPassField.touched && repPassField.dirty && pwdreperror" class="slds-form-element__help slds-text-color--error">{{pwdreperror}}</div></div><div class="slds-button slds-button--brand" (click)="sendNewPass()" tabindex="3">Save</div></div></div>',host:{"(window:keypress)":"this.keypressed($event)"}}),__metadata("design:paramtypes",[http_1.HttpClient,services_1.configurationService,services_1.toast])],e)}();exports.GlobalLoginForgotPassword=GlobalLoginForgotPassword;var GlobalLoginResetPassword=function(){function e(e,t,s,o,i){this.loginService=e,this.http=t,this.configuration=s,this.toast=o,this.session=i,this.promptNewPass=!1,this.pwdCheck=new RegExp("//"),this.infoLoaded=!1,this.getInfo()}return Object.defineProperty(e.prototype,"oldPwError",{get:function(){return this.oldPassword==this.password&&"Old password is not allowed to be used as a new password"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pwderror",{get:function(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pwdreperror",{get:function(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."},enumerable:!0,configurable:!0}),e.prototype.keypressed=function(e){"Enter"===e.key&&this.sendNewPass(),"Escape"===e.key&&this.loginService.logout()},e.prototype.getInfo=function(){var t=this;this.http.get(this.configuration.getBackendUrl()+"/forgotPassword/info").subscribe(function(e){t.pwdCheck=new RegExp(e.pwdCheck.regex),t.pwdGuideline=e.pwdCheck.guideline,t.infoLoaded=!0})},e.prototype.sendNewPass=function(){var t=this;if(this.infoLoaded&&this.pwderror)return!1;if(this.password&&0==this.pwdreperror&&0==this.oldPwError){var e=new http_1.HttpHeaders;e=e.set("OAuth-Token",this.session.authData.sessionId),this.http.post(this.configuration.getBackendUrl()+"/resetTempPass",{password:this.password},{headers:e}).subscribe(function(e){t.session.authData.renewPass=!1,t.toast.sendToast("Password was successfully changed","success","",5),t.loginService.load()},function(e){switch(e.status){case 401:t.promptNewPass=!0}})}},__decorate([core_1.Input("oldpassword"),__metadata("design:type",String)],e.prototype,"oldPassword",void 0),e=__decorate([core_1.Component({selector:"global-login-reset-password",template:'<div id="reset-password"><div style="height: 640px;"><section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container"><header class="slds-modal__header"><button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" (click)="loginService.logout()"><system-button-icon [icon]="\'close\'"></system-button-icon><span class="slds-assistive-text">Close</span></button><h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">New password</h2></header><div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1"><div *ngIf="pwdGuideline" class="slds-m-vertical--medium">Password Guideline:<br>{{pwdGuideline}}</div><div class="slds-form-element slds-m-vertical--small" [ngClass]="{\'slds-has-error\': passField.touched && passField.dirty && (pwderror || oldPwError)}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'lock\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input #passField="ngModel" type="password" [(ngModel)]="password" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="1" placeholder="enter new password" autofocus></div><div *ngIf="passField.touched && passField.dirty && pwderror" class="slds-form-element__help slds-text-color--error">{{pwderror}}</div><div *ngIf="passField.touched && passField.dirty && oldPwError" class="slds-form-element__help slds-text-color--error">{{oldPwError}}</div></div><div class="slds-form-element slds-m-vertical--small" [ngClass]="{\'slds-has-error\': repPassField.touched && repPassField.dirty && pwdreperror}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'lock\'" [addclasses]="\'slds-input__icon slds-icon-text-default\'"></system-utility-icon><input type="password" #repPassField="ngModel" [(ngModel)]="repeatPassword" class="slds-input slds-p-horizontal--large slds-p-vertical--small" tabindex="2" placeholder="repeat new password"></div><div *ngIf="repPassField.touched && repPassField.dirty && pwdreperror" class="slds-form-element__help slds-text-color--error">{{pwdreperror}}</div></div></div><footer class="slds-modal__footer"><button class="slds-button slds-button--brand" (click)="sendNewPass()" tabindex="3">Save</button></footer></div></section><div class="slds-backdrop slds-backdrop_open"></div></div></div>',host:{"(window:keyup)":"this.keypressed($event)"}}),__metadata("design:paramtypes",[services_1.loginService,http_1.HttpClient,services_1.configurationService,services_1.toast,services_1.session])],e)}();exports.GlobalLoginResetPassword=GlobalLoginResetPassword;var GlobalNavigation=function(){function e(e){this.metadata=e}return e=__decorate([core_1.Component({selector:"global-navigation",template:'<div class="slds-context-bar"><global-app-launcher></global-app-launcher><global-navigation-menu class="slds-context-bar__secondary" role="navigation"></global-navigation-menu></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.GlobalNavigation=GlobalNavigation;var GlobalNavigationMenu=function(){function e(e,t,s,o){var i=this;this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=o,this.moreComponentRef=void 0,this.menuItems=[],this.renderedItems=[],this.moreItems=[],this.movingActive=!1,this.rendering=!1,this.resizeTimeOut=void 0,this.broadcast.message$.subscribe(function(e){i.handleMessage(e)}),this.navigation.activeModule$.subscribe(function(e){return i.checkActiveModule()})}return e.prototype.ngAfterViewInit=function(){this.buildMenuItems(),this.renderMenu()},e.prototype.buildMenuItems=function(){this.menuItems=[];for(var e=0,t=this.metadata.getRoleModules(!0);e<t.length;e++){var s=t[e];this.menuItems.push(s)}},e.prototype.handleResize=function(){var e=this;this.buildMenuItems(),this.resizeTimeOut&&window.clearTimeout(this.resizeTimeOut),this.resizeTimeOut=window.setTimeout(function(){return e.renderMenu()},250)},e.prototype.checkActiveModule=function(){if(this.movingActive||this.rendering)return!1;for(var e=this.menuItems.indexOf(this.navigation.activeModule),t=!1,s=0,o=this.renderedItems;s<o.length;s++){if(o[s].module==this.navigation.activeModule){t=!0;break}}if(!t&&0!=e&&e+1>this.renderedItems.length){var i=this.menuItems.splice(e,1),a=this.renderedItems.pop();return a&&(a.componentRef.destroy(),this.menuItems.splice(this.renderedItems.length,0,i[0]),this.movingActive=!0,this.destroyMoreItem(),this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length])),!1}return!0},e.prototype.destroyMenu=function(){for(var e=0,t=this.renderedItems;e<t.length;e++){t[e].componentRef.destroy()}this.renderedItems=[],this.destroyMoreItem(),this.movingActive=!1},e.prototype.renderMenu=function(){this.destroyMenu(),this.rendering=!0,this.addMenuItem(this.menuItems[0],this.menuItems[0])},e.prototype.addMenuItem=function(t,s){var o=this;this.metadata.addComponentDirect("GlobalNavigationMenuItem",this.menucontainer).subscribe(function(e){e.instance.item={module:t,name:s},o.renderedItems.push({module:t,componentRef:e})})},e.prototype.addMoreItem=function(){var s=this;this.destroyMoreItem(),this.metadata.addComponentDirect("GlobalNavigationMenuMore",this.menucontainer).subscribe(function(e){s.moreItems=[];for(var t=s.renderedItems.length;t<s.menuItems.length;)s.moreItems.push(s.menuItems[t]),t++;e.instance.moreMenuItems=s.moreItems,s.moreComponentRef={componentRef:e}})},e.prototype.destroyMoreItem=function(){this.moreComponentRef&&(this.moreComponentRef.componentRef.destroy(),this.moreComponentRef=void 0)},e.prototype.getRenderedWidth=function(){for(var e=0,t=0,s=this.renderedItems;t<s.length;t++){e+=s[t].width}return e},e.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems(),this.renderMenu();break;case"navigation.itemadded":for(var t=0,s=this.renderedItems;t<s.length;t++){var o=s[t];o.module===e.messagedata.module&&(o.width=e.messagedata.width)}var i=this.getRenderedWidth();if(this.movingActive)this.elementRef.nativeElement.offsetWidth,this.movingActive=!1,this.addMoreItem();else if(i>this.elementRef.nativeElement.offsetWidth)this.renderedItems.pop().componentRef.destroy(),this.menuItems.length>this.renderedItems.length?this.addMoreItem():this.rendering=!1;else this.menuItems.length>this.renderedItems.length&&this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length]);break;case"navigation.moreadded":if(this.moreComponentRef.width=e.messagedata.width,0<this.renderedItems.length&&this.getRenderedWidth()+e.messagedata.width>this.elementRef.nativeElement.offsetWidth)this.renderedItems.pop().componentRef.destroy(),this.checkActiveModule()&&this.addMoreItem()}},__decorate([core_1.ViewChild("menucontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"menucontainer",void 0),__decorate([core_1.ViewChild("morecontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"morecontainer",void 0),e=__decorate([core_1.Component({selector:"global-navigation-menu",template:'<ul class="slds-grid"><div #menucontainer></div><div #morecontainer></div></ul>',host:{"(window:resize)":"handleResize()"}}),__metadata("design:paramtypes",[services_1.metadata,core_1.ElementRef,services_1.broadcast,services_1.navigation])],e)}();exports.GlobalNavigationMenu=GlobalNavigationMenu;var GlobalNavigationMenuItemActionContainer=function(){function GlobalNavigationMenuItemActionContainer(e,t,s,o,i){this.language=e,this.metadata=t,this.model=s,this.ngZone=o,this.cdr=i,this.actionemitter=new core_1.EventEmitter,this.standardActions={NEW:"GlobalNavigationMenuItemActionNew",ROUTE:"GlobalNavigationMenuItemActionRoute"},this.stable=!1}return Object.defineProperty(GlobalNavigationMenuItemActionContainer.prototype,"id",{get:function(){return this.actionitem.id},enumerable:!0,configurable:!0}),Object.defineProperty(GlobalNavigationMenuItemActionContainer.prototype,"disabled",{get:function(){return!this.componentref||!!this.componentref.instance.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(GlobalNavigationMenuItemActionContainer.prototype,"hidden",{get:function(){return!this.stable||!this.componentref||!!this.componentref.instance.hidden},enumerable:!0,configurable:!0}),GlobalNavigationMenuItemActionContainer.prototype.ngAfterViewInit=function(){var t=this;this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer).subscribe(function(e){e.instance.parent=t.model,e.instance.actionconfig=t.actionitem.actionconfig,e.instance.actionemitter&&e.instance.actionemitter.subscribe(function(e){t.actionemitter.emit(e)}),t.componentref=e,t.cdr.detectChanges()})},GlobalNavigationMenuItemActionContainer.prototype.execute=function(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()},__decorate([core_1.ViewChild("actioncontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalNavigationMenuItemActionContainer.prototype,"actioncontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],GlobalNavigationMenuItemActionContainer.prototype,"actionitem",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],GlobalNavigationMenuItemActionContainer.prototype,"actionemitter",void 0),GlobalNavigationMenuItemActionContainer=__decorate([core_1.Component({selector:"global-navigation-menu-item-action-container",template:"<div #actioncontainer></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,core_1.NgZone,core_1.ChangeDetectorRef])],GlobalNavigationMenuItemActionContainer)}();exports.GlobalNavigationMenuItemActionContainer=GlobalNavigationMenuItemActionContainer;var GlobalNavigationMenuItem=function(){function GlobalNavigationMenuItem(e,t,s,o,i,a,n,l,r,d){this.metadata=e,this.language=t,this.router=s,this.elementRef=o,this.broadcast=i,this.navigation=a,this.model=n,this.recent=l,this.favorite=r,this.renderer=d,this.itemtext="test",this.item={module:null,name:null},this.isOpen=!1,this.isInitialized=!1,this.itemMenu=[],this.favorites=[],this.menucomponents=[]}return GlobalNavigationMenuItem.prototype.executeMenuItem=function(s){var o=this;this.itemMenu.some(function(e,t){if(e.id===s){switch(e.action){case"add":o.isOpen=!1,o.model.addModel()}return!0}})},GlobalNavigationMenuItem.prototype.navigateTo=function(){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module])},GlobalNavigationMenuItem.prototype.navigateRecent=function(e){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module+"/"+e])},GlobalNavigationMenuItem.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.item.module);e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.item.module),this.model.module=this.item.module},GlobalNavigationMenuItem.prototype.toggleOpen=function(){var t=this;this.isInitialized||this.initialize(),this.isOpen=!this.isOpen,this.isOpen?(this.favorites=this.getFavorites(),this.buildMenu(),this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)})):this.clickListener&&this.clickListener()},GlobalNavigationMenuItem.prototype.initialize=function(){var t=this;"Home"!=this.item.module?this.recent.getModuleRecent(this.item.module).subscribe(function(e){t.isInitialized=!0}):this.isInitialized=!0},Object.defineProperty(GlobalNavigationMenuItem.prototype,"recentitems",{get:function(){return this.recent.moduleItems[this.item.module]?this.recent.moduleItems[this.item.module]:[]},enumerable:!0,configurable:!0}),GlobalNavigationMenuItem.prototype.getFavorites=function(){return this.favorite.getFavorites(this.item.module)},GlobalNavigationMenuItem.prototype.onClick=function(e){(!this.elementRef.nativeElement.contains(e.target)||this.elementRef.nativeElement.contains(e.target)&&this.menulist.element.nativeElement.contains(e.target))&&(this.isOpen=!1)},GlobalNavigationMenuItem.prototype.hasMenu=function(){return 0<this.itemMenu.length||this.metadata.getModuleTrackflag(this.item.module)},GlobalNavigationMenuItem.prototype.getMenuLabel=function(e){return this.language.getLabel(this.item.module,e)},GlobalNavigationMenuItem.prototype.isActive=function(){return this.navigation.activeModule==this.item.module},GlobalNavigationMenuItem.prototype.ngAfterViewInit=function(){this.broadcast.broadcastMessage("navigation.itemadded",{module:this.item.module,width:this.elementRef.nativeElement.offsetWidth}),this.model.module=this.item.module},GlobalNavigationMenuItem.prototype.buildMenu=function(){return!0},GlobalNavigationMenuItem.prototype.ngOnDestroy=function(){this.destroyMenu()},GlobalNavigationMenuItem.prototype.destroyMenu=function(){for(var e=0,t=this.menucomponents;e<t.length;e++){t[e].destroy()}},GlobalNavigationMenuItem.prototype.isDisabled=function(t){var s=!0;return this.menuItemlist&&this.menuItemlist.some(function(e){if(e.id==t)return s=e.disabled,!0}),s},GlobalNavigationMenuItem.prototype.isHidden=function(t){var s=!1;return this.menuItemlist&&this.menuItemlist.some(function(e){if(e.id==t)return s=e.hidden,!0}),s},GlobalNavigationMenuItem.prototype.propagateclick=function(t){this.menuItemlist.some(function(e){if(e.id==t)return e.disabled||e.execute(),!0})},__decorate([core_1.ViewChild("menulist",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalNavigationMenuItem.prototype,"menulist",void 0),__decorate([core_1.ViewChild("menucontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalNavigationMenuItem.prototype,"menucontainer",void 0),__decorate([core_1.ViewChildren(GlobalNavigationMenuItemActionContainer),__metadata("design:type",core_1.QueryList)],GlobalNavigationMenuItem.prototype,"menuItemlist",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],GlobalNavigationMenuItem.prototype,"itemtext",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],GlobalNavigationMenuItem.prototype,"item",void 0),GlobalNavigationMenuItem=__decorate([core_1.Component({selector:"global-navigation-menu-item",template:'<li class="slds-context-bar__dropdown-trigger slds-dropdown-trigger slds-dropdown-trigger--click" [ngClass]="{\'slds-is-open\': isOpen}" aria-haspopup="true"><a href="javascript:void(0);" class="slds-context-bar__label-action" (click)="navigateTo()"><span class="slds-truncate"><system-label-modulename [module]="item.name"></system-label-modulename></span></a><div *ngIf="hasMenu()" class="slds-context-bar__icon-action slds-p-left--none"><button class="slds-button slds-button--icon slds-context-bar__button" (click)="toggleOpen()"><system-button-icon [icon]="\'chevrondown\'"></system-button-icon></button></div><div class="slds-dropdown slds-nubbin--top"><ul #menulist class="slds-dropdown__list" role="menu"><div #menucontainer></div><ng-container *ngIf="itemMenu.length > 0"><li *ngFor="let actionitem of itemMenu" class="slds-dropdown__item" role="presentation" (click)="propagateclick(actionitem.id)"><a href="javascript:void(0);" role="menuitem"><global-navigation-menu-item-action-container class="slds-truncate" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem"></global-navigation-menu-item-action-container></a></li></ng-container><ng-container *ngIf="favorites.length > 0"><li class="slds-has-divider--top-space" role="separator"></li><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_FAVORITES"></system-label></span></li><li *ngFor="let favorite of favorites" class="slds-dropdown__item" role="presentation" (click)="navigateRecent(favorite.item_id)"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">{{favorite.item_summary}}</span></a></li></ng-container><ng-container *ngIf="item.module != \'Home\'"><li class="slds-has-divider--top-space" role="separator"></li><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_RECENTLYVIEWED"></system-label></span></li><li *ngFor="let recentItem of recentitems" class="slds-dropdown__item" role="presentation" (click)="navigateRecent(recentItem.item_id)"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">{{recentItem.item_summary}}</span></a></li><li class="slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small" *ngIf="recentitems.length == 0 && isInitialized"><system-label label="LBL_NO_ENTRIES"></system-label></li></ng-container></ul><system-spinner *ngIf="!isInitialized" size="16"></system-spinner></div></li>',host:{"[class.slds-context-bar__item]":"true","[class.slds-is-active]":"isActive()"},providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,router_1.Router,core_1.ElementRef,services_1.broadcast,services_1.navigation,services_1.model,services_1.recent,services_1.favorite,core_1.Renderer2])],GlobalNavigationMenuItem)}();exports.GlobalNavigationMenuItem=GlobalNavigationMenuItem;var GlobalNavigationMenuItemNew=function(){function GlobalNavigationMenuItemNew(e,t){this.language=e,this.model=t}return GlobalNavigationMenuItemNew.prototype.exceuteItem=function(){this.model.id="",this.model.addModel()},GlobalNavigationMenuItemNew=__decorate([core_1.Component({selector:"global-navigation-menu-item-new",template:'<li class="slds-dropdown__item" role="presentation" (click)="exceuteItem()"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate"><global-nevigation-menu-item-icon [icon]="\'add\'"></global-nevigation-menu-item-icon><system-label-modulename [module]="model.module" [singular]="true"></system-label-modulename></span></a></li>'}),__metadata("design:paramtypes",[services_1.language,services_1.model])],GlobalNavigationMenuItemNew)}();exports.GlobalNavigationMenuItemNew=GlobalNavigationMenuItemNew;var GlobalNavigationMenuItemActionNew=function(){function GlobalNavigationMenuItemActionNew(e,t,s){this.language=e,this.model=t,this.metadata=s,this.disabled=!0}return GlobalNavigationMenuItemActionNew.prototype.execute=function(){this.model.id="",this.model.addModel()},GlobalNavigationMenuItemActionNew.prototype.ngOnInit=function(){this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)},GlobalNavigationMenuItemActionNew=__decorate([core_1.Component({selector:"global-navigation-menu-item-action-new",template:'<div class="slds-truncate slds-grid slds-grid--vertical-align-center"><system-utility-icon icon="add" size="x-small" class="slds-p-right--x-small"></system-utility-icon><system-label-modulename [module]="model.module" [singular]="true"></system-label-modulename></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata])],GlobalNavigationMenuItemActionNew)}();exports.GlobalNavigationMenuItemActionNew=GlobalNavigationMenuItemActionNew;var GlobalNavigationMenuItemRoute=function(){function GlobalNavigationMenuItemRoute(e,t,s,o){this.metadata=e,this.language=t,this.model=s,this.router=o,this.actionconfig={}}return Object.defineProperty(GlobalNavigationMenuItemRoute.prototype,"actionicon",{get:function(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"},enumerable:!0,configurable:!0}),Object.defineProperty(GlobalNavigationMenuItemRoute.prototype,"actionlabel",{get:function(){if(this.actionconfig.label&&-1<this.actionconfig.label.indexOf(":")){var e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)},enumerable:!0,configurable:!0}),GlobalNavigationMenuItemRoute.prototype.exceuteItem=function(){this.router.navigate([this.actionconfig.route])},GlobalNavigationMenuItemRoute=__decorate([core_1.Component({selector:"global-navigation-menu-item-route",template:'<li class="slds-dropdown__item" role="presentation" (click)="exceuteItem()"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate"><global-nevigation-menu-item-icon [icon]="actionicon"></global-nevigation-menu-item-icon>{{actionlabel}}</span></a></li>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.model,router_1.Router])],GlobalNavigationMenuItemRoute)}();exports.GlobalNavigationMenuItemRoute=GlobalNavigationMenuItemRoute;var GlobalNavigationMenuItemActionRoute=function(){function GlobalNavigationMenuItemActionRoute(e,t,s){this.language=e,this.model=t,this.router=s,this.actionconfig={},this.disabled=!1}return Object.defineProperty(GlobalNavigationMenuItemActionRoute.prototype,"actionicon",{get:function(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"},enumerable:!0,configurable:!0}),Object.defineProperty(GlobalNavigationMenuItemActionRoute.prototype,"actionlabel",{get:function(){if(this.actionconfig.label&&-1<this.actionconfig.label.indexOf(":")){var e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)},enumerable:!0,configurable:!0}),GlobalNavigationMenuItemActionRoute.prototype.execute=function(){this.router.navigate([this.actionconfig.route])},GlobalNavigationMenuItemActionRoute=__decorate([core_1.Component({template:'<div class="slds-truncate slds-grid slds-grid--vertical-align-center"><system-utility-icon [icon]="actionicon" size="x-small" class="slds-p-right--x-small"></system-utility-icon>{{actionlabel}}</div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,router_1.Router])],GlobalNavigationMenuItemActionRoute)}();exports.GlobalNavigationMenuItemActionRoute=GlobalNavigationMenuItemActionRoute;var GlobalNavigationMenuItemIcon=function(){function e(){this.icon=""}return e.prototype.getSvgHRef=function(){return"./sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),e=__decorate([core_1.Component({selector:"global-nevigation-menu-item-icon",template:'<svg aria-hidden="true" class="slds-icon slds-icon--x-small slds-icon-text-default slds-m-right--x-small"><use [attr.xlink:href]="getSvgHRef()"></use></svg>'})],e)}();exports.GlobalNavigationMenuItemIcon=GlobalNavigationMenuItemIcon;var GlobalNavigationMenuMore=function(){function GlobalNavigationMenuMore(e,t,s,o){this.language=e,this.router=t,this.elementRef=s,this.broadcast=o,this.moreMenuItems=[]}return GlobalNavigationMenuMore.prototype.navigateTo=function(e){this.router.navigate(["/module/"+e])},GlobalNavigationMenuMore.prototype.ngAfterViewInit=function(){this.broadcast.broadcastMessage("navigation.moreadded",{module:"more",width:this.elementRef.nativeElement.offsetWidth})},GlobalNavigationMenuMore=__decorate([core_1.Component({selector:"global-navigation-menu-more",template:'<li class="slds-context-bar__dropdown-trigger slds-dropdown-trigger slds-dropdown-trigger--hover" aria-haspopup="true"><a href="javascript:void(0);" class="slds-context-bar__label-action"><span class="slds-truncate"><system-label label="LBL_MORE"></system-label></span></a><div class="slds-context-bar__icon-action slds-p-left--none"><button class="slds-button slds-button--icon slds-context-bar__button"><system-button-icon [icon]="\'down\'"></system-button-icon></button></div><div class="slds-dropdown slds-dropdown--right"><ul class="slds-dropdown__list" role="menu"><li *ngFor="let item of moreMenuItems" class="slds-dropdown__item" role="presentation" (click)="navigateTo(item)"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate"><system-label-modulename [module]="item"></system-label-modulename></span></a></li></ul></div></li>',host:{"[class.slds-context-bar__item]":"true"}}),__metadata("design:paramtypes",[services_1.language,router_1.Router,core_1.ElementRef,services_1.broadcast])],GlobalNavigationMenuMore)}();exports.GlobalNavigationMenuMore=GlobalNavigationMenuMore;var GlobalNavigationCompact=function(){function e(e,t,s,o,i,a,n,l,r,d,c,m,u){var p=this;this.menuService=e,this.metadata=t,this.language=s,this.loginService=o,this.navigation=i,this.favorite=a,this.model=n,this.recent=l,this.session=r,this.modal=d,this.cdr=c,this.broadcast=m,this.router=u,this.showmenu=!1,this.menuitems=[],this.activeItem="",this.activeItemMenu=[],this.activeItemMenucomponents=[],this.subscriptions=new rxjs_1.Subscription,this.buildMenuItems();var h=this.navigation.activeModule$.subscribe(function(e){return p.buildModuleMenuItems()});this.subscriptions.add(h);var g=this.broadcast.message$.subscribe(function(e){p.handleMessage(e)});this.subscriptions.add(g)}return Object.defineProperty(e.prototype,"activeItemIsModule",{get:function(){return!!this.metadata.getModuleDefs(this.activeItem)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentlanguage",{get:function(){return this.language.currentlanguage},set:function(e){this.language.currentlanguage=e,this.language.loadLanguage()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuItems",{get:function(){var t=this;return this.menuitems.filter(function(e){return e!=t.activeItem})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeRoleName",{get:function(){var e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerMiddleStyle",{get:function(){return{height:"calc(100vh - "+(this.containermiddle.element.nativeElement.offsetTop+this.containerbottom.element.nativeElement.offsetHeight)+"px)"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuStyle",{get:function(){return{left:this.showmenu?"0px":"-250px","box-shadow":this.showmenu?"5px 0 15px #888":"none"}},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.buildModuleMenuItems(),this.cdr.detectChanges()},e.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems()}},e.prototype.navigateTo=function(e){this.router.navigate(["/module/"+e]),this.showmenu=!1},e.prototype.buildMenuItems=function(){this.menuitems=[];for(var e=0,t=this.metadata.getRoleModules(!0);e<t.length;e++){var s=t[e];this.menuitems.push(s)}},e.prototype.buildModuleMenuItems=function(){this.activeItem=this.navigation.activeModule,this.destroyActiveItemMenu(),this.activeItemMenu=[],this.activeItemIsModule&&this.menucontainer&&(this.model.module=this.activeItem,this.activeItemMenu=this.metadata.getModuleMenu(this.activeItem),this.buildActiveItemMenu())},e.prototype.showAppLauncher=function(){this.showmenu=!1,this.modal.openModal("GlobalAppLauncherDialog")},e.prototype.getAvialableLanguages=function(){return this.language.getAvialableLanguages(!0)},e.prototype.toggleMenu=function(){this.showmenu=!this.showmenu},e.prototype.closeMenu=function(){this.showmenu=!1},e.prototype.logout=function(){this.loginService.logout()},e.prototype.trackByFn=function(e,t){return t.id},e.prototype.buildActiveItemMenu=function(){for(var s=this,e=function(t){switch(t.action){case"NEW":o.metadata.checkModuleAcl(o.activeItem,"create")&&o.metadata.addComponent("GlobalNavigationMenuItemNew",o.menucontainer).pipe(operators_1.take(1)).subscribe(function(e){s.activeItemMenucomponents.push(e)});break;case"ROUTE":o.metadata.addComponent("GlobalNavigationMenuItemRoute",o.menucontainer).pipe(operators_1.take(1)).subscribe(function(e){e.instance.actionconfig=t.actionconfig,s.activeItemMenucomponents.push(e)})}},o=this,t=0,i=this.activeItemMenu;t<i.length;t++){e(i[t])}},e.prototype.destroyActiveItemMenu=function(){for(var e=0,t=this.activeItemMenucomponents;e<t.length;e++){t[e].destroy()}},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe(),this.destroyActiveItemMenu(),this.cdr.detach()},__decorate([core_1.ViewChild("containermiddle",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"containermiddle",void 0),__decorate([core_1.ViewChild("containerbottom",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"containerbottom",void 0),__decorate([core_1.ViewChild("menucontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"menucontainer",void 0),e=__decorate([core_1.Component({selector:"global-navigation-compact",template:'<button class="slds-button slds-button--icon" (click)="toggleMenu()"><system-utility-icon icon="rows" size="small"></system-utility-icon></button><div class="slds-is-absolute slds-theme--shade" style="width: 250px; top: 0; z-index: 998; height: 100vh; transition: left 1s" [ngStyle]="menuStyle"><div class="slds-grid slds-grid--align-spread slds-grid--vertical-align-start slds-p-around--x-small"><div class="slds-grid slds-grid--vertical-align-center"><div style="transform:scale(0.8);" (click)="showAppLauncher()"><a href="javascript:void(0);" class="slds-icon-waffle_container"><div class="slds-icon-waffle"><div class="slds-r1"></div><div class="slds-r2"></div><div class="slds-r3"></div><div class="slds-r4"></div><div class="slds-r5"></div><div class="slds-r6"></div><div class="slds-r7"></div><div class="slds-r8"></div><div class="slds-r9"></div></div></a></div><div class="slds-truncate slds-p-left--xx-small slds-text-heading_small">{{activeRoleName}}</div></div><button class="slds-button slds-button--icon" (click)="closeMenu()"><system-button-icon icon="close"></system-button-icon></button></div><div *ngIf="activeItemIsModule" class="slds-theme--default slds-p-vertical--x-small"><div class="slds-grid slds-grid--vertical-align-center slds-p-left--small slds-p-vertical--xx-small"><system-icon [module]="activeItem" size="x-small" divClass></system-icon><a href="javascript:void(0);" class="slds-p-left--small slds-text-heading_small"><span class="slds-truncate" style="font-weight: bold;"><system-label-modulename [module]="activeItem"></system-label-modulename></span></a></div><ul role="menu" (click)="closeMenu()"><ng-container #menucontainer></ng-container></ul></div><div #containermiddle [ngStyle]="containerMiddleStyle" class="slds-grid"><div class="slds-has-divider--bottom-space slds-scrollable--y spicecrm-scrollbar" style="width: 100%;"><div *ngFor="let item of menuItems; trackBy: trackByFn" (click)="navigateTo(item)" class="slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small slds-p-left--small"><system-icon [module]="item" size="x-small" divClass></system-icon><a href="javascript:void(0);" class="slds-p-left--small slds-text-heading_small"><span class="slds-truncate"><system-label-modulename [module]="item"></system-label-modulename></span></a></div></div></div><div #containerbottom class="slds-grid slds-grid--vertical-align-center slds-p-around--xx-small"><div class="slds-form-element slds-grow"><div class="slds-form-element__control"><div class="slds-select_container"><select [disabled]="getAvialableLanguages().length <= 1" class="slds-select" [(ngModel)]="currentlanguage"><option *ngFor="let language of getAvialableLanguages()" [value]="language.language">{{language.text}}</option></select></div></div></div><div class="slds-grid slds-grid--align-end slds-p-horizontal--small slds-col--bump-left"><system-utility-icon icon="logout" size="x-small" [title]="language.getLabel(\'LBL_LOGOFF\')" (click)="logout()"></system-utility-icon></div></div></div>',providers:[MenuService,services_1.model]}),__metadata("design:paramtypes",[MenuService,services_1.metadata,services_1.language,services_1.loginService,services_1.navigation,services_1.favorite,services_1.model,services_1.recent,services_1.session,services_1.modal,core_1.ChangeDetectorRef,services_1.broadcast,router_1.Router])],e)}();exports.GlobalNavigationCompact=GlobalNavigationCompact;var GlobalDockedComposerContainer=function(){function e(e){this.dockedComposer=e}return Object.defineProperty(e.prototype,"isVisible",{get:function(){return 0<this.dockedComposer.composers.length||0<this.dockedComposer.calls.length},enumerable:!0,configurable:!0}),e.prototype.getComposerStyle=function(e){if(e>=this.dockedComposer.maxComposers-this.dockedComposer.calls.length)return{display:"none"}},Object.defineProperty(e.prototype,"displayOverflow",{get:function(){return this.dockedComposer.composers.length+this.dockedComposer.calls.length>this.dockedComposer.maxComposers},enumerable:!0,configurable:!0}),e=__decorate([core_1.Component({selector:"global-docked-composer-container",template:'<global-docked-composer-overflow *ngIf="displayOverflow"></global-docked-composer-overflow><global-docked-composer *ngFor="let composer of dockedComposer.composers; let i = index;" [composerindex]="i" [composerdata]="composer" [ngStyle]="getComposerStyle(i)"></global-docked-composer><global-docked-composer-call *ngFor="let call of dockedComposer.calls" [calldata]="call"></global-docked-composer-call>',host:{"[class.slds-docked_container]":"isVisible",style:"z-index: 9999"}}),__metadata("design:paramtypes",[services_1.dockedComposer])],e)}();exports.GlobalDockedComposerContainer=GlobalDockedComposerContainer;var GlobalDockedComposer=function(){function GlobalDockedComposer(e,t,s,o,i,a,n){this.metadata=e,this.dockedComposer=t,this.language=s,this.model=o,this.view=i,this.modal=a,this.ViewContainerRef=n,this.composerdata={},this.isClosed=!1,this.view.isEditable=!0,this.view.setEditMode(),this.model.isEditing=!0,this.model.isGlobal=!0}return GlobalDockedComposer.prototype.ngOnInit=function(){this.model.module=this.composerdata.module,this.model.id=this.composerdata.id,this.composerdata.model.data?this.model.data=this.composerdata.model.data:this.model.initializeModel(),this.dockedComposer.composers[this.composerindex].model=this.model;var t=this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module);if(t.componentset)for(var e=this.metadata.getComponentSetObjects(t.componentset),s=function(t){o.metadata.addComponent("ObjectRecordFieldset",o.containercontent).subscribe(function(e){e.instance.componentconfig=t.componentconfig})},o=this,i=0,a=e;i<a.length;i++){s(a[i])}else t.fieldset&&this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe(function(e){e.instance.direction="vertical",e.instance.fieldset=t.fieldset});this.actionset=t.actionset},Object.defineProperty(GlobalDockedComposer.prototype,"displayLabel",{get:function(){return this.model.data.name?this.model.data.name:this.language.getModuleName(this.model.module,!0)},enumerable:!0,configurable:!0}),GlobalDockedComposer.prototype.toggleClosed=function(){this.isClosed=!this.isClosed},Object.defineProperty(GlobalDockedComposer.prototype,"toggleIcon",{get:function(){return this.isClosed?"erect_window":"minimize_window"},enumerable:!0,configurable:!0}),GlobalDockedComposer.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)},GlobalDockedComposer.prototype.handleaction=function(e){this.closeComposer()},GlobalDockedComposer.prototype.closeComposer=function(){for(var e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.composerdata.id&&this.dockedComposer.composers.splice(e,1)},GlobalDockedComposer.prototype.saveComposer=function(s){var o=this;void 0===s&&(s=!1),this.model.validate()&&this.model.save().subscribe(function(e){s&&o.model.goDetail();for(var t=0;t<o.dockedComposer.composers.length;t++)o.dockedComposer.composers[t].id===o.composerdata.id&&o.dockedComposer.composers.splice(t,1)})},__decorate([core_1.ViewChild("containercontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalDockedComposer.prototype,"containercontent",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],GlobalDockedComposer.prototype,"composerdata",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],GlobalDockedComposer.prototype,"composerindex",void 0),GlobalDockedComposer=__decorate([core_1.Component({selector:"global-docked-composer",template:'<section class="slds-docked-composer slds-grid slds-grid_vertical slds-m-horizontal--x-small" style="transition: .5s" [ngClass]="{\'slds-is-closed\': isClosed, \'slds-is-open\': !isClosed}" role="dialog"><header class="slds-docked-composer__header slds-grid slds-shrink-none" aria-live="assertive"><div class="slds-media slds-media_center slds-no-space"><div class="slds-media__figure slds-m-right_x-small"><span class="slds-icon_container"><system-icon [module]="model.module" [size]="\'small\'"></system-icon></span></div><div class="slds-media__body"><h2 class="slds-truncate">{{displayLabel}}</h2></div></div><div class="slds-col_bump-left slds-shrink-none"><button class="slds-button slds-button_icon slds-button_icon" (click)="toggleClosed()"><system-button-icon [icon]="toggleIcon"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon" (click)="expand()"><system-button-icon [icon]="\'expand_alt\'"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon" (click)="closeComposer()"><system-button-icon [icon]="\'close\'"></system-button-icon></button></div></header><div class="slds-docked-composer__body slds-theme--default slds-scrollable" style="height: 380px;"><div #containercontent></div></div><footer class="slds-docked-composer__footer slds-shrink-none slds-grid slds-grid--vertical-align-center slds-grid--align-spread"><div class="slds-col"><global-docked-composer-messages-badge></global-docked-composer-messages-badge></div><div class="slds-col_bump-left slds-text-align_right"><button class="slds-button slds-button--neutral" (click)="closeComposer()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="saveComposer()"><system-label label="LBL_SAVE"></system-label></button> <button class="slds-button slds-button--brand" (click)="saveComposer(true)"><system-label label="LBL_SAVE_AND_GO_TO_RECORD"></system-label></button></div></footer></section>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.dockedComposer,services_1.language,services_1.model,services_1.view,services_1.modal,core_1.ViewContainerRef])],GlobalDockedComposer)}();exports.GlobalDockedComposer=GlobalDockedComposer;var GlobalDockedComposerCall=function(){function e(e,t,s,o){this.backend=e,this.dockedComposer=t,this.language=s,this.ViewContainerRef=o,this.calldata={},this.searching=!0,this.contact={},this.isClosed=!1}return Object.defineProperty(e.prototype,"callicon",{get:function(){if("END"==this.calldata.callevent)return"end_call";switch(this.calldata.direction){case"INBOUND":return"incoming_call";case"OUTBOUND":return"outbound_call"}return"call"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.backend.postRequest("search",{},{modules:"Contacts",searchterm:this.calldata.callnumber}).subscribe(function(e){try{t.contact=e.Contacts.hits[0]._source,t.searching=!1}catch(e){t.searching=!1}})},e.prototype.closeComposer=function(){var t=this,s=0;this.dockedComposer.calls.some(function(e){if(e.callid==t.calldata.callid)return t.dockedComposer.calls.splice(s,1),!0;s++})},__decorate([core_1.ViewChild("containercontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"containercontent",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"calldata",void 0),e=__decorate([core_1.Component({selector:"global-docked-composer-call",template:'<section class="slds-docked-composer slds-grid slds-grid_vertical slds-m-horizontal--x-small" [ngClass]="{\'slds-is-closed\': isClosed, \'slds-is-open\': !isClosed}" role="dialog"><header class="slds-docked-composer__header slds-grid slds-shrink-none" aria-live="assertive"><div class="slds-media slds-media_center slds-no-space"><div class="slds-media__figure slds-m-right_x-small"><span class="slds-icon_container"><system-icon [icon]="callicon" sprite="utility" size="x-small"></system-icon></span></div><div class="slds-media__body"><h2 class="slds-truncate">{{calldata.direction}} Call {{calldata.callevent}}</h2></div></div><div class="slds-col_bump-left slds-shrink-none"><button class="slds-button slds-button_icon slds-button_icon" (click)="toggleClosed()"><system-button-icon [icon]="toggleIcon"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon" (click)="expand()"><system-button-icon [icon]="\'expand_alt\'"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon" (click)="closeComposer()"><system-button-icon [icon]="\'close\'"></system-button-icon></button></div></header><div class="slds-align_absolute-center slds-size_1-of-1"><div class="slds-text-align_center slds-align-middle"><ng-container *ngIf="!searching"><span class="slds-avatar slds-avatar_large"><img [src]="contact.salutation == \'Mr.\' ? \'sldassets/images/avatar1.jpg\' : \'sldassets/images/avatar2.jpg\'"></span><h3 class="slds-text-heading_large">{{contact.summary_text}}</h3><ul class="slds-list_horizontal slds-has-dividers_right slds-text-body_small"><li class="slds-item">{{contact.account_name}}</li></ul></ng-container><div *ngIf="searching" class="slds-p-around--small slds-align--absolute-center"><system-spinner></system-spinner></div><p class="slds-text-heading_medium slds-m-top_medium">{{calldata.callnumber}}</p><p>{{callid}}</p></div></div><footer class="slds-docked-composer__footer slds-shrink-none"><button class="slds-button slds-button--brand slds-col_bump-left" (click)="closeComposer()"><system-label label="LBL_CLOSE"></system-label></button></footer></section>'}),__metadata("design:paramtypes",[services_1.backend,services_1.dockedComposer,services_1.language,core_1.ViewContainerRef])],e)}();exports.GlobalDockedComposerCall=GlobalDockedComposerCall;var GlobalDockedComposerModal=function(){function GlobalDockedComposerModal(e,t,s,o,i){this.metadata=e,this.dockedComposer=t,this.language=s,this.model=o,this.view=i,this.self={},this.view.isEditable=!0,this.view.setEditMode()}return GlobalDockedComposerModal.prototype.ngOnInit=function(){var t=this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module);if(t.fieldset||t.componentset||(t=this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module)),t.componentset)for(var e=this.metadata.getComponentSetObjects(t.componentset),s=function(t){o.metadata.addComponent(t.component,o.containercontent).subscribe(function(e){e.instance.componentconfig=t.componentconfig})},o=this,i=0,a=e;i<a.length;i++){s(a[i])}else t.fieldset&&this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe(function(e){e.instance.direction="vertical",e.instance.fieldset=t.fieldset})},Object.defineProperty(GlobalDockedComposerModal.prototype,"displayLabel",{get:function(){return this.model.data.name?this.model.data.name:this.language.getModuleName(this.model.module,!0)},enumerable:!0,configurable:!0}),GlobalDockedComposerModal.prototype.minimize=function(){this.self.destroy()},GlobalDockedComposerModal.prototype.closeComposer=function(){for(var e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.model.id&&this.dockedComposer.composers.splice(e,1);this.self.destroy()},GlobalDockedComposerModal.prototype.saveComposer=function(s){var o=this;void 0===s&&(s=!1),this.model.validate()&&this.model.save().subscribe(function(e){s&&o.model.goDetail();for(var t=0;t<o.dockedComposer.composers.length;t++)o.dockedComposer.composers[t].id===o.model.id&&o.dockedComposer.composers.splice(t,1);o.self.destroy()})},__decorate([core_1.ViewChild("containercontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],GlobalDockedComposerModal.prototype,"containercontent",void 0),GlobalDockedComposerModal=__decorate([core_1.Component({selector:"global-docked-composer-modal",template:'<system-modal size="medium"><system-modal-header [module]="model.module" (close)="minimize()">{{displayLabel}}</system-modal-header><system-modal-content margin="none"><div #containercontent></div></system-modal-content><system-modal-footer><div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread"><global-docked-composer-messages-badge></global-docked-composer-messages-badge><div class="slds-text-align_right"><button class="slds-button slds-button--neutral" (click)="closeComposer()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="saveComposer()"><system-label label="LBL_SAVE"></system-label></button> <button class="slds-button slds-button--brand" (click)="saveComposer(true)"><system-label label="LBL_SAVE_AND_GO_TO_RECORD"></system-label></button></div></div></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.dockedComposer,services_1.language,services_1.model,services_1.view])],GlobalDockedComposerModal)}();exports.GlobalDockedComposerModal=GlobalDockedComposerModal;var GlobalDockedComposerOverflow=function(){function e(e,t,s,o){this.renderer=e,this.elementRef=t,this.dockedComposer=s,this.language=o,this.showHiddenComposers=!1}return e.prototype.ngOnDestroy=function(){this.clickListener&&this.clickListener()},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return this.dockedComposer.composers.length+this.dockedComposer.calls.length-this.dockedComposer.maxComposers},enumerable:!0,configurable:!0}),e.prototype.toggleHiddenComoposers=function(){var t=this;this.showHiddenComposers=!this.showHiddenComposers,this.showHiddenComposers?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.showHiddenComposers=!1,this.clickListener())},Object.defineProperty(e.prototype,"overflowComposers",{get:function(){return this.dockedComposer.composers.slice(this.dockedComposer.maxComposers-this.dockedComposer.calls.length)},enumerable:!0,configurable:!0}),e.prototype.displayLabel=function(e){return e.model.data.name?e.model.data.name:this.language.getModuleName(e.model.module,!0)},e.prototype.focusComposer=function(e){this.dockedComposer.focusComposer(e),this.showHiddenComposers=!1},e=__decorate([core_1.Component({selector:"global-docked-composer-overflow",template:'<div class="slds-docked-composer slds-docked-composer_overflow slds-m-horizontal--x-small"><button class="slds-button slds-button_icon slds-docked-composer_overflow__button" (click)="toggleHiddenComoposers()"><system-button-icon [icon]="\'standard_objects\'"></system-button-icon><span class="slds-text-body_small slds-m-left_xx-small">{{hiddenCount}}</span></button><div class="slds-dropdown slds-dropdown_left slds-dropdown_bottom slds-dropdown_medium slds-nubbin_bottom-left" *ngIf="showHiddenComposers"><ul class="slds-dropdown__list slds-dropdown_length-with-icon-7" role="menu"><li class="slds-dropdown__item" role="presentation" *ngFor="let overflowComposer of overflowComposers"><a href="javascript:void(0);" role="menuitem" (click)="focusComposer(overflowComposer.id)"><div class="slds-media slds-media_center slds-no-space"><div class="slds-media__figure slds-m-right_x-small"><span class="slds-icon_container"><system-icon [module]="overflowComposer.module" [size]="\'small\'"></system-icon></span></div><div class="slds-media__body"><h2 class="slds-truncate">{{displayLabel(overflowComposer)}}</h2></div></div></a></li></ul></div></div>'}),__metadata("design:paramtypes",[core_1.Renderer2,core_1.ElementRef,services_1.dockedComposer,services_1.language])],e)}();exports.GlobalDockedComposerOverflow=GlobalDockedComposerOverflow;var GlobalDockedComposerMessagesBadge=function(){function e(e,t){this.model=e,this.language=t,this.side="left"}return Object.defineProperty(e.prototype,"messagecount",{get:function(){return this.model.getMessages().length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"messages",{get:function(){return this.model.getMessages()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nubbinClass",{get:function(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popoverStyle",{get:function(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"side",void 0),e=__decorate([core_1.Component({selector:"global-docked-composer-messages-badge",template:'<div class="slds-is-relative" *ngIf="messagecount"><span class="slds-badge slds-theme_warning slds-m-horizontal--xx-small" (click)="showpopover = !showpopover">{{messagecount}}</span><section *ngIf="showpopover" aria-label="Model Errors" class="slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute" [ngClass]="nubbinClass" [ngStyle]="popoverStyle" role="dialog"><button class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close" title="Close dialog" (click)="showpopover = false;"><system-button-icon icon="close" [inverse]="true"></system-button-icon></button><header class="slds-popover__header"><div class="slds-media slds-media_center slds-has-flexi-truncate"><system-utility-icon icon="error" size="x-small" colorclass="slds-icon-utility-error"></system-utility-icon><div class="slds-media__body slds-text-align--left slds-p-left--x-small"><h2 class="slds-truncate slds-text-heading_medium" title="Resolve error"><system-label label="LBL_VALIDATION_ERRORS"></system-label></h2></div></div></header><div class="slds-popover__body slds-p-horizontal--none"><table class="slds-table slds-table_cell-buffer slds-table_bordered"><tbody><tr class="slds-hint-parent" *ngFor="let message of messages"><td data-label="type"><div class="slds-truncate"><system-utility-icon [icon]="message.type" size="x-small"></system-utility-icon></div></td><td data-label="Field"><div class="slds-truncate"><system-label-fieldname [module]="model.module" [field]="message.reference"></system-label-fieldname></div></td><td data-label="Message"><div class="slds-truncate">{{message.message}}</div></td></tr></tbody></table></div></section></div>'}),__metadata("design:paramtypes",[services_1.model,services_1.language])],e)}();exports.GlobalDockedComposerMessagesBadge=GlobalDockedComposerMessagesBadge;var GlobalComposeButton=function(){function e(e){this.dockedComposer=e,this.module=""}return e.prototype.showComposer=function(){this.dockedComposer.addComposer(this.module)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"global-compose-button",template:'<div class="slds-no-flex"><button class="slds-button slds-button--neutral" (click)="showComposer()">New</button></div>'}),__metadata("design:paramtypes",[services_1.dockedComposer])],e)}();exports.GlobalComposeButton=GlobalComposeButton;var GlobalAppLauncher=function(){function e(e,t,s){this.metadata=e,this.modal=t,this.language=s}return Object.defineProperty(e.prototype,"roleName",{get:function(){var e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name},enumerable:!0,configurable:!0}),e.prototype.showAppLauncher=function(){this.modal.openModal("GlobalAppLauncherDialog")},e=__decorate([core_1.Component({selector:"global-app-launcher",template:'<div class="slds-context-bar__item slds-context-bar__dropdown-trigger slds-dropdown-trigger slds-dropdown-trigger--click slds-no-hover"><div class="slds-context-bar__icon-action slds-m-top_small" (click)="showAppLauncher()"><a href="javascript:void(0);" class="slds-icon-waffle_container slds-context-bar__button"><div class="slds-icon-waffle"><div class="slds-r1"></div><div class="slds-r2"></div><div class="slds-r3"></div><div class="slds-r4"></div><div class="slds-r5"></div><div class="slds-r6"></div><div class="slds-r7"></div><div class="slds-r8"></div><div class="slds-r9"></div></div></a></div><span class="slds-context-bar__label-action slds-context-bar__app-name"><span class="slds-truncate">{{roleName}}</span></span></div>',host:{class:"slds-context-bar__primary slds-context-bar__item--divider-right"}}),__metadata("design:paramtypes",[services_1.metadata,services_1.modal,services_1.language])],e)}();exports.GlobalAppLauncher=GlobalAppLauncher;var GlobalAppLauncherDialog=function(){function GlobalAppLauncherDialog(e,t,s,o){this.metadata=e,this.language=t,this.router=s,this.broadcast=o,this.searchTerm="",this.self=void 0}return Object.defineProperty(GlobalAppLauncherDialog.prototype,"showRoles",{get:function(){return 1<this.metadata.getRoles().length},enumerable:!0,configurable:!0}),GlobalAppLauncherDialog.prototype.close=function(){this.self.destroy()},GlobalAppLauncherDialog.prototype.getRoles=function(){return this.metadata.getRoles()},GlobalAppLauncherDialog.prototype.setRole=function(e){this.metadata.setActiveRole(e),this.broadcast.broadcastMessage("applauncher.setrole",e),this.close()},GlobalAppLauncherDialog.prototype.getModules=function(){for(var s=this,e=[],t=0,o=this.metadata.getModules();t<o.length;t++){var i=o[t],a=this.metadata.getModuleDefs(i);a.visible&&(!a.visibleaclaction||a.visibleaclaction&&this.metadata.checkModuleAcl(i,a.visibleaclaction))&&this.metadata.checkModuleAcl(i,"list")&&(""===this.searchTerm||""!==this.searchTerm&&this.language.getModuleName(i)&&0<=this.language.getModuleName(i).toLowerCase().indexOf(this.searchTerm.toLowerCase()))&&e.push(i)}return e.sort(function(e,t){return s.language.getModuleName(e)>s.language.getModuleName(t)?1:-1}),e},GlobalAppLauncherDialog.prototype.gotoModule=function(e){this.router.navigate(["/module/"+e]),this.close()},GlobalAppLauncherDialog=__decorate([core_1.Component({selector:"global-app-launcher-dialog",template:'<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large slds-app-launcher__content" aria-modal="true"><div class="slds-modal__container"><header class="slds-modal__header slds-theme--shade"><button class="slds-button slds-button_icon slds-modal__close slds-button--icon-inverse" (click)="close()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon><span class="slds-assistive-text"><system-label label="LBL_CLOSE"></system-label></span></button><div class="slds-grid slds-grid--align-spread slds-grid--vertical-align-center"><h2 class="slds-text-heading--medium slds-show--medium"><system-label label="LBL_APP_LAUNCHER"></system-label></h2><div class="slds-app-launcher__header-search"><div class="slds-form-element"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon [icon]="\'search\'" [addclasses]="\'slds-input__icon slds-input__icon--left\'"></system-utility-icon><input system-autofocus type="search" class="slds-input" [(ngModel)]="searchTerm" [placeholder]="language.getLabel(\'LBL_FIND_CONFMODULE\')"></div></div></div><button class="slds-button slds-button--neutral slds-show--medium" disabled>App Store</button></div></header><system-modal-content margin="small" [grow]="true"><system-section titlelabel="LBL_ROLES" *ngIf="showRoles"><ul class="slds-grid slds-grid--pull-padded slds-wrap"><li *ngFor="let role of getRoles()" class="slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-3" (click)="setRole(role.id)"><global-app-launcher-dialog-role-tile [role]="role"></global-app-launcher-dialog-role-tile></li></ul></system-section><system-section titlelabel="LBL_MODULES"><ul class="slds-grid slds-grid--pull-padded slds-wrap"><li *ngFor="let module of getModules()" class="slds-p-around--small slds-size--xx-small" (click)="gotoModule(module)"><div class="slds-app-launcher__tile-figure slds-app-launcher__tile-figure--small slds-text-link_reset"><system-icon [module]="module" [size]="\'large\'"></system-icon></div><div class="slds-align_absolute-center slds-p-top--xx-small"><p class="slds-truncate slds-text-link_reset" [title]="language.getModuleName(module)"><system-label-modulename [module]="module"></system-label-modulename></p></div></li></ul></system-section></system-modal-content></div></section>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,router_1.Router,services_1.broadcast])],GlobalAppLauncherDialog)}();exports.GlobalAppLauncherDialog=GlobalAppLauncherDialog;var GlobalAppLauncherDialogRoleTile=function(){function e(e,t){this.language=e,this.metadata=t}return e.prototype.ngOnInit=function(){this.buildRoleLabels()},e.prototype.buildRoleLabels=function(){var t=this;this.metadata.getRoles().some(function(e){if(e.id==t.role.id)return t.identifier=t.language.getAppLanglabel(e.label,"short"),t.name=t.language.getAppLanglabel(e.label),t.description=t.language.getAppLanglabel(e.label,"long"),t.name===t.description&&(t.description=null),t.description&&75<t.description.length&&(t.descriptionfull=t.description,t.description=t.description.substr(0,75)+"..."),!0})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"role",void 0),e=__decorate([core_1.Component({selector:"global-app-launcher-dialog-role-tile",template:'<div class="slds-app-launcher__tile slds-text-link_reset slds-is-relative"><div class="slds-app-launcher__tile-figure"><span class="slds-avatar slds-avatar--large slds-align--absolute-center {{role.icon}}">{{identifier}}</span></div><div class="slds-app-launcher__tile-body"><a href="javascript:void(0);">{{name}}</a><p>{{description}} <button #morebutton class="slds-button slds-button_reset slds-text-link" [ngClass]="{\'slds-hide\': !descriptionfull}" [title]="descriptionfull"><system-label label="LBL_MORE"></system-label></button></p><div class="slds-popover slds-popover_tooltip slds-nubbin_top slds-hide" *ngIf="descriptionfull" role="tooltip" style="position:absolute;top:100px;left:165px"><div class="slds-popover__body">{{descriptionfull}}</div></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata])],e)}();exports.GlobalAppLauncherDialogRoleTile=GlobalAppLauncherDialogRoleTile;var GlobalNavigationTabbed=function(){function e(e,t){var s=this;this.metadata=e,this.navigation=t,this.navigation.activeTab$.subscribe(function(e){s.activetab="main"==e?s.navigation.maintab:s.navigation.getTabById(e)})}return Object.defineProperty(e.prototype,"parenttab",{get:function(){return this.activetab.parentid?this.navigation.getTabById(this.activetab.parentid):this.activetab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displaySubtabs",{get:function(){return"subtabbed"==this.navigation.navigationparadigm&&this.activetab&&(this.activetab.parentid||0<this.navigation.getSubTabs(this.activetab.id).length)},enumerable:!0,configurable:!0}),e=__decorate([core_1.Component({selector:"global-navigation-tabbed",template:'<div class="slds-context-bar slds-context-bar_tabs"><global-app-launcher class="slds-context-bar__primary"></global-app-launcher><global-navigation-tabbed-menu class="slds-context-bar__secondary" role="navigation"></global-navigation-tabbed-menu></div><div *ngIf="displaySubtabs" class="slds-tabs_default slds-sub-tabs"><global-navigation-tabbed-subtabs [parenttab]="parenttab"></global-navigation-tabbed-subtabs></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.navigation])],e)}();exports.GlobalNavigationTabbed=GlobalNavigationTabbed;var GlobalNavigationTabbedMenuModules=function(){function e(e,t,s,o,i,a,n,l){var r=this;this.metadata=e,this.broadcast=t,this.navigation=s,this.router=o,this.language=i,this.recent=a,this.favorite=n,this.elementRef=l,this.menuItems=[],this.isopen=!1,this.activeModule="",this.buildMenuItems(),this.broadcast.message$.subscribe(function(e){r.handleMessage(e)})}return e.prototype.buildMenuItems=function(){this.menuItems=[];for(var e=0,t=this.metadata.getRoleModules(!0);e<t.length;e++){var s=t[e];this.menuItems.push(s)}},Object.defineProperty(e.prototype,"isActive",{get:function(){return"main"==this.navigation.activeTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabWidth",{get:function(){return this.elementRef.nativeElement.getBoundingClientRect().width},enumerable:!0,configurable:!0}),e.prototype.setActive=function(){this.navigation.setActiveTab("main")},Object.defineProperty(e.prototype,"activeModuleVisible",{get:function(){var t=this;return this.menuItems.find(function(e){return e==t.navModule})},enumerable:!0,configurable:!0}),e.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems()}},Object.defineProperty(e.prototype,"navModule",{get:function(){return this.navigation.activeModule},enumerable:!0,configurable:!0}),e.prototype.openMenu=function(){this.isopen=!0,this.activeModule=this.navigation.activeModule},e.prototype.setActiveModule=function(e,t){e.stopPropagation(),this.activeModule=t},e.prototype.closeMenu=function(){this.isopen=!1},e.prototype.navigateTo=function(e){this.isopen=!1,this.router.navigate(["/module/"+e])},e=__decorate([core_1.Component({selector:"global-navigation-tabbed-menu-modules",template:'<div class="slds-context-bar__item slds-context-bar__item_divider-right slds-dropdown-trigger slds-dropdown-trigger_click" [ngClass]="{\'slds-is-open\': isopen}"><a href="javascript:void(0);" class="slds-context-bar__label-action" (click)="setActive()"><div class="slds-truncate slds-grid slds-grid--vertical-align-center" [title]="navModule"><system-icon [module]="navModule" size="x-small"></system-icon><span><system-label-modulename [module]="navModule"></system-label-modulename></span></div></a><div class="slds-context-bar__icon-action"><button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small" aria-haspopup="true" title="Open object switcher menu"><system-button-icon icon="chevrondown"></system-button-icon><span class="slds-assistive-text">Open object switcher menu</span></button></div><div class="slds-dropdown slds-dropdown_left slds-dropdown--large"><div class="slds-grid"><ul class="slds-dropdown__list slds-size--1-of-2 slds-border--right" role="menu"><li *ngIf="!activeModuleVisible" class="slds-dropdown__item slds-nav-vertical__item slds-has-divider--bottom" [ngClass]="{\'slds-is-active\': navModule == activeModule}" (click)="navigateTo(navModule)"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><div class="slds-truncate slds-size--1-of-1 slds-grid slds-grid--vertical-align-center" [title]="navModule"><system-icon [module]="navModule" size="x-small"></system-icon><span><system-label-modulename [module]="navModule"></system-label-modulename></span> <button class="slds-button slds-button--icon slds-col--bump-left" (click)="setActiveModule($event, navModule)"><system-button-icon icon="chevronright" addclasses="slds-icon-text-light"></system-button-icon></button></div></a></li><li *ngFor="let menuItem of menuItems" class="slds-dropdown__item slds-nav-vertical__item" [ngClass]="{\'slds-is-active\': menuItem == activeModule}" role="presentation" (click)="navigateTo(menuItem)"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><div class="slds-truncate slds-size--1-of-1 slds-grid slds-grid--vertical-align-center" [title]="menuItem"><system-icon [module]="menuItem" size="x-small"></system-icon><span><system-label-modulename [module]="menuItem"></system-label-modulename></span> <button class="slds-button slds-button--icon slds-col--bump-left" (click)="setActiveModule($event, menuItem)"><system-button-icon icon="chevronright" addclasses="slds-icon-text-light"></system-button-icon></button></div></a></li></ul><div class="slds-size--1-of-2"><global-navigation-tabbed-module-menu [module]="activeModule" (actionTriggered)="closeMenu()"></global-navigation-tabbed-module-menu></div></div></div></div>',host:{"[class.slds-context-bar__item]":"1","[class.slds-is-active]":"isActive","(mouseenter)":"openMenu()","(mouseleave)":"closeMenu()"}}),__metadata("design:paramtypes",[services_1.metadata,services_1.broadcast,services_1.navigation,router_1.Router,services_1.language,services_1.recent,services_1.favorite,core_1.ElementRef])],e)}();exports.GlobalNavigationTabbedMenuModules=GlobalNavigationTabbedMenuModules;var GlobalNavigationTabbedMenuModuleMenu=function(){function e(e,t,s,o,i,a,n,l,r){this.metadata=e,this.model=t,this.broadcast=s,this.navigation=o,this.router=i,this.language=a,this.recent=n,this.favorite=l,this.cdRef=r,this.actionTriggered=new core_1.EventEmitter,this.itemMenu=[],this.loadingRecent=!1,this.recentitems=[],this.favorites=[]}return Object.defineProperty(e.prototype,"trackRecent",{get:function(){var e;return!!this.module&&"1"==(null===(e=this.metadata.getModuleDefs(this.module))||void 0===e?void 0:e.track)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){var s=this;this.model.module=this.module;var e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.module);e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.module),this.recentitems=[],this.trackRecent?this.recent.moduleItems[this.module]?this.recentitems=this.recent.moduleItems[this.module]:(this.loadingRecent=!0,this.recent.getModuleRecent(this.module).subscribe(function(e){s.loadingRecent=!1;var t=s.recent.moduleItems[s.module];s.recentitems=t||[],s.cdRef.detectChanges()},function(e){s.loadingRecent=!1})):this.recentitems=[],this.favorites=this.favorite.getFavorites(this.module)},e.prototype.propagateclick=function(t){var e;null===(e=this.menuItemlist.find(function(e){return e.id==t}))||void 0===e||e.execute(),this.actionTriggered.emit(!0)},e.prototype.isDisabled=function(t){var s=!0;return this.menuItemlist&&this.menuItemlist.some(function(e){if(e.id==t)return s=e.disabled,!0}),s},e.prototype.openRecord=function(e){this.router.navigate(["/module/"+this.module+"/"+e]),this.actionTriggered.emit(!0)},__decorate([core_1.ViewChildren(GlobalNavigationMenuItemActionContainer),__metadata("design:type",core_1.QueryList)],e.prototype,"menuItemlist",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"actionTriggered",void 0),e=__decorate([core_1.Component({selector:"global-navigation-tabbed-module-menu",template:'<ul #menulist class="slds-dropdown__list" role="menu"><div #menucontainer></div><ng-container *ngIf="itemMenu.length > 0"><li *ngFor="let actionitem of itemMenu" class="slds-dropdown__item" role="presentation" (click)="propagateclick(actionitem.id)"><a href="javascript:void(0);" role="menuitem"><global-navigation-menu-item-action-container class="slds-truncate" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem"></global-navigation-menu-item-action-container></a></li></ng-container><ng-container *ngIf="favorites.length > 0"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_FAVORITES"></system-label></span></li><li *ngFor="let favorite of favorites" class="slds-dropdown__item" role="presentation" (click)="openRecord(favorite.item_id)"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">{{favorite.item_summary}}</span></a></li></ng-container><ng-container *ngIf="trackRecent"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_RECENTLYVIEWED"></system-label></span></li><li *ngFor="let recentItem of recentitems" class="slds-dropdown__item" role="presentation" (click)="openRecord(recentItem.item_id)"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">{{recentItem.item_summary}}</span></a></li><li class="slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small" *ngIf="!loadingRecent && recentitems.length == 0"><system-label label="LBL_NO_ENTRIES"></system-label></li><system-spinner *ngIf="loadingRecent" size="16"></system-spinner></ng-container></ul>',providers:[services_1.model],changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.broadcast,services_1.navigation,router_1.Router,services_1.language,services_1.recent,services_1.favorite,core_1.ChangeDetectorRef])],e)}();exports.GlobalNavigationTabbedMenuModuleMenu=GlobalNavigationTabbedMenuModuleMenu;var GlobalNavigationTabbedMenuTab=function(){function e(e,t,s){this.navigation=e,this.language=t,this.elementRef=s}return Object.defineProperty(e.prototype,"isActive",{get:function(){if(this.object.id==this.navigation.activeTab)return!0;var e=this.navigation.getTabById(this.navigation.activeTab);return!(!e||!e.parentid||this.object.id!=e.parentid)},enumerable:!0,configurable:!0}),e.prototype.setActive=function(){this.navigation.setActiveTab(this.object.id)},e.prototype.closetab=function(){this.navigation.closeObjectTab(this.object.id)},Object.defineProperty(e.prototype,"pinned",{get:function(){return this.object.pinned},enumerable:!0,configurable:!0}),e.prototype.pintab=function(){this.object.pinned=!this.object.pinned},Object.defineProperty(e.prototype,"tabname",{get:function(){return this.object.displayname?this.object.displayname:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabmodule",{get:function(){return this.object.displaymodule?this.object.displaymodule:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabicon",{get:function(){return this.object.displayicon?this.object.displayicon:void 0},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"object",void 0),e=__decorate([core_1.Component({selector:"global-navigation-tabbed-menu-tab",template:'<div class="slds-context-bar__item"><a href="javascript:void(0);" class="slds-context-bar__label-action" (click)="setActive()"><div class="slds-truncate slds-grid slds-grid--vertical-align-center"><ng-container *ngIf="tabname; else tabloading"><system-utility-icon *ngIf="tabicon" [icon]="tabicon" size="x-small" class="slds-p-right--x-small"></system-utility-icon><system-icon *ngIf="tabmodule" [module]="tabmodule" size="x-small" divClass="slds-p-right--x-small"></system-icon><div>{{tabname}}</div></ng-container><ng-template #tabloading><system-spinner size="10" class="slds-p-right--x-small"></system-spinner><div><system-label label="LBL_LOADING"></system-label></div></ng-template></div></a><div class="slds-context-bar__icon-action"><button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small slds-m-around--none" (click)="pintab()"><system-button-icon [icon]="pinned ? \'pinned\' : \'pin\'"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small slds-m-around--none" aria-haspopup="true" (click)="closetab()"><system-button-icon icon="close"></system-button-icon></button></div></div>',host:{"[class.slds-context-bar__item]":"1","[class.slds-context-bar__item_tab]":"1","[class.slds-is-active]":"isActive"}}),__metadata("design:paramtypes",[services_1.navigation,services_1.language,core_1.ElementRef])],e)}();exports.GlobalNavigationTabbedMenuTab=GlobalNavigationTabbedMenuTab;var GlobalNavigationTabbedMoreTab=function(){function e(e,t,s){this.navigation=e,this.language=t,this.elementRef=s,this.moreObjects=[]}return Object.defineProperty(e.prototype,"tabWidth",{get:function(){return this.elementRef.nativeElement.getBoundingClientRect().width},enumerable:!0,configurable:!0}),e.prototype.setActiveTab=function(e){this.navigation.setActiveTab(e)},e.prototype.closeObjectTab=function(e){this.navigation.closeObjectTab(e)},e.prototype.isActive=function(e){if(e==this.navigation.activeTab)return!0;var t=this.navigation.getTabById(this.navigation.activeTab);return!(!t||!t.parentid||e!=t.parentid)},Object.defineProperty(e.prototype,"activeItem",{get:function(){var s=this.navigation.activeTabObject;return!!this.moreObjects.find(function(e){var t;return e.active||s&&(null===(t=s)||void 0===t?void 0:t.parentid)==e.id})},enumerable:!0,configurable:!0}),e=__decorate([core_1.Component({selector:"global-navigation-tabbed-more-tab",template:'<div class="slds-context-bar__item slds-context-bar__dropdown-trigger slds-dropdown-trigger slds-dropdown-trigger_click" system-dropdown-trigger><div class="slds-context-bar__label-action" aria-haspopup="true"><span class="slds-truncate" title="More Tabs"><system-label label="LBL_MORE"></system-label>({{moreObjects.length}})</span><system-button-icon class="slds-p-left--x-small" icon="chevrondown"></system-button-icon></div><div class="slds-dropdown slds-dropdown_right"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item slds-nav-vertical__item" [ngClass]="{\'slds-is-active\': isActive(moreObject.id)}" *ngFor="let moreObject of moreObjects" role="presentation"><a href="javascript:void(0);" role="menuitem"><system-icon *ngIf="moreObject.displaymodule" [module]="moreObject.displaymodule" size="x-small" divClass="slds-p-right--x-small"></system-icon><div class="slds-grow" (click)="setActiveTab(moreObject.id)">{{moreObject.displayname}}</div><button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small slds-m-around--none" aria-haspopup="true" (click)="closeObjectTab(moreObject.id)"><system-button-icon icon="close"></system-button-icon></button></a></li></ul></div></div>',host:{"[class.slds-context-bar__item]":"1","[class.slds-is-active]":"activeItem"}}),__metadata("design:paramtypes",[services_1.navigation,services_1.language,core_1.ElementRef])],e)}();exports.GlobalNavigationTabbedMoreTab=GlobalNavigationTabbedMoreTab;var GlobalNavigationTabbedMenu=function(){function e(e,t,s,o){var i=this;this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=o,this.resizeTimeOut=void 0,this.subscriptions=new rxjs_1.Subscription,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe(function(e){window.setTimeout(function(){i.handleResize()})}))}return e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},Object.defineProperty(e.prototype,"objectTabs",{get:function(){return this.navigation.objectTabs.filter(function(e){return!e.parentid}).sort(function(e,t){return e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:1})},enumerable:!0,configurable:!0}),e.prototype.trackByFn=function(e,t){return t.id},e.prototype.handleResize=function(){var o=this,e=this.elementRef.nativeElement.getBoundingClientRect().left,t=this.menuModules.tabWidth,i=window.innerWidth-e-t;this.menuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.menuMore.moreObjects=[];var a=this.menuMore.tabWidth;this.menuTabs.forEach(function(e){e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")});var n=0,l=!1;return this.menuTabs.forEach(function(e,t){var s=e.elementRef.nativeElement.getBoundingClientRect().width;i-a<(n+=s)&&(e.elementRef.nativeElement.classList.add("slds-hide"),l=!0,o.menuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")}),l&&this.menuMore.elementRef.nativeElement.classList.remove("slds-hidden"),!0},__decorate([core_1.ViewChild(GlobalNavigationTabbedMenuModules),__metadata("design:type",GlobalNavigationTabbedMenuModules)],e.prototype,"menuModules",void 0),__decorate([core_1.ViewChildren(GlobalNavigationTabbedMenuTab),__metadata("design:type",core_1.QueryList)],e.prototype,"menuTabs",void 0),__decorate([core_1.ViewChild(GlobalNavigationTabbedMoreTab),__metadata("design:type",GlobalNavigationTabbedMoreTab)],e.prototype,"menuMore",void 0),e=__decorate([core_1.Component({selector:"global-navigation-tabbed-menu",template:'<global-navigation-tabbed-menu-modules></global-navigation-tabbed-menu-modules><global-navigation-tabbed-menu-tab *ngFor="let objectTab of objectTabs; trackBy: trackByFn" [object]="objectTab"></global-navigation-tabbed-menu-tab><global-navigation-tabbed-more-tab class="slds-hidden"></global-navigation-tabbed-more-tab>',host:{"(window:resize)":"handleResize()"}}),__metadata("design:paramtypes",[services_1.metadata,core_1.ElementRef,services_1.broadcast,services_1.navigation])],e)}();exports.GlobalNavigationTabbedMenu=GlobalNavigationTabbedMenu;var GlobalNavigationTabbedSubtabItem=function(){function e(e,t,s,o){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=o,this.ismain=!1}return Object.defineProperty(e.prototype,"tabname",{get:function(){var e;return(null===(e=this.object)||void 0===e?void 0:e.displayname)?this.object.displayname:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabmodule",{get:function(){var e;return(null===(e=this.object)||void 0===e?void 0:e.displaymodule)?this.object.displaymodule:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabicon",{get:function(){var e;return(null===(e=this.object)||void 0===e?void 0:e.displayicon)?this.object.displayicon:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this.object&&this.object.id==this.navigation.activeTab},enumerable:!0,configurable:!0}),e.prototype.setActive=function(){this.navigation.setActiveTab(this.object.id)},e.prototype.closeSubTab=function(){this.navigation.closeObjectTab(this.object.id)},Object.defineProperty(e.prototype,"pinned",{get:function(){return this.object.pinned},enumerable:!0,configurable:!0}),e.prototype.pintab=function(){this.object.pinned=!this.object.pinned},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"object",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"ismain",void 0),e=__decorate([core_1.Component({selector:"global-navigation-tabbed-subtab-item",template:'<li class="slds-tabs_default__item slds-sub-tabs__item slds-grid slds-grid_vertical-align-center" [ngClass]="{\'slds-is-active\': isActive, \'slds-border--left\': !ismain}" role="presentation"><a class="slds-tabs_default__link slds-p-horizontal_xx-small" href="javascript:void(0);" role="tab" (click)="setActive()"><div class="slds-truncate slds-grid slds-grid--vertical-align-center"><ng-container *ngIf="tabname; else tabloading"><system-utility-icon *ngIf="tabicon" [icon]="tabicon" size="x-small" class="slds-p-right--x-small"></system-utility-icon><system-icon *ngIf="tabmodule" [module]="tabmodule" size="x-small" divClass="slds-p-right--x-small"></system-icon><div>{{tabname}}</div></ng-container><ng-template #tabloading><system-spinner size="10" class="slds-p-right--x-small"></system-spinner><div><system-label label="LBL_LOADING"></system-label></div></ng-template></div></a><div *ngIf="!ismain" class="slds-col_bump-left slds-p-left_none slds-p-right_none slds-grid"><button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small slds-m-around--none" (click)="pintab()"><system-button-icon [icon]="pinned ? \'pinned\' : \'pin\'"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small" tabindex="0" (click)="closeSubTab()"><system-button-icon icon="close"></system-button-icon></button></div></li>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.navigation,core_1.ElementRef])],e)}();exports.GlobalNavigationTabbedSubtabItem=GlobalNavigationTabbedSubtabItem;var GlobalNavigationTabbedSubTabMoreTab=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"moreActive",{get:function(){var t=!1;return this.moreObjects.some(function(e){if(e.active)return t=!0}),t},enumerable:!0,configurable:!0}),t=__decorate([core_1.Component({selector:"global-navigation-tabbed-sub-tab-more-tab",template:'<li class="slds-tabs_default__item slds-sub-tabs__item slds-grid slds-grid_vertical-align-center slds-dropdown-trigger slds-dropdown-trigger_click slds-border--left" [ngClass]="{\'slds-is-active\': moreActive}" role="presentation" system-dropdown-trigger><a class="slds-tabs_default__link slds-p-horizontal_xx-small" href="javascript:void(0);" role="tab"><div><system-label label="LBL_MORE"></system-label>({{moreObjects.length}})</div></a><div class="slds-col_bump-left slds-p-left_none slds-p-right_none"><button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small" tabindex="0"><system-button-icon icon="chevrondown"></system-button-icon></button></div><div class="slds-dropdown slds-dropdown_right"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item slds-nav-vertical__item" [ngClass]="{\'slds-is-active\': isActive(moreObject.id)}" *ngFor="let moreObject of moreObjects" role="presentation"><a href="javascript:void(0);" role="menuitem"><system-icon *ngIf="moreObject.displaymodule" [module]="moreObject.displaymodule" size="x-small" divClass="slds-p-right--x-small"></system-icon><div class="slds-grow" (click)="setActiveTab(moreObject.id)">{{moreObject.displayname}}</div><button class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small slds-m-around--none" aria-haspopup="true" (click)="closeObjectTab(moreObject.id)"><system-button-icon icon="close"></system-button-icon></button></a></li></ul></div></li>'})],t)}(GlobalNavigationTabbedMoreTab);exports.GlobalNavigationTabbedSubTabMoreTab=GlobalNavigationTabbedSubTabMoreTab;var GlobalNavigationTabbedSubtabs=function(){function e(e,t,s,o,i){var a=this;this.metadata=e,this.language=t,this.navigation=s,this.elementRef=o,this.ngZone=i,this.subscriptions=new rxjs_1.Subscription,this.stable=!0,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe(function(e){window.setTimeout(function(){a.handleResize()})}))}return e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},Object.defineProperty(e.prototype,"subtabs",{get:function(){var e;return this.navigation.getSubTabs(null===(e=this.parenttab)||void 0===e?void 0:e.id).sort(function(e,t){return e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:t.pinned?1:void 0})},enumerable:!0,configurable:!0}),e.prototype.trackByFn=function(e,t){return t.id},e.prototype.handleResize=function(){var o=this,e=this.elementRef.nativeElement.getBoundingClientRect().left,i=window.innerWidth-e;this.subMenuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.subMenuMore.moreObjects=[];var a=this.subMenuMore.tabWidth;this.subMenuTabs.forEach(function(e){e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")});var n=0,l=!1;return this.subMenuTabs.forEach(function(e,t){var s=e.elementRef.nativeElement.getBoundingClientRect().width;i-a<(n+=s)&&(e.elementRef.nativeElement.classList.add("slds-hide"),l=!0,o.subMenuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")}),l&&this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hidden"),!0},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"parenttab",void 0),__decorate([core_1.ViewChildren(GlobalNavigationTabbedSubtabItem),__metadata("design:type",core_1.QueryList)],e.prototype,"subMenuTabs",void 0),__decorate([core_1.ViewChild(GlobalNavigationTabbedSubTabMoreTab),__metadata("design:type",GlobalNavigationTabbedSubTabMoreTab)],e.prototype,"subMenuMore",void 0),e=__decorate([core_1.Component({selector:"global-navigation-tabbed-subtabs",template:'<ul class="slds-tabs_default__nav" role="tablist"><global-navigation-tabbed-subtab-item [object]="parenttab" [ismain]="true"></global-navigation-tabbed-subtab-item><global-navigation-tabbed-subtab-item *ngFor="let subtab of subtabs; trackBy: trackByFn" [object]="subtab"></global-navigation-tabbed-subtab-item><global-navigation-tabbed-sub-tab-more-tab></global-navigation-tabbed-sub-tab-more-tab></ul>',host:{"(window:resize)":"handleResize()"}}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.navigation,core_1.ElementRef,core_1.NgZone])],e)}();exports.GlobalNavigationTabbedSubtabs=GlobalNavigationTabbedSubtabs;var GlobalUser=function(){function e(e,t,s,o,i,a){this.loginService=e,this.router=t,this.elementRef=s,this.renderer=o,this.session=i,this.userpreferences=a,this.hideUserDetails=!0}return e.prototype.toggleUserDetails=function(){var t=this;this.hideUserDetails=!this.hideUserDetails,this.hideUserDetails?this.clickListener&&this.clickListener():this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)})},e.prototype.closepopup=function(){this.hideUserDetails=!0},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.hideUserDetails=!0,this.clickListener())},Object.defineProperty(e.prototype,"userimage",{get:function(){return this.session.authData.userimage},enumerable:!0,configurable:!0}),e=__decorate([core_1.Component({selector:"global-user",template:'<button class="slds-button" style="min-width: 32px;" aria-haspopup="true" (click)="toggleUserDetails()"><span *ngIf="!userimage" class="slds-icon_container slds-icon-standard-empty slds-icon_container--circle"><system-utility-icon icon="user" size="x-small" addclasses="slds-icon" colorclass></system-utility-icon></span> <img style="height: 32px; width: 32px" *ngIf="userimage" [src]="userimage"></button><global-user-panel *ngIf="!hideUserDetails" (closepopup)="closepopup()"></global-user-panel>'}),__metadata("design:paramtypes",[services_1.loginService,router_1.Router,core_1.ElementRef,core_1.Renderer2,services_1.session,services_1.userpreferences])],e)}();exports.GlobalUser=GlobalUser;var GlobaUserPanel=function(){function e(e,t,s,o,i,a,n,l,r,d,c){this.loginService=e,this.session=t,this.router=s,this.language=o,this.metadata=i,this.backend=a,this.config=n,this.modalservice=l,this.cookie=r,this.userprefs=d,this.toastservice=c,this.isEditingTz=!1,this.compId=_.uniqueId(),this.closepopup=new core_1.EventEmitter}return e.prototype.logoff=function(){this.loginService.logout()},e.prototype.changeImage=function(){var o=this;this.modalservice.openModal("SystemUploadImage").subscribe(function(e){e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe(function(t){if(!1!==t){var s=o.session.authData.userimage;o.session.authData.userimage="",o.backend.postRequest("module/Users/"+o.session.authData.userId+"/image",{},{imagedata:t}).subscribe(function(e){o.session.authData.userimage=t},function(e){o.session.authData.userimage=s})}})})},Object.defineProperty(e.prototype,"displayName",{get:function(){return this.session.authData.display_name?this.session.authData.display_name:this.session.authData.userName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userName",{get:function(){return this.session.authData.userName},enumerable:!0,configurable:!0}),e.prototype.goDetails=function(){this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.close()},e.prototype.changePassword=function(){this.modalservice.openModal("UserChangePasswordModal")},Object.defineProperty(e.prototype,"userimage",{get:function(){return this.session.authData.userimage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTz",{get:function(){return this.userprefs.unchangedPreferences&&this.userprefs.unchangedPreferences.global?this.userprefs.unchangedPreferences.global.timezone:""},set:function(e){var t=this;this.userprefs.unchangedPreferences.global&&this.userprefs.unchangedPreferences.global.timezone===e||(this.userprefs.setPreference("timezone",e,!0).subscribe(function(e){t.toastservice.sendToast('Timezone set successfully to "'+e.timezone+'".',"success")},function(e){t.toastservice.sendToast("Error setting timezone.","error")}),this.session.setTimezone(e),this.close())},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.closepopup.emit(!0)},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"closepopup",void 0),e=__decorate([core_1.Component({selector:"global-user-panel",template:'<div class="userProfilePanel"><div class="slds-grid slds-p-around--small slds-grid--vertical-align-center"><global-user-panel-icon></global-user-panel-icon><div class="slds-m-left--small"><h1 class="slds-text-heading--medium" [title]="userName">{{displayName}}</h1></div></div><div class="slds-theme--shade slds-p-around--small slds-border--top slds-border--bottom"><ul class="slds-list--horizontal slds-has-dividers--left"><li class="slds-item"><a href="javascript:void(0);" class="slds-text-link--reset" (click)="goDetails()"><system-label label="LBL_DETAILS"></system-label></a></li><li class="slds-item"><a href="javascript:void(0);" class="slds-text-link--reset" (click)="changePassword()"><system-label label="LBL_CHANGE_PASSWORD"></system-label></a></li></ul></div><div class="slds-p-around--small slds-form--stacked"><system-language-selector (selected)="close()"></system-language-selector><div class="slds-p-top--x-small"><div class="slds-form-element"><label class="slds-form-element__label" for="{{compId}}-select-tz"><system-label label="LBL_SELECT_TIMEZONE"></system-label></label><system-input-timezone [(ngModel)]="currentTz" id="{{compId}}-select-tz"></system-input-timezone></div></div></div><div class="slds-theme--shade slds-p-around--x-small slds-grid"><div><system-label label="LBL_LOGGED_ON_SYSTEM"></system-label>: {{config.data.display}}</div><div class="slds-col--bump-left"><system-utility-icon icon="logout" size="x-small" [title]="language.getLabel(\'LBL_LOGOFF\')" (click)="logoff()"></system-utility-icon></div></div></div>'}),__metadata("design:paramtypes",[services_1.loginService,services_1.session,router_1.Router,services_1.language,services_1.metadata,services_1.backend,services_1.configurationService,services_1.modal,services_1.cookie,services_1.userpreferences,services_1.toast])],e)}();exports.GlobaUserPanel=GlobaUserPanel;var GlobaUserPanelIcon=function(){function e(e,t,s){this.session=e,this.modalservice=t,this.backend=s,this.showEdit=!1}return e.prototype.changeImage=function(){var o=this;this.modalservice.openModal("SystemUploadImage").subscribe(function(e){e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe(function(t){if(!1!==t){var s=o.session.authData.userimage;o.session.authData.userimage="",o.backend.postRequest("module/Users/"+o.session.authData.userId+"/image",{},{imagedata:t}).subscribe(function(e){o.session.authData.userimage=t},function(e){o.session.authData.userimage=s})}})})},Object.defineProperty(e.prototype,"editstyle",{get:function(){return{opacity:this.showEdit?1:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userimage",{get:function(){return this.session.authData.userimage},enumerable:!0,configurable:!0}),e.prototype.onMouseEnter=function(){this.showEdit=!0},e.prototype.onMouseLeave=function(){this.showEdit=!1},e=__decorate([core_1.Component({selector:"global-user-panel-icon",template:'<div class="slds-is-relative" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()"><div><span *ngIf="!userimage" class="slds-icon_container slds-icon-standard-empty slds-icon_container--circle" style="width:40px;height:40px;"><system-utility-icon icon="user" size="small" addclasses="slds-icon" colorclass></system-utility-icon></span> <img style="height: 40px; width: 40px" *ngIf="userimage" [src]="userimage"></div><div [ngStyle]="editstyle" class="slds-is-absolute__top slds-align--absolute-center" style="transition: .5s; height: 40px; width: 40px;" (click)="changeImage()"><div class="slds-is-absolute__top" style="background: white;height: 40px; width: 40px; opacity: .7;"></div><system-utility-icon icon="edit" size="x-small" style="z-index: 1;"></system-utility-icon></div></div>'}),__metadata("design:paramtypes",[services_1.session,services_1.modal,services_1.backend])],e)}();exports.GlobaUserPanelIcon=GlobaUserPanelIcon;var GlobalRecentItems=function(){function GlobalRecentItems(e,t,s,o){this.language=e,this.router=s,this.recent=o,t.setTabInfo({displayname:this.language.getLabel("LBL_RECENTLYVIEWED"),displayicon:"breadcrumbs"})}return GlobalRecentItems.prototype.goRecent=function(e,t){this.router.navigate(["/module/"+e+"/"+t])},GlobalRecentItems=__decorate([core_1.Component({selector:"global-recent-items",template:'<div class="slds-page-header"><div class="slds-page-header__row"><div class="slds-page-header__col-title"><div class="slds-media"><div class="slds-media__body"><div class="slds-page-header__name"><div class="slds-page-header__name-title"><h1><span class="slds-page-header__title slds-truncate"><system-label label="LBL_RECENT_ITEMS"></system-label></span></h1></div></div><p class="slds-page-header__name-meta">{{recent.items.length}}<system-label label="LBL_ITEMS"></system-label></p></div></div></div></div></div><div system-to-bottom><table class="slds-table slds-table--bordered slds-table--fixed-layout slds-table--header-fixed" role="grid"><thead><tr class="slds-text-title--caps"><th class="slds-cell-shrink" scope="col"></th><th class="slds-is-sortable slds-is-resizable" scope="col"><span class="slds-truncate slds-th__action"><system-label label="LBL_NAME"></system-label></span></th><th class="slds-is-sortable slds-is-resizable" scope="col"><span class="slds-truncate slds-th__action"><system-label label="LBL_MODULE"></system-label></span></th></tr></thead><tbody><tr *ngFor="let recentItem of recent.items" class="slds-hint-parent"><td role="gridcell" class="slds-cell-shrink"><system-icon [module]="recentItem.module_name" size="small" divClass></system-icon></td><td scope="row"><a href="javascript:void(0);" class="slds-text-link--reset" (click)="goRecent(recentItem.module_name, recentItem.item_id)"><div class="slds-truncate" system-model-popover [module]="recentItem.module_name" [id]="recentItem.item_id">{{recentItem.item_summary}}</div></a></td><td scope="row"><div class="slds-truncate"><system-label-modulename [module]="recentItem.module_name" [singular]="true"></system-label-modulename></div></td></tr></tbody></table></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.navigationtab,router_1.Router,services_1.recent])],GlobalRecentItems)}();exports.GlobalRecentItems=GlobalRecentItems;var GlobalSearch=function(){function GlobalSearch(e,t,s,o,i,a,n){this.navigation=e,this.navigationtab=t,this.elementref=s,this.activatedRoute=i,this.fts=a,this.language=n,this.searchScope="*",this.searchTimeOut=void 0,this.searchTerm=""}return GlobalSearch.prototype.ngOnInit=function(){var s=this;this.routeSubscription=this.navigationtab.activeRoute$.subscribe(function(e){var t=e.params;if(t.searchterm){try{s.searchTerm=atob(decodeURIComponent(t.searchterm))}catch(e){s.searchTerm=t.searchterm}s.doSearch()}else s.navigationtab.setTabInfo({displayname:"global search",displayicon:"search"})})},GlobalSearch.prototype.ngOnDestroy=function(){this.routeSubscription.unsubscribe()},GlobalSearch.prototype.search=function(e){var t=this;switch(e.key){case"Enter":this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.fts.searchTerm=this.searchTerm,this.doSearch();break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return t.doSearch()},1e3)}},Object.defineProperty(GlobalSearch.prototype,"totalcount",{get:function(){for(var e=0,t=0,s=this.fts.moduleSearchresults;t<s.length;t++){e+=s[t].data.total}return e},enumerable:!0,configurable:!0}),Object.defineProperty(GlobalSearch.prototype,"totalmodules",{get:function(){for(var e=0,t=0,s=this.fts.moduleSearchresults;t<s.length;t++){0<s[t].data.total&&e++}return e},enumerable:!0,configurable:!0}),GlobalSearch.prototype.doSearch=function(){var i=this;"*"===this.searchScope?this.fts.searchByModules({searchterm:this.searchTerm}).subscribe(function(e){for(var t=0,s=0,o=i.fts.moduleSearchresults;s<o.length;s++){t+=o[s].data.total}i.setTabName(t)}):this.fts.searchByModules({searchterm:this.searchTerm,modules:[this.searchScope],size:50}).subscribe(function(e){for(var t=0,s=0,o=i.fts.moduleSearchresults;s<o.length;s++){t+=o[s].data.total}i.setTabName(t)}),this.setTabName()},GlobalSearch.prototype.setTabName=function(e){this.navigationtab.setTabInfo({displayname:"search "+this.searchTerm+(e?" ("+e+")":""),displayicon:"search"})},GlobalSearch.prototype.getScopeClass=function(e){if(e===this.searchScope)return"slds-is-active"},GlobalSearch.prototype.setSearchScope=function(e){e!==this.searchScope&&(this.searchScope=e,this.doSearch())},GlobalSearch.prototype.infiniteScroll=function(){return"*"!==this.searchScope},GlobalSearch=__decorate([core_1.Component({selector:"global-search",template:'<div class="slds-grid"><div system-to-bottom class="slds-show--large slds-size--1-of-5 slds-grid slds-grid--vertical slds-navigation-list--vertical slds-navigation-list--vertical-inverse"><h2 class="slds-text-title--caps slds-p-around--medium"><system-label label="LBL_SEARCHRESULTS"></system-label></h2><ul><li [ngClass]="getScopeClass(\'*\')"><a href="javascript:void(0);" class="slds-navigation-list--vertical__action slds-text-link--reset" (click)="setSearchScope(\'*\')"><system-label label="LBL_TOPRESULTS"></system-label></a></li><li *ngFor="let module of fts.searchModules" [ngClass]="getScopeClass(module)"><a href="javascript:void(0);" class="slds-navigation-list--vertical__action slds-text-link--reset" (click)="setSearchScope(module)"><system-label-modulename [module]="module"></system-label-modulename></a></li></ul></div><div class="slds-size--1-of-1 slds-large-size--4-of-5 slds-border--left"><div class="slds-p-around--medium slds-theme--shade"><div class="slds-page-header__row"><div class="slds-page-header__col-title"><div class="slds-media"><div class="slds-media__figure"><system-icon icon="search" (click)="setSearchScope(\'*\')"></system-icon></div><div class="slds-media__body"><h1 class="slds-grid slds-grid--vertical-align-center"><div class="slds-form-element slds-size--1-of-1"><div class="slds-form-element__control"><input system-autofocus class="slds-input" type="text" [(ngModel)]="searchTerm" (keyup)="search($event)" spellcheck="false"></div></div></h1></div></div></div></div></div><div *ngIf="searchScope == \'*\'" system-to-bottom><table *ngIf="fts.runningmodulesearch" class="slds-table slds-table--bordered slds-table--fixed-layout" role="grid"><tbody system-table-stencils [columns]="7" [select]="false" [tools]="false" [rows]="15"></tbody></table><global-search-module class="slds-m-bottom--medium" *ngFor="let result of fts.moduleSearchresults" [module]="result.module" (scope)="setSearchScope($event)"></global-search-module><div *ngIf="!fts.runningmodulesearch && totalcount == 0" class="slds-align--absolute-center slds-height_full"><system-illustration-no-records><system-label label="MSG_NO_RECORDS_FOUND"></system-label></system-illustration-no-records></div></div><div *ngIf="searchScope != \'*\'"><global-search-module-only [module]="searchScope"></global-search-module-only></div></div></div>',providers:[services_1.fts]}),__metadata("design:paramtypes",[services_1.navigation,services_1.navigationtab,core_1.ElementRef,router_1.Router,router_1.ActivatedRoute,services_1.fts,services_1.language])],GlobalSearch)}();exports.GlobalSearch=GlobalSearch;var GlobalSearchModule=function(){function GlobalSearchModule(e,t,s,o,i,a){this.metadata=e,this.elementref=t,this.fts=o,this.language=i,this.layout=a,this.module="",this.scope=new core_1.EventEmitter,this.listfields=[]}return Object.defineProperty(GlobalSearchModule.prototype,"issmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),GlobalSearchModule.prototype.ngOnInit=function(){this.listfields=[];var e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(var t=0,s=this.metadata.getFieldSetFields(e.fieldset);t<s.length;t++){var o=s[t];!1!==o.fieldconfig.default&&this.listfields.push(o)}},GlobalSearchModule.prototype.getCount=function(){var t=this,s={};return this.fts.moduleSearchresults.some(function(e){if(e.module===t.module)return s={total:e.data.total,hits:e.data.hits.length},!0}),s},Object.defineProperty(GlobalSearchModule.prototype,"hidepanel",{get:function(){return!(!this.fts.runningmodulesearch&&0<this.getCount().total)},enumerable:!0,configurable:!0}),GlobalSearchModule.prototype.canViewMore=function(){return 5<this.getCount().total},GlobalSearchModule.prototype.getItems=function(){var t=this,s=[];return this.fts.moduleSearchresults.some(function(e){if(e.module===t.module)return s=e.data.hits,!0}),s},GlobalSearchModule.prototype.setSearchScope=function(){this.scope.emit(this.module)},__decorate([core_1.Input(),__metadata("design:type",String)],GlobalSearchModule.prototype,"module",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],GlobalSearchModule.prototype,"scope",void 0),GlobalSearchModule=__decorate([core_1.Component({selector:"global-search-module",template:'<div [ngClass]="{\'slds-hide\': hidepanel}"><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-p-left--small slds-show--medium"><system-icon [module]="module" divClass></system-icon></div><div class="slds-p-around--small slds-theme--default slds-border--top slds-grow"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><h1 class="slds-page-header__title slds-truncate"><system-label-modulename [module]="module"></system-label-modulename></h1></div></div><div class="slds-grid"><div class="slds-col slds-align-bottom"><ul class="slds-list--horizontal slds-has-dividers--left"><li class="slds-item">{{getCount().hits}}<system-label label="LBL_OF"></system-label>{{getCount().total}}<system-label label="LBL_ITEMS"></system-label></li><li *ngIf="canViewMore()" class="slds-item slds-text-link--reset" (click)="setSearchScope()"><system-label label="LBL_VIEWALL"></system-label></li></ul></div></div></div></div><div><table class="slds-table slds-table--fixed-layout slds-max-medium-table--stacked-horizontal" [ngClass]="{\'slds-table--bordered\':!issmall}" role="grid"><thead class="slds-show--medium"><tr class="slds-text-title--caps"><th *ngFor="let item of listfields" scope="col"><div class="slds-truncate slds-p-around--x-small"><system-label-fieldname [module]="module" [field]="item.field"></system-label-fieldname></div></th></tr></thead><tbody><tr global-search-module-item *ngFor="let item of getItems()" [module]="module" [listfields]="listfields" [listitem]="item"></tr></tbody></table><system-spinner *ngIf="fts.runningmodulesearch"></system-spinner></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,core_1.ElementRef,router_1.Router,services_1.fts,services_1.language,services_1.layout])],GlobalSearchModule)}();exports.GlobalSearchModule=GlobalSearchModule;var GlobalSearchModuleOnly=function(){function e(e,t,s,o,i,a,n){this.broadcast=e,this.metadata=t,this.elementref=s,this.fts=i,this.language=a,this.layout=n,this.module="",this.listfields=[]}return Object.defineProperty(e.prototype,"issmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.listfields=[];var e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(var t=0,s=this.metadata.getFieldSetFields(e.fieldset);t<s.length;t++){var o=s[t];!1!==o.fieldconfig.default&&this.listfields.push(o)}},e.prototype.getCount=function(){var t=this,s={};return this.fts.moduleSearchresults.some(function(e){if(e.module===t.module)return s={total:e.data.total,hits:e.data.hits.length},!0}),s},e.prototype.getItems=function(){var t=this,s=[];return this.fts.moduleSearchresults.some(function(e){if(e.module===t.module)return s=e.data.hits,!0}),s},e.prototype.onScroll=function(e){var t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.fts.loadMore()},__decorate([core_1.ViewChild("tablecontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"tablecontent",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"global-search-module-only",template:'<div class="slds-theme--default slds-border--top slds-grid slds-grid--vertical-align-center"><div class="slds-p-left--small slds-show--medium"><system-icon [module]="module" divClass></system-icon></div><div class="slds-p-around--small"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><h1 class="slds-page-header__title slds-truncate"><system-label-modulename [module]="module"></system-label-modulename></h1></div></div><div class="slds-grid"><div class="slds-col slds-align-bottom"><ul class="slds-list--horizontal slds-has-dividers--left"><li class="slds-item">{{getCount().hits}}<system-label label="LBL_OF"></system-label>{{getCount().total}}<system-label label="LBL_ITEMS"></system-label></li></ul></div></div></div></div><div><table class="slds-show--medium slds-table slds-table--bordered slds-table--fixed-layout" role="grid"><thead><tr class="slds-text-title--caps"><th *ngFor="let item of listfields" scope="col"><div class="slds-truncate slds-p-around--x-small"><system-label-fieldname [module]="module" [field]="item.field"></system-label-fieldname></div></th></tr></thead></table><div system-to-bottom (scroll)="onScroll($event)"><table #tablecontent class="slds-table slds-table--fixed-layout slds-max-medium-table--stacked-horizontal" [ngClass]="{\'slds-table--bordered\':!issmall}" role="grid"><tbody><tr global-search-module-item *ngFor="let item of getItems()" [module]="module" [listfields]="listfields" [listitem]="item"></tr></tbody><tbody system-table-stencils [columns]="listfields?.length" [select]="false" [tools]="false" [rows]="5" *ngIf="fts.runningmodulesearch"></tbody></table><div *ngIf="!fts.runningmodulesearch && getCount().total == 0" class="slds-align--absolute-center slds-height_full"><system-illustration-no-records><system-label label="MSG_NO_RECORDS_FOUND"></system-label></system-illustration-no-records></div></div></div>'}),__metadata("design:paramtypes",[services_1.broadcast,services_1.metadata,core_1.ElementRef,router_1.Router,services_1.fts,services_1.language,services_1.layout])],e)}();exports.GlobalSearchModuleOnly=GlobalSearchModuleOnly;var GlobalSearchModuleItem=function(){function e(e,t,s,o,i,a){this.elementref=e,this.router=t,this.view=s,this.model=o,this.language=i,this.layout=a,this.module="",this.listfields="",this.listitem={},this.expanded=!1,this.view.isEditable=!1,this.view.displayLabels=!1}return e.prototype.ngOnInit=function(){this.model.module="_doc"==this.listitem._type?this.listitem._source._module:this.listitem._type,this.model.id=this.listitem._id,this.model.data=this.model.utils.backendModel2spice(this.model.module,this.listitem._source),this.model.data.acl=this.listitem.acl,this.model.data.acl_fieldcontrol=this.listitem.acl_fieldcontrol,this.model.data.acl=this.listitem.acl},e.prototype.navigateDetail=function(e){e.stopPropagation(),this.model.data.acl.detail&&this.model.goDetail()},e.prototype.toggleexpanded=function(){this.expanded=!this.expanded},Object.defineProperty(e.prototype,"isexpanded",{get:function(){return"small"!=this.layout.screenwidth||this.expanded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandicon",{get:function(){return this.expanded?"chevronup":"chevrondown"},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listitem",void 0),e=__decorate([core_1.Component({selector:"[global-search-module-item]",template:'<td class="slds-hide--medium"><div class="slds-grid slds-grid--vertical-align-center slds-p-around--xx-small"><system-icon [module]="model.module" size="xx-small" divClass="slds-p-right--xx-small"></system-icon><div class="slds-text-align--left slds-truncate slds-grow" (click)="navigateDetail($event)">{{model.data.summary_text}}</div><system-utility-icon [icon]="expandicon" size="xx-small" (click)="toggleexpanded()"></system-utility-icon></div></td><ng-container *ngIf="isexpanded"><td *ngFor="let item of listfields" scope="row" (click)="navigateDetail($event)" [attr.data-label]="language.getFieldDisplayName(module, item.field)"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></td></ng-container>',providers:[services_1.view,services_1.model]}),__metadata("design:paramtypes",[core_1.ElementRef,router_1.Router,services_1.view,services_1.model,services_1.language,services_1.layout])],e)}();exports.GlobalSearchModuleItem=GlobalSearchModuleItem;var GlobalNewsFeed=function(){function e(e){var t=this;this.http=e,this.news=[],this.isLoading=!0;var s=btoa("https://www.spicecrm.io/wp-json/wp/v2/posts");this.http.get("proxy?useurl="+s).subscribe(function(e){t.news=e,t.isLoading=!1})}return e.prototype.getContainerClass=function(){return this.isLoading?"slds-align--absolute-center":""},e=__decorate([core_1.Component({selector:"global-newsfeed",template:'<div style="height: 100%;" class="slds-p-around--medium slds-theme--shade" [ngClass]="getContainerClass()"><system-spinner *ngIf="isLoading"></system-spinner><global-newsfeed-item *ngFor="let newsitem of news" [item]="newsitem"></global-newsfeed-item></div>'}),__metadata("design:paramtypes",[http_1.HttpClient])],e)}();exports.GlobalNewsFeed=GlobalNewsFeed;var GlobalNewsFeedItem=function(){function e(){this.item={}}return e.prototype.getDate=function(){return moment(this.item.date).fromNow()},e.prototype.getExcerpt=function(){return this.item.excerpt.rendered.replace("<a",'<a target="_blank"')},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),e=__decorate([core_1.Component({selector:"global-newsfeed-item",template:'<article class="slds-card slds-m-bottom--medium"><div class="slds-card__header"><div class="slds-grid slds-grid_vertical-align-center"><system-custom-icon icon="wordpress" size="small"></system-custom-icon><h2 class="slds-text-heading--medium slds-truncate"><a target="_blank" [attr.href]="item.link" [innerHTML]="item.title.rendered"></a></h2></div></div><div class="slds-card__body slds-p-vertical--xx-small slds-p-horizontal--small"><div class="slds-card__body--inner slds-grid slds-wrap slds-grid--pull-padded" style="text-align: justify" [innerHTML]="getExcerpt()"></div></div><div class="slds-card__footer">{{getDate()}}</div></article>'})],e)}();exports.GlobalNewsFeedItem=GlobalNewsFeedItem;var GlobalLoginGoogle=function(){function e(e,t,s,o,i,a){var n=this;this.backend=e,this.configuration=t,this.http=s,this.loginService=o,this.session=i,this.libloader=a,this.visible=!1,this.disabled=!0,this.scope=["profile","email","https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/admin.directory.user.readonly","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/tasks"].join(" "),this.configuration.loaded$.subscribe(function(e){n.googleInit()})}return e.prototype.googleInit=function(){var t=this;this.configuration.data.backendextensions.hasOwnProperty("google_oauth")&&null!=this.configuration.data.backendextensions.google_oauth.config?this.libloader.loadFromSource(["https://apis.google.com/js/api.js","https://apis.google.com/js/platform.js"]).subscribe(function(e){gapi.load("auth2",function(){var e=JSON.parse(t.configuration.data.backendextensions.google_oauth.config.calendarconfig);t.auth2=gapi.auth2.init({client_id:e.web.client_id,cookiepolicy:"single_host_origin",scope:t.scope}),t.visible=!0,t.disabled=!1})},function(e){t.disabled=!0,console.log("Error loading Google Libs")}):this.visible=!1},e.prototype.signInClick=function(e){var o=this;e.preventDefault(),e.stopPropagation(),Promise.resolve(this.auth2.signIn()).then(function(e){var t=e.getAuthResponse().id_token,s=e.getAuthResponse().access_token;o.loginService.oauthToken=t,o.loginService.accessToken=s,o.loginService.authData.userName="",o.loginService.authData.password="",o.loginService.login().subscribe(function(e){o.synchronize()},function(e){console.log(e)})}).catch(function(e){console.log(JSON.stringify(e,void 0,2))})},e.prototype.synchronize=function(){this.backend.getRequest("/google/calendar/sync").subscribe(function(e){console.log("Successfully Synchronized")},function(e){console.log("Synchronization Error")})},e=__decorate([core_1.Component({selector:"global-login-google",template:'<button class="slds-button slds-button_neutral slds-m-vertical--x-small" (click)="signInClick($event)" style="width:100%" *ngIf="visible"><div class="slds-align--absolute-center slds-grid slds-grid--vertical-align-center"><img style="height: 18px;width:18px;margin-right: 24px;" src="https://developers.google.com/identity/images/g-logo.png"><div>Sign in with Google</div></div></button>'}),__metadata("design:paramtypes",[services_1.backend,services_1.configurationService,http_1.HttpClient,services_1.loginService,services_1.session,services_1.libloader])],e)}();exports.GlobalLoginGoogle=GlobalLoginGoogle;var GlobalObtainImportantPreferences=function(){function GlobalObtainImportantPreferences(e,t,s,o,i,a){this.backend=e,this.lang=t,this.prefservice=s,this.session=o,this.router=i,this.toastservice=a,this.componentId=_.uniqueId(),this.namesOfMissingPrefs=[],this.timeshift=0,this.preferences={},this.navigateToUserPrefs=!1,this.guessedTimezone=moment.tz.guess(),this.guessedTimezoneGmtDiff=moment.tz(this.guessedTimezone).format("Z"),this.timeshiftAction="takeSelected",this.dateFormatList=[{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}],this.timeFormatList=[{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}return GlobalObtainImportantPreferences.prototype.ngOnInit=function(){this.timeshift&&(this.selectedTimezone=this.configuredTimezone=this.prefservice.unchangedPreferences.global.timezone),(this.isPrefMissing("timezone")||this.timeshift)&&this.getTimezones();for(var e=0,t=this.namesOfMissingPrefs;e<t.length;e++){var s=t[e];this.preferences[s]=this.prefservice.defaults[s]}},GlobalObtainImportantPreferences.prototype.save=function(){var e=this;this.timeshift&&("takeSelected"===this.timeshiftAction&&this.configuredTimezone!==this.selectedTimezone&&(this.preferences.timezone=this.selectedTimezone),"takeGuessed"===this.timeshiftAction&&(this.preferences.timezone=this.guessedTimezone)),_.isEmpty(this.preferences)||this.prefservice.setPreferences(this.preferences).subscribe(function(){e.toastservice.sendToast(e.lang.getLabel("LBL_DATA_SAVED"),"success")}),this.navigateToUserPrefs&&this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.self.destroy()},GlobalObtainImportantPreferences.prototype.canSave=function(){if(this.namesOfMissingPrefs)for(var e=0,t=this.namesOfMissingPrefs;e<t.length;e++){var s=t[e];if(!this.preferences[s])return!1}return!0},GlobalObtainImportantPreferences.prototype.isPrefMissing=function(e){return-1!==this.namesOfMissingPrefs.indexOf(e)},GlobalObtainImportantPreferences.prototype.getTimezones=function(){var t=this;this.backend.getRequest("/timezones").subscribe(function(e){t.timezones=e,t.timezoneKeys=Object.keys(t.timezones)})},GlobalObtainImportantPreferences.prototype.onModalEscX=function(){return!1},__decorate([core_1.Input(),__metadata("design:type",Array)],GlobalObtainImportantPreferences.prototype,"namesOfMissingPrefs",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],GlobalObtainImportantPreferences.prototype,"timeshift",void 0),GlobalObtainImportantPreferences=__decorate([core_1.Component({selector:"global-obtin-important-preferences",template:'<system-modal><system-modal-header hiddenCloseButton="true">{{lang.getLabel(\'LBL_IMPORTANT_USER_SETTINGS\')}}</system-modal-header><system-modal-content><div *ngIf="namesOfMissingPrefs.length" class="slds-section slds-is-open"><h3 class="slds-section__title slds-theme_shade"><span class="slds-truncate slds-p-horizontal_small" title="Section Title">{{lang.getLabel(\'LBL_SOME_SETTINGS_ARE_MISSING\')}} &hellip;</span></h3><div class="slds-section__content"><p class="slds-p-horizontal--medium slds-p-vertical--x-small">{{lang.getLabel(\'MSG_NOT_CONFIGURED_USER_SETTINGS\')}}</p><div class="slds-grid slds-p-horizontal--x-small"><div *ngIf="isPrefMissing(\'timezone\')" class="slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3"><label class="slds-form-element__label" for="{{componentId}}-timezone">{{ lang.getLabel(\'LBL_TIMEZONE\') }}</label><div class="slds-select_container"><select id="{{componentId}}-timezone" class="slds-select" name="timezone" [(ngModel)]="preferences.timezone"><option *ngFor="let key of timezoneKeys" value="{{key}}">{{timezones[key]}}</option></select></div></div><div *ngIf="isPrefMissing(\'datef\')" class="slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3"><label class="slds-form-element__label" for="{{componentId}}-datef">{{ lang.getLabel(\'LBL_DATE_FORMAT\') }}</label><div class="slds-select_container"><select id="{{componentId}}-datef" class="slds-select" [(ngModel)]="preferences.datef"><option *ngFor="let item of dateFormatList" [value]="item.value">{{item.name}}</option></select></div></div><div *ngIf="isPrefMissing(\'timef\')" class="slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3"><label class="slds-form-element__label" for="{{componentId}}-timef">{{ lang.getLabel(\'LBL_TIME_FORMAT\') }}</label><div class="slds-select_container"><select id="{{componentId}}-timef" class="slds-select" [(ngModel)]="preferences.timef"><option *ngFor="let item of timeFormatList" [value]="item.value">{{item.name}}</option></select></div></div></div></div></div><div *ngIf="timeshift" class="slds-section slds-is-open"><h3 class="slds-section__title slds-theme_shade"><span class="slds-truncate slds-p-horizontal_small" title="Section Title">{{lang.getLabel(\'LBL_TIME_SHIFT\')}}</span></h3><div class="slds-section__content"><p class="slds-p-horizontal--medium slds-p-vertical--x-small slds-m-bottom--x-small">{{lang.getLabelFormatted(\'MSG_TIME_SHIFT\', [timeshift])}}</p><div class="slds-grid slds-p-horizontal--medium slds-grid--vertical-align-center"><span class="slds-radio"><input type="radio" id="{{componentId}}-timeshift-radio-2" checked name="timeshift" [(ngModel)]="timeshiftAction" value="takeSelected"> <label class="slds-radio__label" for="{{componentId}}-timeshift-radio-2"><span class="slds-radio_faux"></span></label></span><div class="slds-form-element"><div class="slds-select_container"><select class="slds-select" name="timezone" [(ngModel)]="selectedTimezone" (change)="this.timeshiftAction = \'takeSelected\'"><option *ngFor="let key of timezoneKeys" value="{{key}}">{{timezones[key]}}</option></select></div></div><span class="slds-radio slds-m-left--medium"><input type="radio" id="{{componentId}}-timeshift-radio-1" name="timeshift" [(ngModel)]="timeshiftAction" value="takeGuessed"> <label class="slds-radio__label" for="{{componentId}}-timeshift-radio-1"><span class="slds-radio_faux"></span> <span class="slds-form-element__label">{{guessedTimezone}} (GMT{{guessedTimezoneGmtDiff}})</span></label></span></div></div></div></system-modal-content><system-modal-footer><div class="slds-grid slds-grid--align-spread slds-grid--align-center slds-grid--align-end"><div *ngIf="namesOfMissingPrefs.length" class="slds-form-element slds-p-horizontal--medium slds-p-vertical--x-small slds-col--bump-right"><div class="slds-form-element__control"><div class="slds-checkbox"><input type="checkbox" id="ask-userprefs-navigate" [(ngModel)]="navigateToUserPrefs"> <label class="slds-checkbox__label" for="ask-userprefs-navigate"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{lang.getLabel(\'MSG_AFTER_SAVING_NAVIGATE_USERPREFS\')}}</span></label></div></div></div><button class="slds-button slds-button--brand" (click)="save()" [disabled]="!canSave()">{{lang.getLabel(\'LBL_OK\')}}</button></div></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.backend,services_1.language,services_1.userpreferences,services_1.session,router_1.Router,services_1.toast])],GlobalObtainImportantPreferences)}();exports.GlobalObtainImportantPreferences=GlobalObtainImportantPreferences;var GlobalObtainGDPRConsent=function(){function e(e,t,s,o,i,a,n,l,r){this.sanitizer=e,this.metadata=t,this.language=s,this.backend=o,this.loginService=i,this.http=a,this.configuration=n,this.session=l,this.toast=r,this.isSaving=!1,this.retrieveConsentText()}return e.prototype.retrieveConsentText=function(){var t=this,e=new http_1.HttpHeaders;e=e.set("OAuth-Token",this.session.authData.sessionId),this.http.get(this.configuration.getBackendUrl()+"/gdpr/portalGDPRconsentText",{headers:e}).subscribe(function(e){t.consentText=e.portalGDPRconsentText})},e.prototype.save=function(){var t=this;this.isSaving||(this.isSaving=!0,this.backend.postRequest("/gdpr/portalGDPRconsent",null,{consentText:this.consentText}).subscribe(function(e){t.loginService.session.authData.obtainGDPRconsent=!1},function(e){t.isSaving=!1,"wrongConsentText"===e.error.error.errorCode?t.consentText=e.error.error.details.properConsentText:t.toast.sendToast("Error saving the GDPR consent.","error","Try again or consult the administrator.")}))},e.prototype.canSave=function(){return this.consentText&&!this.isSaving},e=__decorate([core_1.Component({selector:"global-obtain-gdpr-consent",template:'<div [system-overlay-loading-spinner]="!consentText" style="min-height:80px"><div *ngIf="consentText" [innerHTML]="sanitizer.bypassSecurityTrustHtml(consentText)"></div></div>'}),__metadata("design:paramtypes",[platform_browser_1.DomSanitizer,services_1.metadata,services_1.language,services_1.backend,services_1.loginService,http_1.HttpClient,services_1.configurationService,services_1.session,services_1.toast])],e)}();exports.GlobalObtainGDPRConsent=GlobalObtainGDPRConsent;var GlobalObtainGDPRConsentContainer=function(){function GlobalObtainGDPRConsentContainer(e,t,s){var o=this;this.metadata=e,this.language=t,this.login=s,this.showDefault=!1,this.headerLabel="LBL_GDPR_DATA_AGREEMENT",this.taglineLabel="MSG_TO_CONTINUE_AGREE_TO_GDPR_CONSENT",this.saveButtonLabel="LBL_I_AGREE",this.canSave=function(){return!!o.childComponent&&o.childComponent.canSave()},this.isSaving=function(){return!!o.childComponent&&o.childComponent.isSaving}}return GlobalObtainGDPRConsentContainer.prototype.ngAfterViewInit=function(){this.displayComponent()},GlobalObtainGDPRConsentContainer.prototype.displayComponent=function(){var t=this;this.componentConfig=this.metadata.getComponentConfig("GlobalObtainGDPRConsentContainer"),this.componentConfig&&this.componentConfig.customComponent?(this.nameOfCustomComponent=this.componentConfig.customComponent,this.metadata.addComponent(this.nameOfCustomComponent,this.container).subscribe(function(e){e.instance.headerLabel&&(t.headerLabel=e.instance.headerLabel),e.instance.taglineLabel&&(t.taglineLabel=e.instance.taglineLabel),e.instance.saveButtonLabel&&(t.saveButtonLabel=e.instance.saveButtonLabel),e.instance.finished.subscribe(function(e){return t.finished(e)}),t.childComponent=e.instance})):this.showDefault=!0},GlobalObtainGDPRConsentContainer.prototype.save=function(){this.childComponent.save()},GlobalObtainGDPRConsentContainer.prototype.finished=function(e){e||this.login.logout(),this.self.destroy()},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!1}),__metadata("design:type",core_1.ViewContainerRef)],GlobalObtainGDPRConsentContainer.prototype,"container",void 0),__decorate([core_1.ViewChild(GlobalObtainGDPRConsent),__metadata("design:type",GlobalObtainGDPRConsent)],GlobalObtainGDPRConsentContainer.prototype,"childComponent",void 0),GlobalObtainGDPRConsentContainer=__decorate([core_1.Component({selector:"global-obtain-gdpr-consent-container",template:'<system-modal size="small"><system-modal-header hiddenCloseButton="true">{{language.getLabel( headerLabel )}}<system-modal-header-tagline>{{language.getLabel( taglineLabel )}}</system-modal-header-tagline></system-modal-header><system-modal-content [system-overlay-loading-spinner]="isSaving()"><div #container></div><global-obtain-gdpr-consent *ngIf="showDefault"></global-obtain-gdpr-consent></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="finished(false)">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button [disabled]="!canSave()" class="slds-button slds-button--brand" (click)="save()">{{language.getLabel( saveButtonLabel )}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.loginService])],GlobalObtainGDPRConsentContainer)}();exports.GlobalObtainGDPRConsentContainer=GlobalObtainGDPRConsentContainer;var GlobalComponents=function(){function GlobalComponents(e,t){this.metadata=e,this.vms=t,this.version="1.0",this.build_date="2020-04-24",this.vms.registerModule(this)}return GlobalComponents=__decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,objectfields_1.ObjectFields,directives_1.DirectivesModule,systemcomponents_1.SystemComponents,objectcomponents_1.ObjectComponents,router_1.RouterModule.forRoot([{path:"setup",component:GlobalSetup}])],declarations:[GlobalNewsFeed,GlobalNewsFeedItem,GlobalHeader,GlobalHeaderTop,GlobalHeaderSearch,GlobalHeaderSearchResultsItems,GlobalHeaderSearchResultsItem,GlobalHeaderSearchRecentItems,GlobalHeaderSearchRecentItem,GlobalHeaderTools,GlobalHeaderActions,GlobalHeaderActionItem,GlobalHeaderFavorite,GlobalHeaderWorkbench,GlobalHeaderReload,GlobalFooter,GlobalNavigation,GlobalNavigationMenu,GlobalNavigationMenuItem,GlobalNavigationMenuItemActionContainer,GlobalNavigationMenuItemNew,GlobalNavigationMenuItemActionNew,GlobalNavigationMenuItemRoute,GlobalNavigationMenuItemActionRoute,GlobalNavigationMenuItemIcon,GlobalNavigationMenuMore,GlobalNavigationCompact,GlobalLogin,GlobalSetup,GlobalLoginForgotPassword,GlobalLoginResetPassword,GlobalUser,GlobaUserPanel,GlobaUserPanelIcon,GlobalAppLauncher,GlobalAppLauncherDialog,GlobalAppLauncherDialogRoleTile,GlobalDockedComposerContainer,GlobalDockedComposer,GlobalDockedComposerCall,GlobalDockedComposerModal,GlobalDockedComposerOverflow,GlobalDockedComposerMessagesBadge,GlobalComposeButton,GlobalRecentItems,GlobalSearch,GlobalSearchModule,GlobalSearchModuleOnly,GlobalSearchModuleItem,GlobalLoginGoogle,GlobalObtainImportantPreferences,GlobalObtainGDPRConsent,GlobalObtainGDPRConsentContainer,GlobalNavigationTabbed,GlobalNavigationTabbedMenu,GlobalNavigationTabbedMenuModules,GlobalNavigationTabbedMenuModuleMenu,GlobalNavigationTabbedMenuTab,GlobalNavigationTabbedMoreTab,GlobalNavigationTabbedSubtabs,GlobalNavigationTabbedSubtabItem,GlobalNavigationTabbedSubTabMoreTab],entryComponents:[GlobalHeader,GlobalNavigationMenuItem,GlobalNavigationMenuItemNew,GlobalNavigationMenuMore,GlobalHeaderTop,GlobalHeaderSearch,GlobalHeaderSearchResultsItems,GlobalHeaderSearchResultsItem,GlobalHeaderSearchRecentItems,GlobalHeaderSearchRecentItem,GlobalDockedComposerContainer,GlobalDockedComposer,GlobalDockedComposerContainer],exports:[GlobalNewsFeed,GlobalHeader,GlobalFooter,GlobalDockedComposerContainer,GlobalDockedComposer,GlobalDockedComposerOverflow,GlobalComposeButton]}),__metadata("design:paramtypes",[services_1.metadata,services_1.VersionManagerService])],GlobalComponents)}();exports.GlobalComponents=GlobalComponents;